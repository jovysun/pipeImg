/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/webpack/buildin/amd-options.js":
/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n/* WEBPACK VAR INJECTION */}.call(this, {}))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vYW1kLW9wdGlvbnMuanM/MDA4NiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9hbWQtb3B0aW9ucy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbHMgX193ZWJwYWNrX2FtZF9vcHRpb25zX18gKi9cclxubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXztcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/amd-options.js\n");

/***/ }),

/***/ "./node_modules/webpack/buildin/harmony-module.js":
/*!*******************************************!*\
  !*** (webpack)/buildin/harmony-module.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vaGFybW9ueS1tb2R1bGUuanM/ODJiMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2hhcm1vbnktbW9kdWxlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcmlnaW5hbE1vZHVsZSkge1xuXHRpZiAoIW9yaWdpbmFsTW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdHZhciBtb2R1bGUgPSBPYmplY3QuY3JlYXRlKG9yaWdpbmFsTW9kdWxlKTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJsb2FkZWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUubDtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImlkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJleHBvcnRzXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWVcblx0XHR9KTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/harmony-module.js\n");

/***/ }),

/***/ "./src/js/dragBox.js":
/*!***************************!*\
  !*** ./src/js/dragBox.js ***!
  \***************************/
/*! exports provided: DragBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DragBox\", function() { return DragBox; });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ \"./src/js/util.js\");\n\nclass DragBox {\n    constructor(options) {\n        // 默认配置参数\n        const defaults = {\n            // 待编辑图片元素\n            ele: '',\n            width: '100%',\n            height: '100%',\n            markText: 'producttest.en.made-in-china.com',\n            // 是否有明暗效果，主要是裁剪图片效果\n            hasLight: false,\n            fixRatio: false,\n            // 拖动触点回调函数\n            onDragPoint: (boxData) => {},\n            onDragComplete: () => {}\n        };\n\n        options = Object.assign({}, defaults, options);\n        this.ele = options.ele;\n        this.width = options.width;\n        this.height = options.height;\n        this.markText = options.markText;\n        this.hasLight = options.hasLight;\n        this.fixRatio = options.fixRatio;\n        this.onDragPoint = options.onDragPoint;\n        this.onDragComplete = options.onDragComplete;\n\n        this.init();\n    }\n    init() {\n        this.$ele = $(this.ele);\n        let src = this.$ele.attr('src');\n        let $parent = this.$ele.parent();\n\n        let dragBoxHtml = `<div class=\"dragbox-wrapper J-dragbox-wrapper\">\n                                <img class=\"J-source\" src=\"${src}\">\n                                <div class=\"drag-box J-drag-box\">\n                                    <div class=\"drag-point up-left J-drag-point\"></div>\n                                    <div class=\"drag-point up J-drag-point\"></div>\n                                    <div class=\"drag-point up-right J-drag-point\"></div>\n                                    <div class=\"drag-point right J-drag-point\"></div>\n                                    <div class=\"drag-point right-down J-drag-point\"></div>\n                                    <div class=\"drag-point down J-drag-point\"></div>\n                                    <div class=\"drag-point left-down J-drag-point\"></div>\n                                    <div class=\"drag-point left J-drag-point\"></div>\n                                    <div class=\"mark-txt J-mark-txt\">${this.markText}</div>\n                                </div>\n                            </div>`;\n        if (this.hasLight) {\n            dragBoxHtml = `<div class=\"dragbox-wrapper J-dragbox-wrapper\">\n                                <img class=\"J-source\" src=\"${src}\" id=\"img1\">\n                                <img class=\"J-source\" src=\"${src}\" id=\"img2\">\n                                <div class=\"drag-box J-drag-box\">\n                                    <div class=\"drag-point up-left J-drag-point\"></div>\n                                    <div class=\"drag-point up J-drag-point\"></div>\n                                    <div class=\"drag-point up-right J-drag-point\"></div>\n                                    <div class=\"drag-point right J-drag-point\"></div>\n                                    <div class=\"drag-point right-down J-drag-point\"></div>\n                                    <div class=\"drag-point down J-drag-point\"></div>\n                                    <div class=\"drag-point left-down J-drag-point\"></div>\n                                    <div class=\"drag-point left J-drag-point\"></div>\n                                </div>\n                            </div>`;\n        }\n\n        $parent.html(dragBoxHtml);\n        this.$dragBox = $parent.find('.J-drag-box');\n        this.$dragBox.css({\n            width: this.width,\n            height: this.height\n        });\n        this.$dragPoint = this.$dragBox.find('.J-drag-point');\n\n\n        this.boxEl = this.$dragBox.get(0);\n        this.containerEl = this.boxEl.parentNode;\n\n        this.boxData = {\n            left: this.boxEl.offsetLeft,\n            top: this.boxEl.offsetTop,\n            width: this.boxEl.offsetWidth,\n            height: this.boxEl.offsetHeight,\n            ratio: this.boxEl.offsetWidth / this.boxEl.offsetHeight\n        };\n\n        this._bind();\n\n\n        Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"drag\"])(this.boxEl, this.boxEl, this.boxEl.parentNode, (left, top) => {\n            this._light();\n            this.onDragComplete(left, top);\n        });\n\n\n    }\n    _bind() {\n        let isDraging = false;\n        let contact = \"\"; //表示被按下的触点\n        const DRAGPOINT = ['up-left', 'up', 'up-right', 'right', 'right-down', 'down', 'left-down', 'left'];\n        let dragBoxRatio = this.boxData.width / this.boxData.height;\n        //鼠标按下时\n        this.$dragPoint.on('mousedown', (e) => {\n            e.stopPropagation();\n            isDraging = true;\n            let index = $(e.target).index();\n            contact = DRAGPOINT[index];\n            dragBoxRatio = this.boxData.width / this.boxData.height;\n        })\n\n        $(document).on('mouseup', (e) => {\n            isDraging = false;\n            this.boxData = {\n                left: this.boxEl.offsetLeft,\n                top: this.boxEl.offsetTop,\n                width: this.boxEl.offsetWidth,\n                height: this.boxEl.offsetHeight,\n                ratio: this.boxEl.offsetWidth / this.boxEl.offsetHeight\n            };\n        })\n        $(document).on('mousemove', (e) => {\n            if (isDraging == true) {\n                this._move(e, contact, dragBoxRatio);\n                this._light();\n\n                this.boxData = {\n                    left: this.boxEl.offsetLeft,\n                    top: this.boxEl.offsetTop,\n                    width: this.boxEl.offsetWidth,\n                    height: this.boxEl.offsetHeight,\n                    ratio: this.boxEl.offsetWidth / this.boxEl.offsetHeight\n                };\n\n                this.onDragPoint(this.boxData);\n            }\n        })\n\n    }\n\n    //获取元素相对于屏幕左边及上边的距离，利用offsetLeft\n    _getPosition() {\n        let el = this.boxEl;\n        let left = el.offsetLeft;\n        let top = el.offsetTop;\n        let parent = el.offsetParent;\n        while (parent != null) {\n            left += parent.offsetLeft;\n            top += parent.offsetTop;\n            parent = parent.offsetParent;\n        }\n        return {\n            \"left\": left,\n            \"top\": top\n        };\n    }\n\n    _move(e, contact, dragBoxRatio) {\n\n        let x = e.clientX,\n            y = e.clientY;\n        let oldWidth = this.boxEl.offsetWidth; //选取框变化前的宽度\n        let oldHeight = this.boxEl.offsetHeight; //选取框变化前的高度\n        let position = this._getPosition();\n        let top = position.top;\n        let left = position.left;\n\n\n        let newWidth;\n        let newHeight;\n        let newLeft;\n        let newTop;\n\n        // 约束比例：根据宽度计算高度\n        if (contact.indexOf('left') != -1) {\n            let addWidth = left - x;\n            if (addWidth >= 0 && this.boxEl.offsetLeft <= 0) {\n                return false;\n            }\n\n            newWidth = oldWidth + addWidth;\n            newLeft = this.boxEl.offsetLeft - addWidth;\n        }\n        if (contact.indexOf('right') != -1) {\n            let addWidth = x - left - oldWidth;\n            if (addWidth >= 0 && (this.containerEl.clientWidth - (this.boxEl.offsetLeft + oldWidth + addWidth)) <= 0) {\n                return false;\n            }\n\n            newWidth = oldWidth + addWidth;\n            newLeft = this.boxEl.offsetLeft;\n        }\n        if (contact.indexOf('up') != -1) {\n            let addHeight;\n            if (this.fixRatio) {\n                newHeight = newWidth / dragBoxRatio;\n                addHeight = newHeight - oldHeight;\n            } else {\n                addHeight = top - y;\n                newHeight = oldHeight + addHeight;\n            }\n            newTop = this.boxEl.offsetTop - addHeight;\n\n            if (addHeight >= 0 && this.boxEl.offsetTop <= 0) {\n                return false;\n            }\n        }\n        if (contact.indexOf('down') != -1) {\n            let addHeight;\n            if (this.fixRatio) {\n                newHeight = newWidth / dragBoxRatio;\n                addHeight = newHeight - oldHeight;\n                newTop = this.boxEl.offsetTop;\n            } else {\n                addHeight = y - top - oldHeight;\n                newHeight = oldHeight + addHeight;\n            }\n\n            if (addHeight >= 0 && (this.containerEl.clientHeight - (this.boxEl.offsetTop + oldHeight + addHeight)) <= 0) {\n                return false;\n            }\n\n        }\n\n\n        this.boxEl.style.width = newWidth + 'px';\n        this.boxEl.style.height = newHeight + 'px';\n        this.boxEl.style.left = newLeft + 'px';\n        this.boxEl.style.top = newTop + 'px';\n    }\n    _limitedField() {\n\n    }\n    _light() {\n        if (this.hasLight) {\n            this._setChoice();\n        }\n    }\n    //设置选取框图片区域明亮显示\n    _setChoice() {\n        var top = this.boxEl.offsetTop;\n        var right = this.boxEl.offsetLeft + this.boxEl.offsetWidth;\n        var bottom = this.boxEl.offsetTop + this.boxEl.offsetHeight;\n        var left = this.boxEl.offsetLeft;\n        img2.style.clip = \"rect(\" + top + \"px,\" + right + \"px,\" + bottom + \"px,\" + left + \"px)\";\n    }\n\n    update(width, height) {\n        width && (this.width = width);\n        height && (this.height = height);\n        this.$dragBox.css({\n            width: this.width,\n            height: this.height\n        });\n    }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvZHJhZ0JveC5qcz9lZDJkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUdnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBOztBQUVBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZEQUE2RCxJQUFJO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxjQUFjO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELElBQUk7QUFDakUsNkRBQTZELElBQUk7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBLFFBQVEsa0RBQUk7QUFDWjtBQUNBO0FBQ0EsU0FBUzs7O0FBR1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUMsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFJQyIsImZpbGUiOiIuL3NyYy9qcy9kcmFnQm94LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICBkcmFnLFxuICAgIF8kXG59IGZyb20gJy4vdXRpbCc7XG5jbGFzcyBEcmFnQm94IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIC8vIOm7mOiupOmFjee9ruWPguaVsFxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIC8vIOW+hee8lui+keWbvueJh+WFg+e0oFxuICAgICAgICAgICAgZWxlOiAnJyxcbiAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICAgIG1hcmtUZXh0OiAncHJvZHVjdHRlc3QuZW4ubWFkZS1pbi1jaGluYS5jb20nLFxuICAgICAgICAgICAgLy8g5piv5ZCm5pyJ5piO5pqX5pWI5p6c77yM5Li76KaB5piv6KOB5Ymq5Zu+54mH5pWI5p6cXG4gICAgICAgICAgICBoYXNMaWdodDogZmFsc2UsXG4gICAgICAgICAgICBmaXhSYXRpbzogZmFsc2UsXG4gICAgICAgICAgICAvLyDmi5bliqjop6bngrnlm57osIPlh73mlbBcbiAgICAgICAgICAgIG9uRHJhZ1BvaW50OiAoYm94RGF0YSkgPT4ge30sXG4gICAgICAgICAgICBvbkRyYWdDb21wbGV0ZTogKCkgPT4ge31cbiAgICAgICAgfTtcblxuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmVsZSA9IG9wdGlvbnMuZWxlO1xuICAgICAgICB0aGlzLndpZHRoID0gb3B0aW9ucy53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBvcHRpb25zLmhlaWdodDtcbiAgICAgICAgdGhpcy5tYXJrVGV4dCA9IG9wdGlvbnMubWFya1RleHQ7XG4gICAgICAgIHRoaXMuaGFzTGlnaHQgPSBvcHRpb25zLmhhc0xpZ2h0O1xuICAgICAgICB0aGlzLmZpeFJhdGlvID0gb3B0aW9ucy5maXhSYXRpbztcbiAgICAgICAgdGhpcy5vbkRyYWdQb2ludCA9IG9wdGlvbnMub25EcmFnUG9pbnQ7XG4gICAgICAgIHRoaXMub25EcmFnQ29tcGxldGUgPSBvcHRpb25zLm9uRHJhZ0NvbXBsZXRlO1xuXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLiRlbGUgPSAkKHRoaXMuZWxlKTtcbiAgICAgICAgbGV0IHNyYyA9IHRoaXMuJGVsZS5hdHRyKCdzcmMnKTtcbiAgICAgICAgbGV0ICRwYXJlbnQgPSB0aGlzLiRlbGUucGFyZW50KCk7XG5cbiAgICAgICAgbGV0IGRyYWdCb3hIdG1sID0gYDxkaXYgY2xhc3M9XCJkcmFnYm94LXdyYXBwZXIgSi1kcmFnYm94LXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cIkotc291cmNlXCIgc3JjPVwiJHtzcmN9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLWJveCBKLWRyYWctYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1wb2ludCB1cC1sZWZ0IEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgdXAgSi1kcmFnLXBvaW50XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1wb2ludCB1cC1yaWdodCBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLXBvaW50IHJpZ2h0IEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgcmlnaHQtZG93biBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLXBvaW50IGRvd24gSi1kcmFnLXBvaW50XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1wb2ludCBsZWZ0LWRvd24gSi1kcmFnLXBvaW50XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1wb2ludCBsZWZ0IEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1hcmstdHh0IEotbWFyay10eHRcIj4ke3RoaXMubWFya1RleHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7XG4gICAgICAgIGlmICh0aGlzLmhhc0xpZ2h0KSB7XG4gICAgICAgICAgICBkcmFnQm94SHRtbCA9IGA8ZGl2IGNsYXNzPVwiZHJhZ2JveC13cmFwcGVyIEotZHJhZ2JveC13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJKLXNvdXJjZVwiIHNyYz1cIiR7c3JjfVwiIGlkPVwiaW1nMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiSi1zb3VyY2VcIiBzcmM9XCIke3NyY31cIiBpZD1cImltZzJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctYm94IEotZHJhZy1ib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLXBvaW50IHVwLWxlZnQgSi1kcmFnLXBvaW50XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1wb2ludCB1cCBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLXBvaW50IHVwLXJpZ2h0IEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgcmlnaHQgSi1kcmFnLXBvaW50XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1wb2ludCByaWdodC1kb3duIEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgZG93biBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLXBvaW50IGxlZnQtZG93biBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLXBvaW50IGxlZnQgSi1kcmFnLXBvaW50XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7XG4gICAgICAgIH1cblxuICAgICAgICAkcGFyZW50Lmh0bWwoZHJhZ0JveEh0bWwpO1xuICAgICAgICB0aGlzLiRkcmFnQm94ID0gJHBhcmVudC5maW5kKCcuSi1kcmFnLWJveCcpO1xuICAgICAgICB0aGlzLiRkcmFnQm94LmNzcyh7XG4gICAgICAgICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHRcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuJGRyYWdQb2ludCA9IHRoaXMuJGRyYWdCb3guZmluZCgnLkotZHJhZy1wb2ludCcpO1xuXG5cbiAgICAgICAgdGhpcy5ib3hFbCA9IHRoaXMuJGRyYWdCb3guZ2V0KDApO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsID0gdGhpcy5ib3hFbC5wYXJlbnROb2RlO1xuXG4gICAgICAgIHRoaXMuYm94RGF0YSA9IHtcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMuYm94RWwub2Zmc2V0TGVmdCxcbiAgICAgICAgICAgIHRvcDogdGhpcy5ib3hFbC5vZmZzZXRUb3AsXG4gICAgICAgICAgICB3aWR0aDogdGhpcy5ib3hFbC5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5ib3hFbC5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICByYXRpbzogdGhpcy5ib3hFbC5vZmZzZXRXaWR0aCAvIHRoaXMuYm94RWwub2Zmc2V0SGVpZ2h0XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fYmluZCgpO1xuXG5cbiAgICAgICAgZHJhZyh0aGlzLmJveEVsLCB0aGlzLmJveEVsLCB0aGlzLmJveEVsLnBhcmVudE5vZGUsIChsZWZ0LCB0b3ApID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2xpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLm9uRHJhZ0NvbXBsZXRlKGxlZnQsIHRvcCk7XG4gICAgICAgIH0pO1xuXG5cbiAgICB9XG4gICAgX2JpbmQoKSB7XG4gICAgICAgIGxldCBpc0RyYWdpbmcgPSBmYWxzZTtcbiAgICAgICAgbGV0IGNvbnRhY3QgPSBcIlwiOyAvL+ihqOekuuiiq+aMieS4i+eahOinpueCuVxuICAgICAgICBjb25zdCBEUkFHUE9JTlQgPSBbJ3VwLWxlZnQnLCAndXAnLCAndXAtcmlnaHQnLCAncmlnaHQnLCAncmlnaHQtZG93bicsICdkb3duJywgJ2xlZnQtZG93bicsICdsZWZ0J107XG4gICAgICAgIGxldCBkcmFnQm94UmF0aW8gPSB0aGlzLmJveERhdGEud2lkdGggLyB0aGlzLmJveERhdGEuaGVpZ2h0O1xuICAgICAgICAvL+m8oOagh+aMieS4i+aXtlxuICAgICAgICB0aGlzLiRkcmFnUG9pbnQub24oJ21vdXNlZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgaXNEcmFnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBpbmRleCA9ICQoZS50YXJnZXQpLmluZGV4KCk7XG4gICAgICAgICAgICBjb250YWN0ID0gRFJBR1BPSU5UW2luZGV4XTtcbiAgICAgICAgICAgIGRyYWdCb3hSYXRpbyA9IHRoaXMuYm94RGF0YS53aWR0aCAvIHRoaXMuYm94RGF0YS5oZWlnaHQ7XG4gICAgICAgIH0pXG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNldXAnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaXNEcmFnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmJveERhdGEgPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogdGhpcy5ib3hFbC5vZmZzZXRMZWZ0LFxuICAgICAgICAgICAgICAgIHRvcDogdGhpcy5ib3hFbC5vZmZzZXRUb3AsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuYm94RWwub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmJveEVsLm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgICAgICByYXRpbzogdGhpcy5ib3hFbC5vZmZzZXRXaWR0aCAvIHRoaXMuYm94RWwub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2Vtb3ZlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0RyYWdpbmcgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmUoZSwgY29udGFjdCwgZHJhZ0JveFJhdGlvKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9saWdodCgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5ib3hEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLmJveEVsLm9mZnNldExlZnQsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogdGhpcy5ib3hFbC5vZmZzZXRUb3AsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmJveEVsLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuYm94RWwub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICByYXRpbzogdGhpcy5ib3hFbC5vZmZzZXRXaWR0aCAvIHRoaXMuYm94RWwub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMub25EcmFnUG9pbnQodGhpcy5ib3hEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIC8v6I635Y+W5YWD57Sg55u45a+55LqO5bGP5bmV5bem6L655Y+K5LiK6L6555qE6Led56a777yM5Yip55Sob2Zmc2V0TGVmdFxuICAgIF9nZXRQb3NpdGlvbigpIHtcbiAgICAgICAgbGV0IGVsID0gdGhpcy5ib3hFbDtcbiAgICAgICAgbGV0IGxlZnQgPSBlbC5vZmZzZXRMZWZ0O1xuICAgICAgICBsZXQgdG9wID0gZWwub2Zmc2V0VG9wO1xuICAgICAgICBsZXQgcGFyZW50ID0gZWwub2Zmc2V0UGFyZW50O1xuICAgICAgICB3aGlsZSAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gcGFyZW50Lm9mZnNldExlZnQ7XG4gICAgICAgICAgICB0b3AgKz0gcGFyZW50Lm9mZnNldFRvcDtcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5vZmZzZXRQYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwibGVmdFwiOiBsZWZ0LFxuICAgICAgICAgICAgXCJ0b3BcIjogdG9wXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX21vdmUoZSwgY29udGFjdCwgZHJhZ0JveFJhdGlvKSB7XG5cbiAgICAgICAgbGV0IHggPSBlLmNsaWVudFgsXG4gICAgICAgICAgICB5ID0gZS5jbGllbnRZO1xuICAgICAgICBsZXQgb2xkV2lkdGggPSB0aGlzLmJveEVsLm9mZnNldFdpZHRoOyAvL+mAieWPluahhuWPmOWMluWJjeeahOWuveW6plxuICAgICAgICBsZXQgb2xkSGVpZ2h0ID0gdGhpcy5ib3hFbC5vZmZzZXRIZWlnaHQ7IC8v6YCJ5Y+W5qGG5Y+Y5YyW5YmN55qE6auY5bqmXG4gICAgICAgIGxldCBwb3NpdGlvbiA9IHRoaXMuX2dldFBvc2l0aW9uKCk7XG4gICAgICAgIGxldCB0b3AgPSBwb3NpdGlvbi50b3A7XG4gICAgICAgIGxldCBsZWZ0ID0gcG9zaXRpb24ubGVmdDtcblxuXG4gICAgICAgIGxldCBuZXdXaWR0aDtcbiAgICAgICAgbGV0IG5ld0hlaWdodDtcbiAgICAgICAgbGV0IG5ld0xlZnQ7XG4gICAgICAgIGxldCBuZXdUb3A7XG5cbiAgICAgICAgLy8g57qm5p2f5q+U5L6L77ya5qC55o2u5a695bqm6K6h566X6auY5bqmXG4gICAgICAgIGlmIChjb250YWN0LmluZGV4T2YoJ2xlZnQnKSAhPSAtMSkge1xuICAgICAgICAgICAgbGV0IGFkZFdpZHRoID0gbGVmdCAtIHg7XG4gICAgICAgICAgICBpZiAoYWRkV2lkdGggPj0gMCAmJiB0aGlzLmJveEVsLm9mZnNldExlZnQgPD0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmV3V2lkdGggPSBvbGRXaWR0aCArIGFkZFdpZHRoO1xuICAgICAgICAgICAgbmV3TGVmdCA9IHRoaXMuYm94RWwub2Zmc2V0TGVmdCAtIGFkZFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250YWN0LmluZGV4T2YoJ3JpZ2h0JykgIT0gLTEpIHtcbiAgICAgICAgICAgIGxldCBhZGRXaWR0aCA9IHggLSBsZWZ0IC0gb2xkV2lkdGg7XG4gICAgICAgICAgICBpZiAoYWRkV2lkdGggPj0gMCAmJiAodGhpcy5jb250YWluZXJFbC5jbGllbnRXaWR0aCAtICh0aGlzLmJveEVsLm9mZnNldExlZnQgKyBvbGRXaWR0aCArIGFkZFdpZHRoKSkgPD0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmV3V2lkdGggPSBvbGRXaWR0aCArIGFkZFdpZHRoO1xuICAgICAgICAgICAgbmV3TGVmdCA9IHRoaXMuYm94RWwub2Zmc2V0TGVmdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGFjdC5pbmRleE9mKCd1cCcpICE9IC0xKSB7XG4gICAgICAgICAgICBsZXQgYWRkSGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHRoaXMuZml4UmF0aW8pIHtcbiAgICAgICAgICAgICAgICBuZXdIZWlnaHQgPSBuZXdXaWR0aCAvIGRyYWdCb3hSYXRpbztcbiAgICAgICAgICAgICAgICBhZGRIZWlnaHQgPSBuZXdIZWlnaHQgLSBvbGRIZWlnaHQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFkZEhlaWdodCA9IHRvcCAtIHk7XG4gICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gb2xkSGVpZ2h0ICsgYWRkSGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3VG9wID0gdGhpcy5ib3hFbC5vZmZzZXRUb3AgLSBhZGRIZWlnaHQ7XG5cbiAgICAgICAgICAgIGlmIChhZGRIZWlnaHQgPj0gMCAmJiB0aGlzLmJveEVsLm9mZnNldFRvcCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb250YWN0LmluZGV4T2YoJ2Rvd24nKSAhPSAtMSkge1xuICAgICAgICAgICAgbGV0IGFkZEhlaWdodDtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpeFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gbmV3V2lkdGggLyBkcmFnQm94UmF0aW87XG4gICAgICAgICAgICAgICAgYWRkSGVpZ2h0ID0gbmV3SGVpZ2h0IC0gb2xkSGVpZ2h0O1xuICAgICAgICAgICAgICAgIG5ld1RvcCA9IHRoaXMuYm94RWwub2Zmc2V0VG9wO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRIZWlnaHQgPSB5IC0gdG9wIC0gb2xkSGVpZ2h0O1xuICAgICAgICAgICAgICAgIG5ld0hlaWdodCA9IG9sZEhlaWdodCArIGFkZEhlaWdodDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFkZEhlaWdodCA+PSAwICYmICh0aGlzLmNvbnRhaW5lckVsLmNsaWVudEhlaWdodCAtICh0aGlzLmJveEVsLm9mZnNldFRvcCArIG9sZEhlaWdodCArIGFkZEhlaWdodCkpIDw9IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG5cbiAgICAgICAgdGhpcy5ib3hFbC5zdHlsZS53aWR0aCA9IG5ld1dpZHRoICsgJ3B4JztcbiAgICAgICAgdGhpcy5ib3hFbC5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQgKyAncHgnO1xuICAgICAgICB0aGlzLmJveEVsLnN0eWxlLmxlZnQgPSBuZXdMZWZ0ICsgJ3B4JztcbiAgICAgICAgdGhpcy5ib3hFbC5zdHlsZS50b3AgPSBuZXdUb3AgKyAncHgnO1xuICAgIH1cbiAgICBfbGltaXRlZEZpZWxkKCkge1xuXG4gICAgfVxuICAgIF9saWdodCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzTGlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldENob2ljZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8v6K6+572u6YCJ5Y+W5qGG5Zu+54mH5Yy65Z+f5piO5Lqu5pi+56S6XG4gICAgX3NldENob2ljZSgpIHtcbiAgICAgICAgdmFyIHRvcCA9IHRoaXMuYm94RWwub2Zmc2V0VG9wO1xuICAgICAgICB2YXIgcmlnaHQgPSB0aGlzLmJveEVsLm9mZnNldExlZnQgKyB0aGlzLmJveEVsLm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgYm90dG9tID0gdGhpcy5ib3hFbC5vZmZzZXRUb3AgKyB0aGlzLmJveEVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgdmFyIGxlZnQgPSB0aGlzLmJveEVsLm9mZnNldExlZnQ7XG4gICAgICAgIGltZzIuc3R5bGUuY2xpcCA9IFwicmVjdChcIiArIHRvcCArIFwicHgsXCIgKyByaWdodCArIFwicHgsXCIgKyBib3R0b20gKyBcInB4LFwiICsgbGVmdCArIFwicHgpXCI7XG4gICAgfVxuXG4gICAgdXBkYXRlKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgd2lkdGggJiYgKHRoaXMud2lkdGggPSB3aWR0aCk7XG4gICAgICAgIGhlaWdodCAmJiAodGhpcy5oZWlnaHQgPSBoZWlnaHQpO1xuICAgICAgICB0aGlzLiRkcmFnQm94LmNzcyh7XG4gICAgICAgICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHRcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQge1xuICAgIERyYWdCb3hcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/dragBox.js\n");

/***/ }),

/***/ "./src/js/imgHandler.js":
/*!******************************!*\
  !*** ./src/js/imgHandler.js ***!
  \******************************/
/*! exports provided: ImgHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImgHandler\", function() { return ImgHandler; });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ \"./src/js/util.js\");\n\n\nclass ImgHandler {\n\n    constructor(options) {\n\n        // 默认配置参数\n        let defaults = {\n            // 源图片元素\n            sourceImg: null,\n\n            rotateNum: 0,\n\n            // 裁剪后图片最大值KB\n            maxSize: 500,\n            cropW: '',\n            cropH: '',\n\n            // 裁剪后的图片类型\n            mime: 'image/jpeg',\n\n            // 水印相关参数，若watermarkImg存在则用图片水印，否则用文字水印。\n            // 是否添加水印\n            hasMark: true,\n            textAlign: 'left',\n            // 水印字体，值同css的font\n            markFont: '16px microsoft yahei',\n            // 水印字样式，可选值：color,gradient,pattern\n            markStyle: '#fff',\n            // 水印字文本\n            markText: 'UED',\n            // 水印字x轴位置\n            markX: 0,\n            // 水印字y轴位置\n            markY: 0\n\n        };\n\n\n        options = Object.assign({}, defaults, options);\n\n        this.sourceImg = options.sourceImg;\n        this.rotateNum = options.rotateNum;\n        this.maxSize = options.maxSize;\n        this.cropW = options.cropW;\n        this.cropH = options.cropH;\n\n        this.mime = options.mime;\n\n        this.hasMark = options.hasMark;\n        this.textAlign = options.textAlign;\n        this.markFont = options.markFont;\n        this.markStyle = options.markStyle;\n        this.markText = options.markText;\n        this.markX = options.markX;\n        this.markY = options.markY;\n\n\n        // 全局变量\n        this.sx = 0;\n        this.sy = 0;\n\n        this.scaleRatio = 0.5;\n        this.quality = 0.2;\n\n        this.results = [];\n\n        this.init();\n\n    }\n\n\n\n\n    init() {\n        let targetImg = this.sourceImg;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        if (targetImg.nodeName.toLowerCase() === 'img') {\n            sourceW0 = targetImg.naturalWidth;\n            sourceH0 = targetImg.naturalHeight;\n            // img装成canvas\n            let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(sourceW0, sourceH0);\n            let ctx = canvas.getContext('2d');\n            ctx.drawImage(targetImg, 0, 0);\n            targetImg = canvas;\n        }\n\n        this.result = targetImg;\n        this.results.push(this.result);\n\n    }\n\n    // 重置\n    reset() {\n        this.rotateNum = 0;\n        this.scaleRatio = 1;\n        this.results = this.results.slice(0, 1);\n    }\n    // 回退\n    rollback() {\n        this.results.pop();\n    }\n    // 旋转\n    rotate() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n\n        let rotateDeg = this.rotateNum * 90;\n\n        let max = Math.max(sourceW0, sourceH0);\n        let tempCvs = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(max, max),\n            tempCtx = tempCvs.getContext('2d');\n\n        tempCtx.translate(max / 2, max / 2);\n        tempCtx.rotate(rotateDeg * Math.PI / 180);\n        tempCtx.translate(-max / 2, -max / 2);\n        tempCtx.drawImage(targetImg, 0, 0);\n\n\n        let w = sourceW0,\n            h = sourceH0,\n            sx = 0,\n            sy = 0;\n        if (this.rotateNum === 1) {\n            w = sourceH0;\n            h = sourceW0;\n            sx = max - w;\n            sy = 0;\n\n        } else if (this.rotateNum === 2) {\n            w = sourceW0;\n            h = sourceH0;\n            sx = max - w;\n            sy = max - h;\n        } else if (this.rotateNum === 3) {\n            w = sourceH0;\n            h = sourceW0;\n            sx = 0;\n            sy = max - h;\n        } else {\n            w = sourceW0;\n            h = sourceH0;\n            sx = 0;\n            sy = 0;\n        }\n\n        let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(w, h),\n            context = canvas.getContext('2d');\n\n        context.drawImage(tempCvs, sx, sy, w, h, 0, 0, w, h);\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n\n    // 水印\n    mark() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(sourceW0, sourceH0);\n        let dContext = canvas.getContext('2d');\n        dContext.drawImage(targetImg, 0, 0);\n        if (this.hasMark) {\n            dContext.textBaseline = \"top\";\n            dContext.textAlign = this.textAlign;\n            dContext.font = this.markFont;\n            dContext.fillStyle = this.markStyle;\n            dContext.fillText(this.markText, this.markX, this.markY);\n\n        }\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n\n    // 裁剪\n    crop() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(this.cropW, this.cropH);\n        let context = canvas.getContext('2d');\n        context.drawImage(targetImg, this.sx, this.sy, this.cropW, this.cropH, 0, 0, this.cropW, this.cropH);\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n    // 缩放\n    scale() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let resultW = this.scaleRatio * sourceW0;\n        let resultH = this.scaleRatio * sourceH0;\n\n        let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(resultW, resultH);\n        let context = canvas.getContext('2d');\n        context.drawImage(targetImg, 0, 0, sourceW0, sourceH0, 0, 0, resultW, resultH);\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n    // 压缩\n    compress() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(sourceW0, sourceH0);\n        let ctx = canvas.getContext(\"2d\");\n\n        if (this.cropW && this.cropH) {\n            ctx.drawImage(targetImg, 0, 0, this.cropW, this.cropH);\n        } else {\n            ctx.drawImage(targetImg, 0, 0);\n        }\n        this.base64Data = canvas.toDataURL(this.mime, this.quality);\n\n        return this.base64Data;\n    }\n\n}\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvaW1nSGFuZGxlci5qcz9lY2VhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUVnQjs7QUFFaEI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQSxrQ0FBa0M7O0FBRWxDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVEQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBLHNCQUFzQix1REFBUztBQUMvQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQix1REFBUztBQUM5Qjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLHVEQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQix1REFBUztBQUM5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEscUJBQXFCLHVEQUFTO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLHVEQUFTO0FBQzlCOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7OztBQUdtQiIsImZpbGUiOiIuL3NyYy9qcy9pbWdIYW5kbGVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICBnZXRDYW52YXMsXG59IGZyb20gJy4vdXRpbCc7XG5cbmNsYXNzIEltZ0hhbmRsZXIge1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuXG4gICAgICAgIC8vIOm7mOiupOmFjee9ruWPguaVsFxuICAgICAgICBsZXQgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAvLyDmupDlm77niYflhYPntKBcbiAgICAgICAgICAgIHNvdXJjZUltZzogbnVsbCxcblxuICAgICAgICAgICAgcm90YXRlTnVtOiAwLFxuXG4gICAgICAgICAgICAvLyDoo4HliarlkI7lm77niYfmnIDlpKflgLxLQlxuICAgICAgICAgICAgbWF4U2l6ZTogNTAwLFxuICAgICAgICAgICAgY3JvcFc6ICcnLFxuICAgICAgICAgICAgY3JvcEg6ICcnLFxuXG4gICAgICAgICAgICAvLyDoo4HliarlkI7nmoTlm77niYfnsbvlnotcbiAgICAgICAgICAgIG1pbWU6ICdpbWFnZS9qcGVnJyxcblxuICAgICAgICAgICAgLy8g5rC05Y2w55u45YWz5Y+C5pWw77yM6Iuld2F0ZXJtYXJrSW1n5a2Y5Zyo5YiZ55So5Zu+54mH5rC05Y2w77yM5ZCm5YiZ55So5paH5a2X5rC05Y2w44CCXG4gICAgICAgICAgICAvLyDmmK/lkKbmt7vliqDmsLTljbBcbiAgICAgICAgICAgIGhhc01hcms6IHRydWUsXG4gICAgICAgICAgICB0ZXh0QWxpZ246ICdsZWZ0JyxcbiAgICAgICAgICAgIC8vIOawtOWNsOWtl+S9k++8jOWAvOWQjGNzc+eahGZvbnRcbiAgICAgICAgICAgIG1hcmtGb250OiAnMTZweCBtaWNyb3NvZnQgeWFoZWknLFxuICAgICAgICAgICAgLy8g5rC05Y2w5a2X5qC35byP77yM5Y+v6YCJ5YC877yaY29sb3IsZ3JhZGllbnQscGF0dGVyblxuICAgICAgICAgICAgbWFya1N0eWxlOiAnI2ZmZicsXG4gICAgICAgICAgICAvLyDmsLTljbDlrZfmlofmnKxcbiAgICAgICAgICAgIG1hcmtUZXh0OiAnVUVEJyxcbiAgICAgICAgICAgIC8vIOawtOWNsOWtl3jovbTkvY3nva5cbiAgICAgICAgICAgIG1hcmtYOiAwLFxuICAgICAgICAgICAgLy8g5rC05Y2w5a2Xeei9tOS9jee9rlxuICAgICAgICAgICAgbWFya1k6IDBcblxuICAgICAgICB9O1xuXG5cbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLnNvdXJjZUltZyA9IG9wdGlvbnMuc291cmNlSW1nO1xuICAgICAgICB0aGlzLnJvdGF0ZU51bSA9IG9wdGlvbnMucm90YXRlTnVtO1xuICAgICAgICB0aGlzLm1heFNpemUgPSBvcHRpb25zLm1heFNpemU7XG4gICAgICAgIHRoaXMuY3JvcFcgPSBvcHRpb25zLmNyb3BXO1xuICAgICAgICB0aGlzLmNyb3BIID0gb3B0aW9ucy5jcm9wSDtcblxuICAgICAgICB0aGlzLm1pbWUgPSBvcHRpb25zLm1pbWU7XG5cbiAgICAgICAgdGhpcy5oYXNNYXJrID0gb3B0aW9ucy5oYXNNYXJrO1xuICAgICAgICB0aGlzLnRleHRBbGlnbiA9IG9wdGlvbnMudGV4dEFsaWduO1xuICAgICAgICB0aGlzLm1hcmtGb250ID0gb3B0aW9ucy5tYXJrRm9udDtcbiAgICAgICAgdGhpcy5tYXJrU3R5bGUgPSBvcHRpb25zLm1hcmtTdHlsZTtcbiAgICAgICAgdGhpcy5tYXJrVGV4dCA9IG9wdGlvbnMubWFya1RleHQ7XG4gICAgICAgIHRoaXMubWFya1ggPSBvcHRpb25zLm1hcmtYO1xuICAgICAgICB0aGlzLm1hcmtZID0gb3B0aW9ucy5tYXJrWTtcblxuXG4gICAgICAgIC8vIOWFqOWxgOWPmOmHj1xuICAgICAgICB0aGlzLnN4ID0gMDtcbiAgICAgICAgdGhpcy5zeSA9IDA7XG5cbiAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gMC41O1xuICAgICAgICB0aGlzLnF1YWxpdHkgPSAwLjI7XG5cbiAgICAgICAgdGhpcy5yZXN1bHRzID0gW107XG5cbiAgICAgICAgdGhpcy5pbml0KCk7XG5cbiAgICB9XG5cblxuXG5cbiAgICBpbml0KCkge1xuICAgICAgICBsZXQgdGFyZ2V0SW1nID0gdGhpcy5zb3VyY2VJbWc7XG4gICAgICAgIGxldCBzb3VyY2VXMCA9IHRhcmdldEltZy53aWR0aDtcbiAgICAgICAgbGV0IHNvdXJjZUgwID0gdGFyZ2V0SW1nLmhlaWdodDtcblxuICAgICAgICBpZiAodGFyZ2V0SW1nLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbWcnKSB7XG4gICAgICAgICAgICBzb3VyY2VXMCA9IHRhcmdldEltZy5uYXR1cmFsV2lkdGg7XG4gICAgICAgICAgICBzb3VyY2VIMCA9IHRhcmdldEltZy5uYXR1cmFsSGVpZ2h0O1xuICAgICAgICAgICAgLy8gaW1n6KOF5oiQY2FudmFzXG4gICAgICAgICAgICBsZXQgY2FudmFzID0gZ2V0Q2FudmFzKHNvdXJjZVcwLCBzb3VyY2VIMCk7XG4gICAgICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRhcmdldEltZywgMCwgMCk7XG4gICAgICAgICAgICB0YXJnZXRJbWcgPSBjYW52YXM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc3VsdCA9IHRhcmdldEltZztcbiAgICAgICAgdGhpcy5yZXN1bHRzLnB1c2godGhpcy5yZXN1bHQpO1xuXG4gICAgfVxuXG4gICAgLy8g6YeN572uXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMucm90YXRlTnVtID0gMDtcbiAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gMTtcbiAgICAgICAgdGhpcy5yZXN1bHRzID0gdGhpcy5yZXN1bHRzLnNsaWNlKDAsIDEpO1xuICAgIH1cbiAgICAvLyDlm57pgIBcbiAgICByb2xsYmFjaygpIHtcbiAgICAgICAgdGhpcy5yZXN1bHRzLnBvcCgpO1xuICAgIH1cbiAgICAvLyDml4vovaxcbiAgICByb3RhdGUoKSB7XG4gICAgICAgIGxldCB0YXJnZXRJbWcgPSB0aGlzLnJlc3VsdDtcbiAgICAgICAgbGV0IHNvdXJjZVcwID0gdGFyZ2V0SW1nLndpZHRoO1xuICAgICAgICBsZXQgc291cmNlSDAgPSB0YXJnZXRJbWcuaGVpZ2h0O1xuXG5cbiAgICAgICAgbGV0IHJvdGF0ZURlZyA9IHRoaXMucm90YXRlTnVtICogOTA7XG5cbiAgICAgICAgbGV0IG1heCA9IE1hdGgubWF4KHNvdXJjZVcwLCBzb3VyY2VIMCk7XG4gICAgICAgIGxldCB0ZW1wQ3ZzID0gZ2V0Q2FudmFzKG1heCwgbWF4KSxcbiAgICAgICAgICAgIHRlbXBDdHggPSB0ZW1wQ3ZzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgdGVtcEN0eC50cmFuc2xhdGUobWF4IC8gMiwgbWF4IC8gMik7XG4gICAgICAgIHRlbXBDdHgucm90YXRlKHJvdGF0ZURlZyAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICB0ZW1wQ3R4LnRyYW5zbGF0ZSgtbWF4IC8gMiwgLW1heCAvIDIpO1xuICAgICAgICB0ZW1wQ3R4LmRyYXdJbWFnZSh0YXJnZXRJbWcsIDAsIDApO1xuXG5cbiAgICAgICAgbGV0IHcgPSBzb3VyY2VXMCxcbiAgICAgICAgICAgIGggPSBzb3VyY2VIMCxcbiAgICAgICAgICAgIHN4ID0gMCxcbiAgICAgICAgICAgIHN5ID0gMDtcbiAgICAgICAgaWYgKHRoaXMucm90YXRlTnVtID09PSAxKSB7XG4gICAgICAgICAgICB3ID0gc291cmNlSDA7XG4gICAgICAgICAgICBoID0gc291cmNlVzA7XG4gICAgICAgICAgICBzeCA9IG1heCAtIHc7XG4gICAgICAgICAgICBzeSA9IDA7XG5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJvdGF0ZU51bSA9PT0gMikge1xuICAgICAgICAgICAgdyA9IHNvdXJjZVcwO1xuICAgICAgICAgICAgaCA9IHNvdXJjZUgwO1xuICAgICAgICAgICAgc3ggPSBtYXggLSB3O1xuICAgICAgICAgICAgc3kgPSBtYXggLSBoO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucm90YXRlTnVtID09PSAzKSB7XG4gICAgICAgICAgICB3ID0gc291cmNlSDA7XG4gICAgICAgICAgICBoID0gc291cmNlVzA7XG4gICAgICAgICAgICBzeCA9IDA7XG4gICAgICAgICAgICBzeSA9IG1heCAtIGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3ID0gc291cmNlVzA7XG4gICAgICAgICAgICBoID0gc291cmNlSDA7XG4gICAgICAgICAgICBzeCA9IDA7XG4gICAgICAgICAgICBzeSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2FudmFzID0gZ2V0Q2FudmFzKHcsIGgpLFxuICAgICAgICAgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHRlbXBDdnMsIHN4LCBzeSwgdywgaCwgMCwgMCwgdywgaCk7XG5cbiAgICAgICAgLy8gdGhpcy5iYXNlNjREYXRhID0gY2FudmFzLnRvRGF0YVVSTCh0aGlzLm1pbWUpO1xuICAgICAgICB0aGlzLnJlc3VsdCA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5yZXN1bHRzLnB1c2goY2FudmFzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8g5rC05Y2wXG4gICAgbWFyaygpIHtcbiAgICAgICAgbGV0IHRhcmdldEltZyA9IHRoaXMucmVzdWx0O1xuICAgICAgICBsZXQgc291cmNlVzAgPSB0YXJnZXRJbWcud2lkdGg7XG4gICAgICAgIGxldCBzb3VyY2VIMCA9IHRhcmdldEltZy5oZWlnaHQ7XG5cbiAgICAgICAgbGV0IGNhbnZhcyA9IGdldENhbnZhcyhzb3VyY2VXMCwgc291cmNlSDApO1xuICAgICAgICBsZXQgZENvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgZENvbnRleHQuZHJhd0ltYWdlKHRhcmdldEltZywgMCwgMCk7XG4gICAgICAgIGlmICh0aGlzLmhhc01hcmspIHtcbiAgICAgICAgICAgIGRDb250ZXh0LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XG4gICAgICAgICAgICBkQ29udGV4dC50ZXh0QWxpZ24gPSB0aGlzLnRleHRBbGlnbjtcbiAgICAgICAgICAgIGRDb250ZXh0LmZvbnQgPSB0aGlzLm1hcmtGb250O1xuICAgICAgICAgICAgZENvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5tYXJrU3R5bGU7XG4gICAgICAgICAgICBkQ29udGV4dC5maWxsVGV4dCh0aGlzLm1hcmtUZXh0LCB0aGlzLm1hcmtYLCB0aGlzLm1hcmtZKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhpcy5iYXNlNjREYXRhID0gY2FudmFzLnRvRGF0YVVSTCh0aGlzLm1pbWUpO1xuICAgICAgICB0aGlzLnJlc3VsdCA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5yZXN1bHRzLnB1c2goY2FudmFzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8g6KOB5YmqXG4gICAgY3JvcCgpIHtcbiAgICAgICAgbGV0IHRhcmdldEltZyA9IHRoaXMucmVzdWx0O1xuICAgICAgICBsZXQgc291cmNlVzAgPSB0YXJnZXRJbWcud2lkdGg7XG4gICAgICAgIGxldCBzb3VyY2VIMCA9IHRhcmdldEltZy5oZWlnaHQ7XG5cbiAgICAgICAgbGV0IGNhbnZhcyA9IGdldENhbnZhcyh0aGlzLmNyb3BXLCB0aGlzLmNyb3BIKTtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodGFyZ2V0SW1nLCB0aGlzLnN4LCB0aGlzLnN5LCB0aGlzLmNyb3BXLCB0aGlzLmNyb3BILCAwLCAwLCB0aGlzLmNyb3BXLCB0aGlzLmNyb3BIKTtcblxuICAgICAgICAvLyB0aGlzLmJhc2U2NERhdGEgPSBjYW52YXMudG9EYXRhVVJMKHRoaXMubWltZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gY2FudmFzO1xuICAgICAgICB0aGlzLnJlc3VsdHMucHVzaChjYW52YXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8g57yp5pS+XG4gICAgc2NhbGUoKSB7XG4gICAgICAgIGxldCB0YXJnZXRJbWcgPSB0aGlzLnJlc3VsdDtcbiAgICAgICAgbGV0IHNvdXJjZVcwID0gdGFyZ2V0SW1nLndpZHRoO1xuICAgICAgICBsZXQgc291cmNlSDAgPSB0YXJnZXRJbWcuaGVpZ2h0O1xuXG4gICAgICAgIGxldCByZXN1bHRXID0gdGhpcy5zY2FsZVJhdGlvICogc291cmNlVzA7XG4gICAgICAgIGxldCByZXN1bHRIID0gdGhpcy5zY2FsZVJhdGlvICogc291cmNlSDA7XG5cbiAgICAgICAgbGV0IGNhbnZhcyA9IGdldENhbnZhcyhyZXN1bHRXLCByZXN1bHRIKTtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodGFyZ2V0SW1nLCAwLCAwLCBzb3VyY2VXMCwgc291cmNlSDAsIDAsIDAsIHJlc3VsdFcsIHJlc3VsdEgpO1xuXG4gICAgICAgIC8vIHRoaXMuYmFzZTY0RGF0YSA9IGNhbnZhcy50b0RhdGFVUkwodGhpcy5taW1lKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSBjYW52YXM7XG4gICAgICAgIHRoaXMucmVzdWx0cy5wdXNoKGNhbnZhcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyDljovnvKlcbiAgICBjb21wcmVzcygpIHtcbiAgICAgICAgbGV0IHRhcmdldEltZyA9IHRoaXMucmVzdWx0O1xuICAgICAgICBsZXQgc291cmNlVzAgPSB0YXJnZXRJbWcud2lkdGg7XG4gICAgICAgIGxldCBzb3VyY2VIMCA9IHRhcmdldEltZy5oZWlnaHQ7XG5cbiAgICAgICAgbGV0IGNhbnZhcyA9IGdldENhbnZhcyhzb3VyY2VXMCwgc291cmNlSDApO1xuICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgICAgICBpZiAodGhpcy5jcm9wVyAmJiB0aGlzLmNyb3BIKSB7XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRhcmdldEltZywgMCwgMCwgdGhpcy5jcm9wVywgdGhpcy5jcm9wSCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRhcmdldEltZywgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYXNlNjREYXRhID0gY2FudmFzLnRvRGF0YVVSTCh0aGlzLm1pbWUsIHRoaXMucXVhbGl0eSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZTY0RGF0YTtcbiAgICB9XG5cbn1cblxuXG5leHBvcnQge0ltZ0hhbmRsZXJ9XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/imgHandler.js\n");

/***/ }),

/***/ "./src/js/pipeImg.js":
/*!***************************!*\
  !*** ./src/js/pipeImg.js ***!
  \***************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ \"./src/js/util.js\");\n/* harmony import */ var _imgHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./imgHandler */ \"./src/js/imgHandler.js\");\n/* harmony import */ var _dragBox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dragBox */ \"./src/js/dragBox.js\");\n/* harmony import */ var _pipeImg_tpl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pipeImg.tpl */ \"./src/js/pipeImg.tpl\");\n/* harmony import */ var _pipeImg_tpl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_pipeImg_tpl__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\nclass PipeImg {\n\n    constructor(options) {\n\n        // 默认配置参数\n        let defaults = {\n            source: ['./assets/Jellyfish.jpg'],\n            mime: 'image/jpeg',\n            maxSize: 500,\n            template: _pipeImg_tpl__WEBPACK_IMPORTED_MODULE_3___default.a\n        };\n\n\n        options = Object.assign({}, defaults, options);\n        this.source = options.source;\n        this.mime = options.mime;\n        this.maxSize = options.maxSize;\n        this.template = options.template;\n\n\n\n        this._init();\n\n    }\n\n    _init() {\n        let html = '<div class=\"pipe-dialog J-pipe-dialog\"><div class=\"pipe-mask J-pipe-mask\"></div>'+ this. template +'</div>';\n        $('body').append(html);\n        \n        this.$el = $('.J-pipe-dialog');\n        this.$pipeWrapper = this.$el.find('.J-pipe-wrapper');\n\n        // 全局变量\n        this.rotateNum = 0;\n        this.scaleRatio = 1;\n\n        this.resultList = [];\n\n        this.imgList = [];\n\n        this.imgBoxHeight = this.$el.find('.J-img-box').height();\n        this.imgBoxWidth = this.$el.find('.J-img-box').width();\n        this.imgBoxRatio = this.imgBoxWidth / this.imgBoxHeight;\n\n\n        Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"loadImages\"])(this.source, (images) => {\n            this._loadImagesSuccess(images);\n\n        })\n\n    }\n    _loadImagesSuccess(images) {\n        // 初始化底部缩略图\n        let imgsHtml = '';\n        // 为了显示顺序与配置一致\n        this.imgList = images.reverse();\n        $(this.imgList).each((index, element) => {\n            let thumbnailHtml = '<a class=\"img-thumbnail ' + (index === 0 ? 'active' : '') + ' J-img-thumbnail\" href=\"javascript:void(0)\">' +\n                '<img src=\"' + element.src + '\">' +\n                '</a>';\n            imgsHtml += thumbnailHtml;\n\n        });\n        this.$el.find('.J-imgs-thumbnail').html(imgsHtml);\n\n        // 待编辑图片\n        this.imgHandler = new _imgHandler__WEBPACK_IMPORTED_MODULE_1__[\"ImgHandler\"]({\n            sourceImg: images[0]\n        });\n\n        this.resultList.push(this.imgHandler.result);\n\n        this._refresh();\n\n        // 初始化裁剪框\n        this.cropBox = new _dragBox__WEBPACK_IMPORTED_MODULE_2__[\"DragBox\"]({\n            ele: '.J-crop-box .J-source',\n            hasLight: true,\n            onDragPoint: (data) => {\n                this._showSize(data.width * this.activeData.ratio, data.height * this.activeData.ratio);\n            }\n        });\n        // 初始化水印框\n        this.markBox = new _dragBox__WEBPACK_IMPORTED_MODULE_2__[\"DragBox\"]({\n            ele: '.J-mark-box .J-source',\n            width: 340,\n            height: 35,\n            markText: 'producttest.en.made-in-china.com',\n            onDragComplete: (left, top) => {\n                this.markX = left * this.activeData.ratio;\n                this.markY = top * this.activeData.ratio;\n            }\n        });\n        // 初始化批量水印框\n        this.markAllBox = new _dragBox__WEBPACK_IMPORTED_MODULE_2__[\"DragBox\"]({\n            ele: '.J-mark-box-all .J-source',\n            width: 340,\n            height: 35,\n            markText: 'producttest.en.made-in-china.com',\n            onDragComplete: (left, top) => {\n                this.markXAll = left * this.activeData.ratio;\n                this.markYAll = top * this.activeData.ratio;\n            }\n        });\n        // 事件绑定\n        this._bind();\n    }\n\n    _bind() {\n        // 切换编辑图片\n        this.$el.find('.J-imgs-thumbnail').on('click', '.J-img-thumbnail', (e) => {\n\n            let $thumbnail = $(e.target).parent();\n            $thumbnail.addClass('active').siblings().removeClass('active');\n\n            this.$el.find('.J-source').attr('src', $thumbnail.find('img').attr('src'));\n            let targetImg = this.$el.find('.J-source:first').get(0);\n\n\n            this.imgHandler = new _imgHandler__WEBPACK_IMPORTED_MODULE_1__[\"ImgHandler\"]({\n                sourceImg: targetImg\n            })\n\n            this.resultList = [this.imgHandler.result];\n\n            this._refresh();\n            // this._initPanel();\n        })\n\n        // 菜单切换\n        this.$el.find('.J-menu-item').on('click', (e) => {\n            let $item = $(e.target).parent();\n            let index = $item.index();\n            let oldActiveIndex = $item.parent().find('.active:first').index();\n            $item.addClass('active').siblings().removeClass('active');\n            this.$el.find('.J-panel').eq(index).addClass('active').siblings().removeClass('active');\n\n            // 离开旋转，裁剪，缩放面板进行保存\n            switch (oldActiveIndex) {\n                case 0:\n                    this._saveRotate();\n                    break;\n                case 1:\n                    this._saveCrop();\n                    break;\n                case 2:\n                    this._saveScale();\n                    break;\n                default:\n                    break;\n            }\n\n            // 进入裁剪\n            if (index === 1) {\n                this._initCrop();\n            }\n            // 进入缩放\n            if (index === 2) {\n                this._initScale();\n            }\n            // 进入水印\n            if (index === 3) {\n                this._initMark();\n            }\n\n            // 进入批量水印\n            if (index === 4) {\n                this._reset();\n                this._initMarkAll();\n            }\n\n        })\n\n\n        // 旋转++++++++++++++++\n        // 逆时针旋转\n        this.$el.find('.J-btn-rotate-left').on('click', () => {\n            this._getRotateNum(-1);\n            this._updateRotate();\n        })\n        // 顺时针旋转\n        this.$el.find('.J-btn-rotate-right').on('click', () => {\n            this._getRotateNum(1);\n            this._updateRotate();\n        })\n        // 裁剪++++++++++++\n        let $cropPanel = this.$el.find('.J-crop-panel');\n        $cropPanel.find('.J-num-width').on('input', (e) => {\n            this.cropBox.width = $(e.target).val() / this.activeData.ratio;\n            if (this.cropBox.fixRatio) {\n                this.cropBox.height = this.cropBox.width / this.cropBox.boxData.ratio;\n            }\n            this._updateCrop();\n        })\n        $cropPanel.find('.J-num-height').on('input', (e) => {\n            this.cropBox.height = $(e.target).val() / this.activeData.ratio;\n            if (this.cropBox.fixRatio) {\n                this.cropBox.width = this.cropBox.height * this.cropBox.boxData.ratio;\n            }\n            this._updateCrop();\n        })\n        $cropPanel.find('.J-fix-ratio').on('change', (e) => {\n            this.cropBox.fixRatio = !this.cropBox.fixRatio;\n        })\n\n        // 缩放++++++++++++++\n        let $scalePanel = this.$el.find('.J-scale-panel');\n        $scalePanel.find('.J-scale-range').on('input', (e) => {\n            let $this = $(e.target);\n            let max = parseInt($this.attr('max'));\n            this.scaleRatio = parseInt($this.val()) / max;\n            this._updateScale();\n        })\n        $scalePanel.find('.J-num-width').on('input', (e) => {\n            let $this = $(e.target);\n            this.scaleRatio = parseInt($this.val()) / this.activeData.w0;\n            this._updateScale();\n        })\n        $scalePanel.find('.J-num-height').on('input', (e) => {\n            let $this = $(e.target);\n            this.scaleRatio = parseInt($this.val()) / this.activeData.h0;\n            this._updateScale();\n        })\n\n        // 水印++++++++++++++\n        let $markPanel = this.$el.find('.J-mark-panel');\n        $markPanel.find('[name=color],[name=opacity]').on('input', () => {\n            this._updateMark();\n        })\n        $markPanel.find('[name=markTxt]').on('change', () => {\n            this._updateMark();\n        })\n        $markPanel.find('[name=position]').on('change', () => {\n            this._updateMark();\n        })\n        // 水印确定\n        $markPanel.find('.J-button-confirm').on('click', () => {\n            this._saveMark();\n        })\n        // 水印取消\n        this.$el.find('.J-button-cancel').on('click', () => {\n            this._goHome();\n        })\n        // 批量水印++++++++++++++\n        let $markAllPanel = this.$el.find('.J-mark-all-panel');\n        $markAllPanel.find('[name=colorAll],[name=opacityAll]').on('input', () => {\n            this._updateMarkAll();\n        })\n        $markAllPanel.find('[name=markTxtAll]').on('change', () => {\n            this._updateMarkAll();\n        })\n        $markAllPanel.find('[name=positionAll]').on('change', () => {\n            this._updateMarkAll();\n        })\n        // 批量水印确定\n        $markAllPanel.find('.J-button-confirm-all').on('click', () => {\n\n            let xPercent = this.markXAll / this.resultList[this.resultList.length - 1].width;\n            let yPercent = this.markYAll / this.resultList[this.resultList.length - 1].height;\n            $(this.imgList).each((index, element) => {\n                let imgHandler = new _imgHandler__WEBPACK_IMPORTED_MODULE_1__[\"ImgHandler\"]({\n                    sourceImg: element\n                });\n                imgHandler.markX = element.width * xPercent;\n                imgHandler.markY = element.height * yPercent;\n\n\n                imgHandler.markText = this.markTextAll;\n                imgHandler.markFont = this.markFontAll;\n                imgHandler.markStyle = this.markStyleAll;\n\n                imgHandler.mark();\n\n                this.save(imgHandler.result);\n            })\n            this.hideDialog();\n        })\n\n        // 重置\n        this.$el.find('.J-button-reset').on('click', () => {\n            this._reset();\n        })\n        // 保存\n        this.$el.find('.J-button-save').on('click', (e) => {\n            let panelIndex = $(e.target).parents('.J-panel').index();\n            switch (panelIndex) {\n                case 0:\n                    this._saveRotate();\n                    break;\n                case 1:\n                    this._saveCrop();\n                    break;\n                case 2:\n                    this._saveScale();\n                default:\n                    break;\n            }\n\n            let activeImg = this.activeData.cvs;\n            let base64Data = activeImg.toDataURL(this.mime, 1.0);\n            let $activeThumbnail = this.$el.find('.J-img-thumbnail.active');\n            // 更新底部缩略图显示\n            $activeThumbnail.find('img').attr('src', base64Data);\n            // 更新全局数据\n            this.resultList = [activeImg];\n            this.imgList[$activeThumbnail.index()] = activeImg;\n\n            this.save(activeImg);\n        })\n        this.$el.find('.J-button-close').on('click', (e) => {\n            this.hideDialog();\n        })\n\n    }\n    _initPanel() {\n        this._initCrop();\n        this._initScale();\n        this._initMark();\n        this._initMarkAll();\n    }\n    _goHome() {\n        this.$el.find('.J-menu-item:first').click();\n    }\n\n    _initRotate() {\n        this.rotateNum = 0;\n    }\n    _updateRotate() {\n\n        this.$el.find('.J-source').css({\n            'transform': `rotate(${this.rotateNum * 90}deg)`\n        });\n\n        if (this.rotateNum === 1 || this.rotateNum === 3) {\n            // 旋转类90度后\n            if (1 / this.activeData.imgRatio < this.imgBoxRatio) {\n                this.$el.find('.J-source').css({\n                    'width': this.imgBoxHeight,\n                    'height': 'auto'\n                });\n            } else {\n                this.$el.find('.J-source').css({\n                    'width': 'auto',\n                    'height': this.imgBoxWidth\n                });\n            }\n\n        } else {\n\n            if (this.activeData.imgRatio < this.imgBoxRatio) {\n                this.$el.find('.J-source').css({\n                    'width': 'auto',\n                    'height': this.imgBoxHeight\n                });\n            } else {\n                this.$el.find('.J-source').css({\n                    'width': this.imgBoxWidth,\n                    'height': 'auto'\n                });\n            }\n        }\n\n    }\n    _saveRotate() {\n        this.imgHandler.rotateNum = this.rotateNum;\n        this.imgHandler.rotate();\n        this.imgHandler.rotateNum = this.rotateNum = 0;\n\n        this.resultList.push(this.imgHandler.result);\n\n        this._refresh();\n\n    }\n    _initCrop() {\n        let $cropPanel = this.$el.find('.J-crop-panel');\n\n        this.cropBox.isFixed = $cropPanel.find('.J-fix-ratio').prop('checked');\n        this.cropBox.width = $cropPanel.find('.J-num-width').val() / this.activeData.ratio;\n        this.cropBox.height = $cropPanel.find('.J-num-height').val() / this.activeData.ratio;\n    }\n    _updateCrop() {\n        this.cropBox.update();\n    }\n    _saveCrop() {\n        this.sx = this.cropBox.boxData.left * this.activeData.ratio;\n        this.sy = this.cropBox.boxData.top * this.activeData.ratio;\n        this.cropW = this.cropBox.boxData.width * this.activeData.ratio;\n        this.cropH = this.cropBox.boxData.height * this.activeData.ratio;\n\n        this.imgHandler.cropW = this.cropW;\n        this.imgHandler.cropH = this.cropH;\n        this.imgHandler.sx = this.sx;\n        this.imgHandler.sy = this.sy;\n        this.imgHandler.crop();\n\n        this.resultList.push(this.imgHandler.result);\n\n        this._refresh();\n    }\n    _initScale() {\n        let $scalePanel = this.$el.find('.J-scale-panel');\n        let $scaleImgBox = $scalePanel.find('.J-img-box');\n        let $scaleRange = $scalePanel.find('.J-scale-range');\n\n        // 去除预览图的缩放显示\n        $scaleImgBox.find('.J-source').css({\n            width: 'auto',\n            height: 'auto'\n        })\n        // 初始化滑块值\n        $scaleRange.val($scaleRange.attr('max'));\n\n        this.scaleRatio = 1;\n    }\n    _updateScale() {\n        let scaleRatio = this.scaleRatio;\n\n        let $scalePanel = this.$el.find('.J-scale-panel');\n        let $scaleRange = $scalePanel.find('.J-scale-range');\n        let $scaleNumWidth = $scalePanel.find('.J-num-width');\n        let $scaleNumHeight = $scalePanel.find('.J-num-height');\n        let max = parseInt($scaleRange.attr('max'));\n\n        if ($scaleNumWidth.val() != this.activeData.w0 * scaleRatio) {\n            $scaleNumWidth.val(this.activeData.w0 * scaleRatio);\n        }\n        if ($scaleNumHeight.val() != this.activeData.h0 * scaleRatio) {\n            $scaleNumHeight.val(this.activeData.h0 * scaleRatio);\n        }\n        if ($scaleRange.val() != max * scaleRatio) {\n            $scaleRange.val(max * scaleRatio);\n        }\n\n\n        $('.J-source').css({\n            'transform': `scale(${this.scaleRatio})`\n        });\n    }\n    _saveScale() {\n        this.imgHandler.scaleRatio = this.scaleRatio;\n        this.imgHandler.scale();\n        this.imgHandler.scaleRatio = this.scaleRatio = 0;\n\n        this.resultList.push(this.imgHandler.result);\n\n        this._refresh();\n\n    }\n    _initMark() {\n        let $markPanel = this.$el.find('.J-mark-panel');\n        $markPanel.find('.J-color').eq(1).prop('checked', true);\n        $markPanel.find('.J-position').eq(0).prop('checked', true);\n        $markPanel.find('.J-opacity').val(0.8);\n        $markPanel.find('.J-markTxt option:first').prop('selected', true);\n\n        this._updateMark();\n    }\n    _updateMark() {\n        const MARKTXT = ['producttest.en.made-in-china.com', 'Focus Service Co - Product Sourcing'];\n        const POSITION = ['center', 'upLeft', 'upRight', 'downLeft', 'downRight'];\n\n        let $markPanel = this.$el.find('.J-mark-panel');\n        let colorVal = $markPanel.find('.J-color:checked').val();\n        let positionVal = $markPanel.find('.J-position:checked').val();\n        let opacityVal = $markPanel.find('.J-opacity').val();\n        let markTxtVal = $markPanel.find('.J-markTxt').val();\n\n        let markStyle = `rgba(255, 255, 255, ${opacityVal})`;\n        if (colorVal === '1') {\n            markStyle = `rgba(0, 0, 0, ${opacityVal})`;\n        }\n\n        this.markFont = 20 * this.activeData.ratio + 'px microsoft yahei';\n        this.markStyle = markStyle;\n        this.markText = MARKTXT[markTxtVal];\n\n        let $dragBoxWrapper = this.markBox.$dragBox.parent();\n        let dragBoxWrapperWidth = $dragBoxWrapper.width();\n        let dragBoxWrapperHeight = $dragBoxWrapper.height();\n        let dragBoxWidth = this.markBox.$dragBox.outerWidth() < dragBoxWrapperWidth ? this.markBox.$dragBox.outerWidth() : dragBoxWrapperWidth;\n        let dragBoxHeight = this.markBox.$dragBox.outerHeight() < dragBoxWrapperHeight ? this.markBox.$dragBox.outerHeight() : dragBoxWrapperHeight;\n\n        switch (POSITION[positionVal]) {\n            case 'center':\n                this.markX = (dragBoxWrapperWidth - dragBoxWidth) / 2 * this.activeData.ratio;\n                this.markY = (dragBoxWrapperHeight - dragBoxHeight) / 2 * this.activeData.ratio;\n                break;\n            case 'upLeft':\n                this.markX = 0;\n                this.markY = 0;\n                break;\n            case 'upRight':\n                this.markX = (dragBoxWrapperWidth - dragBoxWidth) * this.activeData.ratio;\n                this.markY = 0;\n                break;\n            case 'downLeft':\n                this.markX = 0;\n                this.markY = (dragBoxWrapperHeight - dragBoxHeight) * this.activeData.ratio;\n                break;\n            case 'downRight':\n                this.markX = (dragBoxWrapperWidth - dragBoxWidth) * this.activeData.ratio;\n                this.markY = (dragBoxWrapperHeight - dragBoxHeight) * this.activeData.ratio;\n                break;\n            default:\n                break;\n        }\n\n        $markPanel.find('.J-mark-txt').text(this.markText).css({\n            color: this.markStyle\n        });\n        this.markBox.$dragBox.css({\n            left: this.markX / this.activeData.ratio,\n            top: this.markY / this.activeData.ratio,\n            width: dragBoxWidth,\n            height: dragBoxHeight\n        })\n    }\n    _saveMark() {\n        this.imgHandler.markX = this.markX;\n        this.imgHandler.markY = this.markY;\n        this.imgHandler.markText = this.markText;\n        this.imgHandler.markFont = this.markFont;\n        this.imgHandler.markStyle = this.markStyle;\n        this.imgHandler.mark();\n\n        this.resultList.push(this.imgHandler.result);\n\n        this._refresh();\n\n        this._goHome();\n    }\n    _initMarkAll() {\n        let $markPanel = this.$el.find('.J-mark-all-panel');\n        $markPanel.find('.J-color').eq(1).prop('checked', true);\n        $markPanel.find('.J-position').eq(0).prop('checked', true);\n        $markPanel.find('.J-opacity').val(0.8);\n        $markPanel.find('.J-markTxt option:first').prop('selected', true);\n        this._updateMarkAll();\n    }\n    _updateMarkAll() {\n        const MARKTXT = ['producttest.en.made-in-china.com', 'Focus Service Co - Product Sourcing'];\n        const POSITION = ['center', 'upLeft', 'upRight', 'downLeft', 'downRight'];\n\n        let $markPanel = this.$el.find('.J-mark-all-panel');\n        let colorVal = $markPanel.find('.J-color:checked').val();\n        let positionVal = $markPanel.find('.J-position:checked').val();\n        let opacityVal = $markPanel.find('.J-opacity').val();\n        let markTxtVal = $markPanel.find('.J-markTxt').val();\n\n        let markStyle = `rgba(255, 255, 255, ${opacityVal})`;\n        if (colorVal === '1') {\n            markStyle = `rgba(0, 0, 0, ${opacityVal})`;\n        }\n\n        this.markFontAll = 20 * this.activeData.ratio + 'px microsoft yahei';\n        this.markStyleAll = markStyle;\n        this.markTextAll = MARKTXT[markTxtVal];\n\n        let $dragBoxWrapper = this.markAllBox.$dragBox.parent();\n        let dragBoxWrapperWidth = $dragBoxWrapper.width();\n        let dragBoxWrapperHeight = $dragBoxWrapper.height();\n        let dragBoxWidth = this.markAllBox.$dragBox.outerWidth() < dragBoxWrapperWidth ? this.markAllBox.$dragBox.outerWidth() : dragBoxWrapperWidth;\n        let dragBoxHeight = this.markAllBox.$dragBox.outerHeight() < dragBoxWrapperHeight ? this.markAllBox.$dragBox.outerHeight() : dragBoxWrapperHeight;\n\n\n        switch (POSITION[positionVal]) {\n            case 'center':\n                this.markXAll = (dragBoxWrapperWidth - dragBoxWidth) / 2 * this.activeData.ratio;\n                this.markYAll = (dragBoxWrapperHeight - dragBoxHeight) / 2 * this.activeData.ratio;\n                break;\n            case 'upLeft':\n                this.markXAll = 0;\n                this.markYAll = 0;\n                break;\n            case 'upRight':\n                this.markXAll = (dragBoxWrapperWidth - dragBoxWidth) * this.activeData.ratio;\n                this.markYAll = 0;\n                break;\n            case 'downLeft':\n                this.markXAll = 0;\n                this.markYAll = (dragBoxWrapperHeight - dragBoxHeight) * this.activeData.ratio;\n                break;\n            case 'downRight':\n                this.markXAll = (dragBoxWrapperWidth - dragBoxWidth) * this.activeData.ratio;\n                this.markYAll = (dragBoxWrapperHeight - dragBoxHeight) * this.activeData.ratio;\n                break;\n            default:\n                break;\n        }\n\n        $markPanel.find('.J-mark-txt').text(this.markTextAll).css({\n            color: this.markStyleAll\n        });\n        this.markAllBox.$dragBox.css({\n            left: this.markXAll / this.activeData.ratio,\n            top: this.markYAll / this.activeData.ratio\n        })\n    }\n    _showSize(w0, h0) {\n        // 显示活动图片原始宽高\n        let $numWidth = this.$el.find('.J-num-width');\n        let $numHeight = this.$el.find('.J-num-height');\n        $numWidth.each((index, element) => {\n            if ($(element).get(0).nodeName.toLowerCase() === 'input') {\n                $numWidth.val(w0);\n            } else {\n                $numWidth.html(w0);\n            }\n        })\n        $numHeight.each((index, element) => {\n            if ($(element).get(0).nodeName.toLowerCase() === 'input') {\n                $numHeight.val(h0);\n            } else {\n                $numHeight.html(h0);\n            }\n        })\n    }\n    _refresh() {\n\n        this._updateActiveData();\n\n        let base64Data = this.activeData.cvs.toDataURL(this.mime, 1.0);\n\n        if (this.$el.find('.J-img-box').find('.J-source').length > 0) {\n            this.$el.find('.J-img-box').find('.J-source').attr('src', base64Data);\n        } else {\n            this.$el.find('.J-img-box').append(`<img class=\"J-source\" src=\"${base64Data}\">`);\n        }\n\n        this.$el.find('.J-source').removeAttr('style');\n        this.cropBox && (this.cropBox.boxEl.style = '');\n\n        this.$el.find('.J-img-box').find('.J-source').css({\n            width: this.activeData.w1,\n            height: this.activeData.h1\n        })\n\n        this._showSize(this.activeData.w0, this.activeData.h0);\n\n    }\n    // 更新正在编辑图片的数据\n    _updateActiveData() {\n\n        let targetImg = this.resultList[this.resultList.length - 1];\n        let w0 = targetImg.width;\n        let h0 = targetImg.height;\n        if (targetImg.nodeName.toLowerCase() === 'img') {\n            w0 = targetImg.naturalWidth;\n            h0 = targetImg.naturalHeight;\n        }\n\n        let imgRatio = w0 / h0;\n        let h1;\n        let w1;\n        let ratio;\n        if (imgRatio < this.imgBoxRatio) {\n            h1 = this.imgBoxHeight;\n            w1 = 'auto';\n            ratio = h0 / h1;\n        } else {\n            w1 = this.imgBoxWidth;\n            h1 = 'auto';\n            ratio = w0 / w1;\n        }\n\n        this.activeData = {\n            w0: w0,\n            h0: h0,\n            w1: w1,\n            h1: h1,\n            ratio: ratio,\n            imgRatio: imgRatio,\n            cvs: targetImg\n        }\n    }\n    _getRotateNum(direction) {\n        this.rotateNum += direction;\n        if (this.rotateNum > 3) {\n            this.rotateNum = 0;\n        }\n        if (this.rotateNum < 0) {\n            this.rotateNum = 3;\n        }\n    }\n\n    _reset() {\n        this.rotateNum = 0;\n        this.scaleRatio = 1;\n\n        this.resultList = this.resultList.slice(0, 1);\n        this.imgHandler = new _imgHandler__WEBPACK_IMPORTED_MODULE_1__[\"ImgHandler\"]({\n            sourceImg: this.resultList[0]\n        })\n\n        this._refresh();\n    }\n    save(cvs) {\n        let max = this.maxSize * 1024;\n        let data = this._compress(cvs, max, false);\n        // 模拟处理后图片展示\n        $('#J-preview-container').append($('<img>').attr('src', data));\n\n        this._getFormData(data);\n    }\n    _getFormData(data) {\n\n        let blob = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"base64Data2Blob\"])(data, this.mime);\n        // console.log('end compress: ' + Math.ceil(blob.size / 1024));\n        let formData = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"blob2FormData\"])(blob);\n\n        $.ajax({\n            url: \"/saveFile\",\n            type: \"POST\",\n            data: formData,\n            processData: false, // 不处理数据\n            contentType: false // 不设置内容类型\n        });\n    }\n    // 只对'image/jpeg'格式有效\n    _compress(cvs, max, isSimple) {\n        let quality = 1;\n        let minWH = 800;\n        let scaleRatio = 0.9;\n        let qualityStep = 0.1;\n        // 质量压缩只支持'image/jpeg'，'image/webp'(chrome支持)\n        let qualityType = 'image/jpeg';\n\n        let width = cvs.width;\n        let height = cvs.height;\n        let cvsRatio = width / height;\n        let data = cvs.toDataURL(qualityType, 1.0);\n        let size0 = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getBase64Size\"])(data);\n        console.log('start compress: ' + Math.ceil(size0 / 1024));\n        if (isSimple) {\n            while (size0 > max) {\n                quality = Math.floor(max / size0 * 10) / 10;\n                data = cvs.toDataURL(qualityType, quality);\n                size0 = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getBase64Size\"])(data);\n            }\n\n        } else {\n            // 优先缩放\n            while (size0 > max && (width > minWH || height > minWH)) {\n                let newWidth, newHeight;\n                if (cvsRatio > 1) {\n                    newWidth = width * scaleRatio > minWH ? width * scaleRatio : minWH;\n                    newHeight = newWidth / cvsRatio;\n                } else {\n                    newHeight = height * scaleRatio > minWH ? height * scaleRatio : minWH;\n                    newWidth = newHeight * cvsRatio;\n                }\n\n                let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(newWidth, newHeight),\n                    ctx = canvas.getContext(\"2d\");\n                ctx.drawImage(cvs, 0, 0, newWidth, newHeight);\n\n                data = canvas.toDataURL(this.mime, 1.0);\n                size0 = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getBase64Size\"])(data);\n                width = newWidth;\n                height = newHeight;\n                cvs = canvas;\n            }\n            // 降低质量\n            while (size0 > max) {\n                quality -= qualityStep;\n                data = cvs.toDataURL(qualityType, quality);\n                size0 = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getBase64Size\"])(data);\n            }\n        }\n        console.log('end compress: ' + Math.ceil(size0 / 1024));\n        return data;\n    }\n    destory() {\n        this.$el.remove();\n    }\n    showDialog() {\n        this.$el.show();\n    }\n    hideDialog() {\n        this.$el.hide();\n    }\n\n}\n\n\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = PipeImg;\n} else if (typeof define === \"function\" && __webpack_require__(/*! !webpack amd options */ \"./node_modules/webpack/buildin/amd-options.js\")) {\n    define(function () {\n        return PipeImg;\n    });\n} else {\n    window.PipeImg = PipeImg;\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/harmony-module.js */ \"./node_modules/webpack/buildin/harmony-module.js\")(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvcGlwZUltZy5qcz85MjIwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU9nQjtBQUdNO0FBR0g7QUFDYTs7QUFFaEM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixtREFBRztBQUN6Qjs7O0FBR0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0EsUUFBUSx3REFBVTtBQUNsQjs7QUFFQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUztBQUNUOztBQUVBO0FBQ0EsOEJBQThCLHNEQUFVO0FBQ3hDO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTs7QUFFQTtBQUNBLDJCQUEyQixnREFBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsMkJBQTJCLGdEQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw4QkFBOEIsZ0RBQU87QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0Esa0NBQWtDLHNEQUFVO0FBQzVDO0FBQ0EsYUFBYTs7QUFFYjs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVM7OztBQUdUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzREFBVTtBQUMvQztBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1DQUFtQyxvQkFBb0I7QUFDdkQsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxrQ0FBa0MsZ0JBQWdCO0FBQ2xELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwrQ0FBK0MsV0FBVztBQUMxRDtBQUNBLHlDQUF5QyxXQUFXO0FBQ3BEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLCtDQUErQyxXQUFXO0FBQzFEO0FBQ0EseUNBQXlDLFdBQVc7QUFDcEQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULDZFQUE2RSxXQUFXO0FBQ3hGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsc0RBQVU7QUFDeEM7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsNkRBQWU7QUFDbEM7QUFDQSx1QkFBdUIsMkRBQWE7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkRBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyREFBYTtBQUNyQzs7QUFFQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkIsdURBQVM7QUFDdEM7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QiwyREFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJEQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQSxDQUFDLDBDQUEwQyxnR0FBVTtBQUNyRDtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRDtBQUNBIiwiZmlsZSI6Ii4vc3JjL2pzL3BpcGVJbWcuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIGdldEJhc2U2NFNpemUsXG4gICAgY29tcHJlc3MsXG4gICAgYmFzZTY0RGF0YTJCbG9iLFxuICAgIGJsb2IyRm9ybURhdGEsXG4gICAgbG9hZEltYWdlcyxcbiAgICBnZXRDYW52YXNcbn0gZnJvbSAnLi91dGlsJztcbmltcG9ydCB7XG4gICAgSW1nSGFuZGxlclxufSBmcm9tICcuL2ltZ0hhbmRsZXInO1xuaW1wb3J0IHtcbiAgICBEcmFnQm94XG59IGZyb20gJy4vZHJhZ0JveCc7XG5pbXBvcnQgdHBsIGZyb20gJy4vcGlwZUltZy50cGwnO1xuXG5jbGFzcyBQaXBlSW1nIHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcblxuICAgICAgICAvLyDpu5jorqTphY3nva7lj4LmlbBcbiAgICAgICAgbGV0IGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgc291cmNlOiBbJy4vYXNzZXRzL0plbGx5ZmlzaC5qcGcnXSxcbiAgICAgICAgICAgIG1pbWU6ICdpbWFnZS9qcGVnJyxcbiAgICAgICAgICAgIG1heFNpemU6IDUwMCxcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0cGxcbiAgICAgICAgfTtcblxuXG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuc291cmNlID0gb3B0aW9ucy5zb3VyY2U7XG4gICAgICAgIHRoaXMubWltZSA9IG9wdGlvbnMubWltZTtcbiAgICAgICAgdGhpcy5tYXhTaXplID0gb3B0aW9ucy5tYXhTaXplO1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcblxuXG5cbiAgICAgICAgdGhpcy5faW5pdCgpO1xuXG4gICAgfVxuXG4gICAgX2luaXQoKSB7XG4gICAgICAgIGxldCBodG1sID0gJzxkaXYgY2xhc3M9XCJwaXBlLWRpYWxvZyBKLXBpcGUtZGlhbG9nXCI+PGRpdiBjbGFzcz1cInBpcGUtbWFzayBKLXBpcGUtbWFza1wiPjwvZGl2PicrIHRoaXMuIHRlbXBsYXRlICsnPC9kaXY+JztcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZChodG1sKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuJGVsID0gJCgnLkotcGlwZS1kaWFsb2cnKTtcbiAgICAgICAgdGhpcy4kcGlwZVdyYXBwZXIgPSB0aGlzLiRlbC5maW5kKCcuSi1waXBlLXdyYXBwZXInKTtcblxuICAgICAgICAvLyDlhajlsYDlj5jph49cbiAgICAgICAgdGhpcy5yb3RhdGVOdW0gPSAwO1xuICAgICAgICB0aGlzLnNjYWxlUmF0aW8gPSAxO1xuXG4gICAgICAgIHRoaXMucmVzdWx0TGlzdCA9IFtdO1xuXG4gICAgICAgIHRoaXMuaW1nTGlzdCA9IFtdO1xuXG4gICAgICAgIHRoaXMuaW1nQm94SGVpZ2h0ID0gdGhpcy4kZWwuZmluZCgnLkotaW1nLWJveCcpLmhlaWdodCgpO1xuICAgICAgICB0aGlzLmltZ0JveFdpZHRoID0gdGhpcy4kZWwuZmluZCgnLkotaW1nLWJveCcpLndpZHRoKCk7XG4gICAgICAgIHRoaXMuaW1nQm94UmF0aW8gPSB0aGlzLmltZ0JveFdpZHRoIC8gdGhpcy5pbWdCb3hIZWlnaHQ7XG5cblxuICAgICAgICBsb2FkSW1hZ2VzKHRoaXMuc291cmNlLCAoaW1hZ2VzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9sb2FkSW1hZ2VzU3VjY2VzcyhpbWFnZXMpO1xuXG4gICAgICAgIH0pXG5cbiAgICB9XG4gICAgX2xvYWRJbWFnZXNTdWNjZXNzKGltYWdlcykge1xuICAgICAgICAvLyDliJ3lp4vljJblupXpg6jnvKnnlaXlm75cbiAgICAgICAgbGV0IGltZ3NIdG1sID0gJyc7XG4gICAgICAgIC8vIOS4uuS6huaYvuekuumhuuW6j+S4jumFjee9ruS4gOiHtFxuICAgICAgICB0aGlzLmltZ0xpc3QgPSBpbWFnZXMucmV2ZXJzZSgpO1xuICAgICAgICAkKHRoaXMuaW1nTGlzdCkuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGxldCB0aHVtYm5haWxIdG1sID0gJzxhIGNsYXNzPVwiaW1nLXRodW1ibmFpbCAnICsgKGluZGV4ID09PSAwID8gJ2FjdGl2ZScgOiAnJykgKyAnIEotaW1nLXRodW1ibmFpbFwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIj4nICtcbiAgICAgICAgICAgICAgICAnPGltZyBzcmM9XCInICsgZWxlbWVudC5zcmMgKyAnXCI+JyArXG4gICAgICAgICAgICAgICAgJzwvYT4nO1xuICAgICAgICAgICAgaW1nc0h0bWwgKz0gdGh1bWJuYWlsSHRtbDtcblxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotaW1ncy10aHVtYm5haWwnKS5odG1sKGltZ3NIdG1sKTtcblxuICAgICAgICAvLyDlvoXnvJbovpHlm77niYdcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyID0gbmV3IEltZ0hhbmRsZXIoe1xuICAgICAgICAgICAgc291cmNlSW1nOiBpbWFnZXNbMF1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnB1c2godGhpcy5pbWdIYW5kbGVyLnJlc3VsdCk7XG5cbiAgICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuXG4gICAgICAgIC8vIOWIneWni+WMluijgeWJquahhlxuICAgICAgICB0aGlzLmNyb3BCb3ggPSBuZXcgRHJhZ0JveCh7XG4gICAgICAgICAgICBlbGU6ICcuSi1jcm9wLWJveCAuSi1zb3VyY2UnLFxuICAgICAgICAgICAgaGFzTGlnaHQ6IHRydWUsXG4gICAgICAgICAgICBvbkRyYWdQb2ludDogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zaG93U2l6ZShkYXRhLndpZHRoICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvLCBkYXRhLmhlaWdodCAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyDliJ3lp4vljJbmsLTljbDmoYZcbiAgICAgICAgdGhpcy5tYXJrQm94ID0gbmV3IERyYWdCb3goe1xuICAgICAgICAgICAgZWxlOiAnLkotbWFyay1ib3ggLkotc291cmNlJyxcbiAgICAgICAgICAgIHdpZHRoOiAzNDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDM1LFxuICAgICAgICAgICAgbWFya1RleHQ6ICdwcm9kdWN0dGVzdC5lbi5tYWRlLWluLWNoaW5hLmNvbScsXG4gICAgICAgICAgICBvbkRyYWdDb21wbGV0ZTogKGxlZnQsIHRvcCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubWFya1ggPSBsZWZ0ICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgICAgIHRoaXMubWFya1kgPSB0b3AgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyDliJ3lp4vljJbmibnph4/msLTljbDmoYZcbiAgICAgICAgdGhpcy5tYXJrQWxsQm94ID0gbmV3IERyYWdCb3goe1xuICAgICAgICAgICAgZWxlOiAnLkotbWFyay1ib3gtYWxsIC5KLXNvdXJjZScsXG4gICAgICAgICAgICB3aWR0aDogMzQwLFxuICAgICAgICAgICAgaGVpZ2h0OiAzNSxcbiAgICAgICAgICAgIG1hcmtUZXh0OiAncHJvZHVjdHRlc3QuZW4ubWFkZS1pbi1jaGluYS5jb20nLFxuICAgICAgICAgICAgb25EcmFnQ29tcGxldGU6IChsZWZ0LCB0b3ApID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtYQWxsID0gbGVmdCAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbztcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtZQWxsID0gdG9wICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8g5LqL5Lu257uR5a6aXG4gICAgICAgIHRoaXMuX2JpbmQoKTtcbiAgICB9XG5cbiAgICBfYmluZCgpIHtcbiAgICAgICAgLy8g5YiH5o2i57yW6L6R5Zu+54mHXG4gICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLWltZ3MtdGh1bWJuYWlsJykub24oJ2NsaWNrJywgJy5KLWltZy10aHVtYm5haWwnLCAoZSkgPT4ge1xuXG4gICAgICAgICAgICBsZXQgJHRodW1ibmFpbCA9ICQoZS50YXJnZXQpLnBhcmVudCgpO1xuICAgICAgICAgICAgJHRodW1ibmFpbC5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLXNvdXJjZScpLmF0dHIoJ3NyYycsICR0aHVtYm5haWwuZmluZCgnaW1nJykuYXR0cignc3JjJykpO1xuICAgICAgICAgICAgbGV0IHRhcmdldEltZyA9IHRoaXMuJGVsLmZpbmQoJy5KLXNvdXJjZTpmaXJzdCcpLmdldCgwKTtcblxuXG4gICAgICAgICAgICB0aGlzLmltZ0hhbmRsZXIgPSBuZXcgSW1nSGFuZGxlcih7XG4gICAgICAgICAgICAgICAgc291cmNlSW1nOiB0YXJnZXRJbWdcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHRoaXMucmVzdWx0TGlzdCA9IFt0aGlzLmltZ0hhbmRsZXIucmVzdWx0XTtcblxuICAgICAgICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuICAgICAgICAgICAgLy8gdGhpcy5faW5pdFBhbmVsKCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8g6I+c5Y2V5YiH5o2iXG4gICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLW1lbnUtaXRlbScpLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgJGl0ZW0gPSAkKGUudGFyZ2V0KS5wYXJlbnQoKTtcbiAgICAgICAgICAgIGxldCBpbmRleCA9ICRpdGVtLmluZGV4KCk7XG4gICAgICAgICAgICBsZXQgb2xkQWN0aXZlSW5kZXggPSAkaXRlbS5wYXJlbnQoKS5maW5kKCcuYWN0aXZlOmZpcnN0JykuaW5kZXgoKTtcbiAgICAgICAgICAgICRpdGVtLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLXBhbmVsJykuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgLy8g56a75byA5peL6L2s77yM6KOB5Ymq77yM57yp5pS+6Z2i5p2/6L+b6KGM5L+d5a2YXG4gICAgICAgICAgICBzd2l0Y2ggKG9sZEFjdGl2ZUluZGV4KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zYXZlUm90YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2F2ZUNyb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zYXZlU2NhbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOi/m+WFpeijgeWJqlxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdENyb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOi/m+WFpee8qeaUvlxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdFNjYWxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDov5vlhaXmsLTljbBcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2luaXRNYXJrKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOi/m+WFpeaJuemHj+awtOWNsFxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSA0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzZXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0TWFya0FsbCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pXG5cblxuICAgICAgICAvLyDml4vovawrKysrKysrKysrKysrKysrXG4gICAgICAgIC8vIOmAhuaXtumSiOaXi+i9rFxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1idG4tcm90YXRlLWxlZnQnKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9nZXRSb3RhdGVOdW0oLTEpO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUm90YXRlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vIOmhuuaXtumSiOaXi+i9rFxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1idG4tcm90YXRlLXJpZ2h0Jykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZ2V0Um90YXRlTnVtKDEpO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUm90YXRlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vIOijgeWJqisrKysrKysrKysrK1xuICAgICAgICBsZXQgJGNyb3BQYW5lbCA9IHRoaXMuJGVsLmZpbmQoJy5KLWNyb3AtcGFuZWwnKTtcbiAgICAgICAgJGNyb3BQYW5lbC5maW5kKCcuSi1udW0td2lkdGgnKS5vbignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jcm9wQm94LndpZHRoID0gJChlLnRhcmdldCkudmFsKCkgLyB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG4gICAgICAgICAgICBpZiAodGhpcy5jcm9wQm94LmZpeFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcm9wQm94LmhlaWdodCA9IHRoaXMuY3JvcEJveC53aWR0aCAvIHRoaXMuY3JvcEJveC5ib3hEYXRhLnJhdGlvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ3JvcCgpO1xuICAgICAgICB9KVxuICAgICAgICAkY3JvcFBhbmVsLmZpbmQoJy5KLW51bS1oZWlnaHQnKS5vbignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jcm9wQm94LmhlaWdodCA9ICQoZS50YXJnZXQpLnZhbCgpIC8gdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3JvcEJveC5maXhSYXRpbykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JvcEJveC53aWR0aCA9IHRoaXMuY3JvcEJveC5oZWlnaHQgKiB0aGlzLmNyb3BCb3guYm94RGF0YS5yYXRpbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNyb3AoKTtcbiAgICAgICAgfSlcbiAgICAgICAgJGNyb3BQYW5lbC5maW5kKCcuSi1maXgtcmF0aW8nKS5vbignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3JvcEJveC5maXhSYXRpbyA9ICF0aGlzLmNyb3BCb3guZml4UmF0aW87XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8g57yp5pS+KysrKysrKysrKysrKytcbiAgICAgICAgbGV0ICRzY2FsZVBhbmVsID0gdGhpcy4kZWwuZmluZCgnLkotc2NhbGUtcGFuZWwnKTtcbiAgICAgICAgJHNjYWxlUGFuZWwuZmluZCgnLkotc2NhbGUtcmFuZ2UnKS5vbignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0ICR0aGlzID0gJChlLnRhcmdldCk7XG4gICAgICAgICAgICBsZXQgbWF4ID0gcGFyc2VJbnQoJHRoaXMuYXR0cignbWF4JykpO1xuICAgICAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gcGFyc2VJbnQoJHRoaXMudmFsKCkpIC8gbWF4O1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2NhbGUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgJHNjYWxlUGFuZWwuZmluZCgnLkotbnVtLXdpZHRoJykub24oJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGxldCAkdGhpcyA9ICQoZS50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gcGFyc2VJbnQoJHRoaXMudmFsKCkpIC8gdGhpcy5hY3RpdmVEYXRhLncwO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2NhbGUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgJHNjYWxlUGFuZWwuZmluZCgnLkotbnVtLWhlaWdodCcpLm9uKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgJHRoaXMgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMuc2NhbGVSYXRpbyA9IHBhcnNlSW50KCR0aGlzLnZhbCgpKSAvIHRoaXMuYWN0aXZlRGF0YS5oMDtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNjYWxlKCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8g5rC05Y2wKysrKysrKysrKysrKytcbiAgICAgICAgbGV0ICRtYXJrUGFuZWwgPSB0aGlzLiRlbC5maW5kKCcuSi1tYXJrLXBhbmVsJyk7XG4gICAgICAgICRtYXJrUGFuZWwuZmluZCgnW25hbWU9Y29sb3JdLFtuYW1lPW9wYWNpdHldJykub24oJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWFyaygpO1xuICAgICAgICB9KVxuICAgICAgICAkbWFya1BhbmVsLmZpbmQoJ1tuYW1lPW1hcmtUeHRdJykub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1hcmsoKTtcbiAgICAgICAgfSlcbiAgICAgICAgJG1hcmtQYW5lbC5maW5kKCdbbmFtZT1wb3NpdGlvbl0nKS5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWFyaygpO1xuICAgICAgICB9KVxuICAgICAgICAvLyDmsLTljbDnoa7lrppcbiAgICAgICAgJG1hcmtQYW5lbC5maW5kKCcuSi1idXR0b24tY29uZmlybScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3NhdmVNYXJrKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vIOawtOWNsOWPlua2iFxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1idXR0b24tY2FuY2VsJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZ29Ib21lKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vIOaJuemHj+awtOWNsCsrKysrKysrKysrKysrXG4gICAgICAgIGxldCAkbWFya0FsbFBhbmVsID0gdGhpcy4kZWwuZmluZCgnLkotbWFyay1hbGwtcGFuZWwnKTtcbiAgICAgICAgJG1hcmtBbGxQYW5lbC5maW5kKCdbbmFtZT1jb2xvckFsbF0sW25hbWU9b3BhY2l0eUFsbF0nKS5vbignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNYXJrQWxsKCk7XG4gICAgICAgIH0pXG4gICAgICAgICRtYXJrQWxsUGFuZWwuZmluZCgnW25hbWU9bWFya1R4dEFsbF0nKS5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWFya0FsbCgpO1xuICAgICAgICB9KVxuICAgICAgICAkbWFya0FsbFBhbmVsLmZpbmQoJ1tuYW1lPXBvc2l0aW9uQWxsXScpLm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNYXJrQWxsKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vIOaJuemHj+awtOWNsOehruWumlxuICAgICAgICAkbWFya0FsbFBhbmVsLmZpbmQoJy5KLWJ1dHRvbi1jb25maXJtLWFsbCcpLm9uKCdjbGljaycsICgpID0+IHtcblxuICAgICAgICAgICAgbGV0IHhQZXJjZW50ID0gdGhpcy5tYXJrWEFsbCAvIHRoaXMucmVzdWx0TGlzdFt0aGlzLnJlc3VsdExpc3QubGVuZ3RoIC0gMV0ud2lkdGg7XG4gICAgICAgICAgICBsZXQgeVBlcmNlbnQgPSB0aGlzLm1hcmtZQWxsIC8gdGhpcy5yZXN1bHRMaXN0W3RoaXMucmVzdWx0TGlzdC5sZW5ndGggLSAxXS5oZWlnaHQ7XG4gICAgICAgICAgICAkKHRoaXMuaW1nTGlzdCkuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaW1nSGFuZGxlciA9IG5ldyBJbWdIYW5kbGVyKHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlSW1nOiBlbGVtZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW1nSGFuZGxlci5tYXJrWCA9IGVsZW1lbnQud2lkdGggKiB4UGVyY2VudDtcbiAgICAgICAgICAgICAgICBpbWdIYW5kbGVyLm1hcmtZID0gZWxlbWVudC5oZWlnaHQgKiB5UGVyY2VudDtcblxuXG4gICAgICAgICAgICAgICAgaW1nSGFuZGxlci5tYXJrVGV4dCA9IHRoaXMubWFya1RleHRBbGw7XG4gICAgICAgICAgICAgICAgaW1nSGFuZGxlci5tYXJrRm9udCA9IHRoaXMubWFya0ZvbnRBbGw7XG4gICAgICAgICAgICAgICAgaW1nSGFuZGxlci5tYXJrU3R5bGUgPSB0aGlzLm1hcmtTdHlsZUFsbDtcblxuICAgICAgICAgICAgICAgIGltZ0hhbmRsZXIubWFyaygpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlKGltZ0hhbmRsZXIucmVzdWx0KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLmhpZGVEaWFsb2coKTtcbiAgICAgICAgfSlcblxuICAgICAgICAvLyDph43nva5cbiAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotYnV0dG9uLXJlc2V0Jykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVzZXQoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLy8g5L+d5a2YXG4gICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLWJ1dHRvbi1zYXZlJykub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGxldCBwYW5lbEluZGV4ID0gJChlLnRhcmdldCkucGFyZW50cygnLkotcGFuZWwnKS5pbmRleCgpO1xuICAgICAgICAgICAgc3dpdGNoIChwYW5lbEluZGV4KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zYXZlUm90YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2F2ZUNyb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zYXZlU2NhbGUoKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGFjdGl2ZUltZyA9IHRoaXMuYWN0aXZlRGF0YS5jdnM7XG4gICAgICAgICAgICBsZXQgYmFzZTY0RGF0YSA9IGFjdGl2ZUltZy50b0RhdGFVUkwodGhpcy5taW1lLCAxLjApO1xuICAgICAgICAgICAgbGV0ICRhY3RpdmVUaHVtYm5haWwgPSB0aGlzLiRlbC5maW5kKCcuSi1pbWctdGh1bWJuYWlsLmFjdGl2ZScpO1xuICAgICAgICAgICAgLy8g5pu05paw5bqV6YOo57yp55Wl5Zu+5pi+56S6XG4gICAgICAgICAgICAkYWN0aXZlVGh1bWJuYWlsLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsIGJhc2U2NERhdGEpO1xuICAgICAgICAgICAgLy8g5pu05paw5YWo5bGA5pWw5o2uXG4gICAgICAgICAgICB0aGlzLnJlc3VsdExpc3QgPSBbYWN0aXZlSW1nXTtcbiAgICAgICAgICAgIHRoaXMuaW1nTGlzdFskYWN0aXZlVGh1bWJuYWlsLmluZGV4KCldID0gYWN0aXZlSW1nO1xuXG4gICAgICAgICAgICB0aGlzLnNhdmUoYWN0aXZlSW1nKTtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotYnV0dG9uLWNsb3NlJykub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xuICAgICAgICB9KVxuXG4gICAgfVxuICAgIF9pbml0UGFuZWwoKSB7XG4gICAgICAgIHRoaXMuX2luaXRDcm9wKCk7XG4gICAgICAgIHRoaXMuX2luaXRTY2FsZSgpO1xuICAgICAgICB0aGlzLl9pbml0TWFyaygpO1xuICAgICAgICB0aGlzLl9pbml0TWFya0FsbCgpO1xuICAgIH1cbiAgICBfZ29Ib21lKCkge1xuICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1tZW51LWl0ZW06Zmlyc3QnKS5jbGljaygpO1xuICAgIH1cblxuICAgIF9pbml0Um90YXRlKCkge1xuICAgICAgICB0aGlzLnJvdGF0ZU51bSA9IDA7XG4gICAgfVxuICAgIF91cGRhdGVSb3RhdGUoKSB7XG5cbiAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotc291cmNlJykuY3NzKHtcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBgcm90YXRlKCR7dGhpcy5yb3RhdGVOdW0gKiA5MH1kZWcpYFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5yb3RhdGVOdW0gPT09IDEgfHwgdGhpcy5yb3RhdGVOdW0gPT09IDMpIHtcbiAgICAgICAgICAgIC8vIOaXi+i9rOexuzkw5bqm5ZCOXG4gICAgICAgICAgICBpZiAoMSAvIHRoaXMuYWN0aXZlRGF0YS5pbWdSYXRpbyA8IHRoaXMuaW1nQm94UmF0aW8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1zb3VyY2UnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiB0aGlzLmltZ0JveEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6ICdhdXRvJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1zb3VyY2UnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiB0aGlzLmltZ0JveFdpZHRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlRGF0YS5pbWdSYXRpbyA8IHRoaXMuaW1nQm94UmF0aW8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1zb3VyY2UnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiB0aGlzLmltZ0JveEhlaWdodFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1zb3VyY2UnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiB0aGlzLmltZ0JveFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cbiAgICBfc2F2ZVJvdGF0ZSgpIHtcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLnJvdGF0ZU51bSA9IHRoaXMucm90YXRlTnVtO1xuICAgICAgICB0aGlzLmltZ0hhbmRsZXIucm90YXRlKCk7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5yb3RhdGVOdW0gPSB0aGlzLnJvdGF0ZU51bSA9IDA7XG5cbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnB1c2godGhpcy5pbWdIYW5kbGVyLnJlc3VsdCk7XG5cbiAgICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuXG4gICAgfVxuICAgIF9pbml0Q3JvcCgpIHtcbiAgICAgICAgbGV0ICRjcm9wUGFuZWwgPSB0aGlzLiRlbC5maW5kKCcuSi1jcm9wLXBhbmVsJyk7XG5cbiAgICAgICAgdGhpcy5jcm9wQm94LmlzRml4ZWQgPSAkY3JvcFBhbmVsLmZpbmQoJy5KLWZpeC1yYXRpbycpLnByb3AoJ2NoZWNrZWQnKTtcbiAgICAgICAgdGhpcy5jcm9wQm94LndpZHRoID0gJGNyb3BQYW5lbC5maW5kKCcuSi1udW0td2lkdGgnKS52YWwoKSAvIHRoaXMuYWN0aXZlRGF0YS5yYXRpbztcbiAgICAgICAgdGhpcy5jcm9wQm94LmhlaWdodCA9ICRjcm9wUGFuZWwuZmluZCgnLkotbnVtLWhlaWdodCcpLnZhbCgpIC8gdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgIH1cbiAgICBfdXBkYXRlQ3JvcCgpIHtcbiAgICAgICAgdGhpcy5jcm9wQm94LnVwZGF0ZSgpO1xuICAgIH1cbiAgICBfc2F2ZUNyb3AoKSB7XG4gICAgICAgIHRoaXMuc3ggPSB0aGlzLmNyb3BCb3guYm94RGF0YS5sZWZ0ICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICB0aGlzLnN5ID0gdGhpcy5jcm9wQm94LmJveERhdGEudG9wICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICB0aGlzLmNyb3BXID0gdGhpcy5jcm9wQm94LmJveERhdGEud2lkdGggKiB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG4gICAgICAgIHRoaXMuY3JvcEggPSB0aGlzLmNyb3BCb3guYm94RGF0YS5oZWlnaHQgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG5cbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLmNyb3BXID0gdGhpcy5jcm9wVztcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLmNyb3BIID0gdGhpcy5jcm9wSDtcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLnN4ID0gdGhpcy5zeDtcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLnN5ID0gdGhpcy5zeTtcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLmNyb3AoKTtcblxuICAgICAgICB0aGlzLnJlc3VsdExpc3QucHVzaCh0aGlzLmltZ0hhbmRsZXIucmVzdWx0KTtcblxuICAgICAgICB0aGlzLl9yZWZyZXNoKCk7XG4gICAgfVxuICAgIF9pbml0U2NhbGUoKSB7XG4gICAgICAgIGxldCAkc2NhbGVQYW5lbCA9IHRoaXMuJGVsLmZpbmQoJy5KLXNjYWxlLXBhbmVsJyk7XG4gICAgICAgIGxldCAkc2NhbGVJbWdCb3ggPSAkc2NhbGVQYW5lbC5maW5kKCcuSi1pbWctYm94Jyk7XG4gICAgICAgIGxldCAkc2NhbGVSYW5nZSA9ICRzY2FsZVBhbmVsLmZpbmQoJy5KLXNjYWxlLXJhbmdlJyk7XG5cbiAgICAgICAgLy8g5Y676Zmk6aKE6KeI5Zu+55qE57yp5pS+5pi+56S6XG4gICAgICAgICRzY2FsZUltZ0JveC5maW5kKCcuSi1zb3VyY2UnKS5jc3Moe1xuICAgICAgICAgICAgd2lkdGg6ICdhdXRvJyxcbiAgICAgICAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgICAgIH0pXG4gICAgICAgIC8vIOWIneWni+WMlua7keWdl+WAvFxuICAgICAgICAkc2NhbGVSYW5nZS52YWwoJHNjYWxlUmFuZ2UuYXR0cignbWF4JykpO1xuXG4gICAgICAgIHRoaXMuc2NhbGVSYXRpbyA9IDE7XG4gICAgfVxuICAgIF91cGRhdGVTY2FsZSgpIHtcbiAgICAgICAgbGV0IHNjYWxlUmF0aW8gPSB0aGlzLnNjYWxlUmF0aW87XG5cbiAgICAgICAgbGV0ICRzY2FsZVBhbmVsID0gdGhpcy4kZWwuZmluZCgnLkotc2NhbGUtcGFuZWwnKTtcbiAgICAgICAgbGV0ICRzY2FsZVJhbmdlID0gJHNjYWxlUGFuZWwuZmluZCgnLkotc2NhbGUtcmFuZ2UnKTtcbiAgICAgICAgbGV0ICRzY2FsZU51bVdpZHRoID0gJHNjYWxlUGFuZWwuZmluZCgnLkotbnVtLXdpZHRoJyk7XG4gICAgICAgIGxldCAkc2NhbGVOdW1IZWlnaHQgPSAkc2NhbGVQYW5lbC5maW5kKCcuSi1udW0taGVpZ2h0Jyk7XG4gICAgICAgIGxldCBtYXggPSBwYXJzZUludCgkc2NhbGVSYW5nZS5hdHRyKCdtYXgnKSk7XG5cbiAgICAgICAgaWYgKCRzY2FsZU51bVdpZHRoLnZhbCgpICE9IHRoaXMuYWN0aXZlRGF0YS53MCAqIHNjYWxlUmF0aW8pIHtcbiAgICAgICAgICAgICRzY2FsZU51bVdpZHRoLnZhbCh0aGlzLmFjdGl2ZURhdGEudzAgKiBzY2FsZVJhdGlvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJHNjYWxlTnVtSGVpZ2h0LnZhbCgpICE9IHRoaXMuYWN0aXZlRGF0YS5oMCAqIHNjYWxlUmF0aW8pIHtcbiAgICAgICAgICAgICRzY2FsZU51bUhlaWdodC52YWwodGhpcy5hY3RpdmVEYXRhLmgwICogc2NhbGVSYXRpbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRzY2FsZVJhbmdlLnZhbCgpICE9IG1heCAqIHNjYWxlUmF0aW8pIHtcbiAgICAgICAgICAgICRzY2FsZVJhbmdlLnZhbChtYXggKiBzY2FsZVJhdGlvKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgJCgnLkotc291cmNlJykuY3NzKHtcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBgc2NhbGUoJHt0aGlzLnNjYWxlUmF0aW99KWBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9zYXZlU2NhbGUoKSB7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5zY2FsZVJhdGlvID0gdGhpcy5zY2FsZVJhdGlvO1xuICAgICAgICB0aGlzLmltZ0hhbmRsZXIuc2NhbGUoKTtcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLnNjYWxlUmF0aW8gPSB0aGlzLnNjYWxlUmF0aW8gPSAwO1xuXG4gICAgICAgIHRoaXMucmVzdWx0TGlzdC5wdXNoKHRoaXMuaW1nSGFuZGxlci5yZXN1bHQpO1xuXG4gICAgICAgIHRoaXMuX3JlZnJlc2goKTtcblxuICAgIH1cbiAgICBfaW5pdE1hcmsoKSB7XG4gICAgICAgIGxldCAkbWFya1BhbmVsID0gdGhpcy4kZWwuZmluZCgnLkotbWFyay1wYW5lbCcpO1xuICAgICAgICAkbWFya1BhbmVsLmZpbmQoJy5KLWNvbG9yJykuZXEoMSkucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICAkbWFya1BhbmVsLmZpbmQoJy5KLXBvc2l0aW9uJykuZXEoMCkucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICAkbWFya1BhbmVsLmZpbmQoJy5KLW9wYWNpdHknKS52YWwoMC44KTtcbiAgICAgICAgJG1hcmtQYW5lbC5maW5kKCcuSi1tYXJrVHh0IG9wdGlvbjpmaXJzdCcpLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgdGhpcy5fdXBkYXRlTWFyaygpO1xuICAgIH1cbiAgICBfdXBkYXRlTWFyaygpIHtcbiAgICAgICAgY29uc3QgTUFSS1RYVCA9IFsncHJvZHVjdHRlc3QuZW4ubWFkZS1pbi1jaGluYS5jb20nLCAnRm9jdXMgU2VydmljZSBDbyAtIFByb2R1Y3QgU291cmNpbmcnXTtcbiAgICAgICAgY29uc3QgUE9TSVRJT04gPSBbJ2NlbnRlcicsICd1cExlZnQnLCAndXBSaWdodCcsICdkb3duTGVmdCcsICdkb3duUmlnaHQnXTtcblxuICAgICAgICBsZXQgJG1hcmtQYW5lbCA9IHRoaXMuJGVsLmZpbmQoJy5KLW1hcmstcGFuZWwnKTtcbiAgICAgICAgbGV0IGNvbG9yVmFsID0gJG1hcmtQYW5lbC5maW5kKCcuSi1jb2xvcjpjaGVja2VkJykudmFsKCk7XG4gICAgICAgIGxldCBwb3NpdGlvblZhbCA9ICRtYXJrUGFuZWwuZmluZCgnLkotcG9zaXRpb246Y2hlY2tlZCcpLnZhbCgpO1xuICAgICAgICBsZXQgb3BhY2l0eVZhbCA9ICRtYXJrUGFuZWwuZmluZCgnLkotb3BhY2l0eScpLnZhbCgpO1xuICAgICAgICBsZXQgbWFya1R4dFZhbCA9ICRtYXJrUGFuZWwuZmluZCgnLkotbWFya1R4dCcpLnZhbCgpO1xuXG4gICAgICAgIGxldCBtYXJrU3R5bGUgPSBgcmdiYSgyNTUsIDI1NSwgMjU1LCAke29wYWNpdHlWYWx9KWA7XG4gICAgICAgIGlmIChjb2xvclZhbCA9PT0gJzEnKSB7XG4gICAgICAgICAgICBtYXJrU3R5bGUgPSBgcmdiYSgwLCAwLCAwLCAke29wYWNpdHlWYWx9KWA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hcmtGb250ID0gMjAgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW8gKyAncHggbWljcm9zb2Z0IHlhaGVpJztcbiAgICAgICAgdGhpcy5tYXJrU3R5bGUgPSBtYXJrU3R5bGU7XG4gICAgICAgIHRoaXMubWFya1RleHQgPSBNQVJLVFhUW21hcmtUeHRWYWxdO1xuXG4gICAgICAgIGxldCAkZHJhZ0JveFdyYXBwZXIgPSB0aGlzLm1hcmtCb3guJGRyYWdCb3gucGFyZW50KCk7XG4gICAgICAgIGxldCBkcmFnQm94V3JhcHBlcldpZHRoID0gJGRyYWdCb3hXcmFwcGVyLndpZHRoKCk7XG4gICAgICAgIGxldCBkcmFnQm94V3JhcHBlckhlaWdodCA9ICRkcmFnQm94V3JhcHBlci5oZWlnaHQoKTtcbiAgICAgICAgbGV0IGRyYWdCb3hXaWR0aCA9IHRoaXMubWFya0JveC4kZHJhZ0JveC5vdXRlcldpZHRoKCkgPCBkcmFnQm94V3JhcHBlcldpZHRoID8gdGhpcy5tYXJrQm94LiRkcmFnQm94Lm91dGVyV2lkdGgoKSA6IGRyYWdCb3hXcmFwcGVyV2lkdGg7XG4gICAgICAgIGxldCBkcmFnQm94SGVpZ2h0ID0gdGhpcy5tYXJrQm94LiRkcmFnQm94Lm91dGVySGVpZ2h0KCkgPCBkcmFnQm94V3JhcHBlckhlaWdodCA/IHRoaXMubWFya0JveC4kZHJhZ0JveC5vdXRlckhlaWdodCgpIDogZHJhZ0JveFdyYXBwZXJIZWlnaHQ7XG5cbiAgICAgICAgc3dpdGNoIChQT1NJVElPTltwb3NpdGlvblZhbF0pIHtcbiAgICAgICAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrWCA9IChkcmFnQm94V3JhcHBlcldpZHRoIC0gZHJhZ0JveFdpZHRoKSAvIDIgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrWSA9IChkcmFnQm94V3JhcHBlckhlaWdodCAtIGRyYWdCb3hIZWlnaHQpIC8gMiAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3VwTGVmdCc6XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrWCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrWSA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd1cFJpZ2h0JzpcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtYID0gKGRyYWdCb3hXcmFwcGVyV2lkdGggLSBkcmFnQm94V2lkdGgpICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgICAgIHRoaXMubWFya1kgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZG93bkxlZnQnOlxuICAgICAgICAgICAgICAgIHRoaXMubWFya1ggPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMubWFya1kgPSAoZHJhZ0JveFdyYXBwZXJIZWlnaHQgLSBkcmFnQm94SGVpZ2h0KSAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Rvd25SaWdodCc6XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrWCA9IChkcmFnQm94V3JhcHBlcldpZHRoIC0gZHJhZ0JveFdpZHRoKSAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbztcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtZID0gKGRyYWdCb3hXcmFwcGVySGVpZ2h0IC0gZHJhZ0JveEhlaWdodCkgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgJG1hcmtQYW5lbC5maW5kKCcuSi1tYXJrLXR4dCcpLnRleHQodGhpcy5tYXJrVGV4dCkuY3NzKHtcbiAgICAgICAgICAgIGNvbG9yOiB0aGlzLm1hcmtTdHlsZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXJrQm94LiRkcmFnQm94LmNzcyh7XG4gICAgICAgICAgICBsZWZ0OiB0aGlzLm1hcmtYIC8gdGhpcy5hY3RpdmVEYXRhLnJhdGlvLFxuICAgICAgICAgICAgdG9wOiB0aGlzLm1hcmtZIC8gdGhpcy5hY3RpdmVEYXRhLnJhdGlvLFxuICAgICAgICAgICAgd2lkdGg6IGRyYWdCb3hXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogZHJhZ0JveEhlaWdodFxuICAgICAgICB9KVxuICAgIH1cbiAgICBfc2F2ZU1hcmsoKSB7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5tYXJrWCA9IHRoaXMubWFya1g7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5tYXJrWSA9IHRoaXMubWFya1k7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5tYXJrVGV4dCA9IHRoaXMubWFya1RleHQ7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5tYXJrRm9udCA9IHRoaXMubWFya0ZvbnQ7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5tYXJrU3R5bGUgPSB0aGlzLm1hcmtTdHlsZTtcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLm1hcmsoKTtcblxuICAgICAgICB0aGlzLnJlc3VsdExpc3QucHVzaCh0aGlzLmltZ0hhbmRsZXIucmVzdWx0KTtcblxuICAgICAgICB0aGlzLl9yZWZyZXNoKCk7XG5cbiAgICAgICAgdGhpcy5fZ29Ib21lKCk7XG4gICAgfVxuICAgIF9pbml0TWFya0FsbCgpIHtcbiAgICAgICAgbGV0ICRtYXJrUGFuZWwgPSB0aGlzLiRlbC5maW5kKCcuSi1tYXJrLWFsbC1wYW5lbCcpO1xuICAgICAgICAkbWFya1BhbmVsLmZpbmQoJy5KLWNvbG9yJykuZXEoMSkucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICAkbWFya1BhbmVsLmZpbmQoJy5KLXBvc2l0aW9uJykuZXEoMCkucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICAkbWFya1BhbmVsLmZpbmQoJy5KLW9wYWNpdHknKS52YWwoMC44KTtcbiAgICAgICAgJG1hcmtQYW5lbC5maW5kKCcuSi1tYXJrVHh0IG9wdGlvbjpmaXJzdCcpLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZU1hcmtBbGwoKTtcbiAgICB9XG4gICAgX3VwZGF0ZU1hcmtBbGwoKSB7XG4gICAgICAgIGNvbnN0IE1BUktUWFQgPSBbJ3Byb2R1Y3R0ZXN0LmVuLm1hZGUtaW4tY2hpbmEuY29tJywgJ0ZvY3VzIFNlcnZpY2UgQ28gLSBQcm9kdWN0IFNvdXJjaW5nJ107XG4gICAgICAgIGNvbnN0IFBPU0lUSU9OID0gWydjZW50ZXInLCAndXBMZWZ0JywgJ3VwUmlnaHQnLCAnZG93bkxlZnQnLCAnZG93blJpZ2h0J107XG5cbiAgICAgICAgbGV0ICRtYXJrUGFuZWwgPSB0aGlzLiRlbC5maW5kKCcuSi1tYXJrLWFsbC1wYW5lbCcpO1xuICAgICAgICBsZXQgY29sb3JWYWwgPSAkbWFya1BhbmVsLmZpbmQoJy5KLWNvbG9yOmNoZWNrZWQnKS52YWwoKTtcbiAgICAgICAgbGV0IHBvc2l0aW9uVmFsID0gJG1hcmtQYW5lbC5maW5kKCcuSi1wb3NpdGlvbjpjaGVja2VkJykudmFsKCk7XG4gICAgICAgIGxldCBvcGFjaXR5VmFsID0gJG1hcmtQYW5lbC5maW5kKCcuSi1vcGFjaXR5JykudmFsKCk7XG4gICAgICAgIGxldCBtYXJrVHh0VmFsID0gJG1hcmtQYW5lbC5maW5kKCcuSi1tYXJrVHh0JykudmFsKCk7XG5cbiAgICAgICAgbGV0IG1hcmtTdHlsZSA9IGByZ2JhKDI1NSwgMjU1LCAyNTUsICR7b3BhY2l0eVZhbH0pYDtcbiAgICAgICAgaWYgKGNvbG9yVmFsID09PSAnMScpIHtcbiAgICAgICAgICAgIG1hcmtTdHlsZSA9IGByZ2JhKDAsIDAsIDAsICR7b3BhY2l0eVZhbH0pYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWFya0ZvbnRBbGwgPSAyMCAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbyArICdweCBtaWNyb3NvZnQgeWFoZWknO1xuICAgICAgICB0aGlzLm1hcmtTdHlsZUFsbCA9IG1hcmtTdHlsZTtcbiAgICAgICAgdGhpcy5tYXJrVGV4dEFsbCA9IE1BUktUWFRbbWFya1R4dFZhbF07XG5cbiAgICAgICAgbGV0ICRkcmFnQm94V3JhcHBlciA9IHRoaXMubWFya0FsbEJveC4kZHJhZ0JveC5wYXJlbnQoKTtcbiAgICAgICAgbGV0IGRyYWdCb3hXcmFwcGVyV2lkdGggPSAkZHJhZ0JveFdyYXBwZXIud2lkdGgoKTtcbiAgICAgICAgbGV0IGRyYWdCb3hXcmFwcGVySGVpZ2h0ID0gJGRyYWdCb3hXcmFwcGVyLmhlaWdodCgpO1xuICAgICAgICBsZXQgZHJhZ0JveFdpZHRoID0gdGhpcy5tYXJrQWxsQm94LiRkcmFnQm94Lm91dGVyV2lkdGgoKSA8IGRyYWdCb3hXcmFwcGVyV2lkdGggPyB0aGlzLm1hcmtBbGxCb3guJGRyYWdCb3gub3V0ZXJXaWR0aCgpIDogZHJhZ0JveFdyYXBwZXJXaWR0aDtcbiAgICAgICAgbGV0IGRyYWdCb3hIZWlnaHQgPSB0aGlzLm1hcmtBbGxCb3guJGRyYWdCb3gub3V0ZXJIZWlnaHQoKSA8IGRyYWdCb3hXcmFwcGVySGVpZ2h0ID8gdGhpcy5tYXJrQWxsQm94LiRkcmFnQm94Lm91dGVySGVpZ2h0KCkgOiBkcmFnQm94V3JhcHBlckhlaWdodDtcblxuXG4gICAgICAgIHN3aXRjaCAoUE9TSVRJT05bcG9zaXRpb25WYWxdKSB7XG4gICAgICAgICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICAgICAgICAgIHRoaXMubWFya1hBbGwgPSAoZHJhZ0JveFdyYXBwZXJXaWR0aCAtIGRyYWdCb3hXaWR0aCkgLyAyICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgICAgIHRoaXMubWFya1lBbGwgPSAoZHJhZ0JveFdyYXBwZXJIZWlnaHQgLSBkcmFnQm94SGVpZ2h0KSAvIDIgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd1cExlZnQnOlxuICAgICAgICAgICAgICAgIHRoaXMubWFya1hBbGwgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMubWFya1lBbGwgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndXBSaWdodCc6XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrWEFsbCA9IChkcmFnQm94V3JhcHBlcldpZHRoIC0gZHJhZ0JveFdpZHRoKSAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbztcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtZQWxsID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Rvd25MZWZ0JzpcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtYQWxsID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtZQWxsID0gKGRyYWdCb3hXcmFwcGVySGVpZ2h0IC0gZHJhZ0JveEhlaWdodCkgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkb3duUmlnaHQnOlxuICAgICAgICAgICAgICAgIHRoaXMubWFya1hBbGwgPSAoZHJhZ0JveFdyYXBwZXJXaWR0aCAtIGRyYWdCb3hXaWR0aCkgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrWUFsbCA9IChkcmFnQm94V3JhcHBlckhlaWdodCAtIGRyYWdCb3hIZWlnaHQpICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgICRtYXJrUGFuZWwuZmluZCgnLkotbWFyay10eHQnKS50ZXh0KHRoaXMubWFya1RleHRBbGwpLmNzcyh7XG4gICAgICAgICAgICBjb2xvcjogdGhpcy5tYXJrU3R5bGVBbGxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWFya0FsbEJveC4kZHJhZ0JveC5jc3Moe1xuICAgICAgICAgICAgbGVmdDogdGhpcy5tYXJrWEFsbCAvIHRoaXMuYWN0aXZlRGF0YS5yYXRpbyxcbiAgICAgICAgICAgIHRvcDogdGhpcy5tYXJrWUFsbCAvIHRoaXMuYWN0aXZlRGF0YS5yYXRpb1xuICAgICAgICB9KVxuICAgIH1cbiAgICBfc2hvd1NpemUodzAsIGgwKSB7XG4gICAgICAgIC8vIOaYvuekuua0u+WKqOWbvueJh+WOn+Wni+WuvemrmFxuICAgICAgICBsZXQgJG51bVdpZHRoID0gdGhpcy4kZWwuZmluZCgnLkotbnVtLXdpZHRoJyk7XG4gICAgICAgIGxldCAkbnVtSGVpZ2h0ID0gdGhpcy4kZWwuZmluZCgnLkotbnVtLWhlaWdodCcpO1xuICAgICAgICAkbnVtV2lkdGguZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLmdldCgwKS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgICAgICAgJG51bVdpZHRoLnZhbCh3MCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRudW1XaWR0aC5odG1sKHcwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgJG51bUhlaWdodC5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCQoZWxlbWVudCkuZ2V0KDApLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpIHtcbiAgICAgICAgICAgICAgICAkbnVtSGVpZ2h0LnZhbChoMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRudW1IZWlnaHQuaHRtbChoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuICAgIF9yZWZyZXNoKCkge1xuXG4gICAgICAgIHRoaXMuX3VwZGF0ZUFjdGl2ZURhdGEoKTtcblxuICAgICAgICBsZXQgYmFzZTY0RGF0YSA9IHRoaXMuYWN0aXZlRGF0YS5jdnMudG9EYXRhVVJMKHRoaXMubWltZSwgMS4wKTtcblxuICAgICAgICBpZiAodGhpcy4kZWwuZmluZCgnLkotaW1nLWJveCcpLmZpbmQoJy5KLXNvdXJjZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLWltZy1ib3gnKS5maW5kKCcuSi1zb3VyY2UnKS5hdHRyKCdzcmMnLCBiYXNlNjREYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLWltZy1ib3gnKS5hcHBlbmQoYDxpbWcgY2xhc3M9XCJKLXNvdXJjZVwiIHNyYz1cIiR7YmFzZTY0RGF0YX1cIj5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLXNvdXJjZScpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgIHRoaXMuY3JvcEJveCAmJiAodGhpcy5jcm9wQm94LmJveEVsLnN0eWxlID0gJycpO1xuXG4gICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLWltZy1ib3gnKS5maW5kKCcuSi1zb3VyY2UnKS5jc3Moe1xuICAgICAgICAgICAgd2lkdGg6IHRoaXMuYWN0aXZlRGF0YS53MSxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5hY3RpdmVEYXRhLmgxXG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5fc2hvd1NpemUodGhpcy5hY3RpdmVEYXRhLncwLCB0aGlzLmFjdGl2ZURhdGEuaDApO1xuXG4gICAgfVxuICAgIC8vIOabtOaWsOato+WcqOe8lui+keWbvueJh+eahOaVsOaNrlxuICAgIF91cGRhdGVBY3RpdmVEYXRhKCkge1xuXG4gICAgICAgIGxldCB0YXJnZXRJbWcgPSB0aGlzLnJlc3VsdExpc3RbdGhpcy5yZXN1bHRMaXN0Lmxlbmd0aCAtIDFdO1xuICAgICAgICBsZXQgdzAgPSB0YXJnZXRJbWcud2lkdGg7XG4gICAgICAgIGxldCBoMCA9IHRhcmdldEltZy5oZWlnaHQ7XG4gICAgICAgIGlmICh0YXJnZXRJbWcubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ltZycpIHtcbiAgICAgICAgICAgIHcwID0gdGFyZ2V0SW1nLm5hdHVyYWxXaWR0aDtcbiAgICAgICAgICAgIGgwID0gdGFyZ2V0SW1nLm5hdHVyYWxIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW1nUmF0aW8gPSB3MCAvIGgwO1xuICAgICAgICBsZXQgaDE7XG4gICAgICAgIGxldCB3MTtcbiAgICAgICAgbGV0IHJhdGlvO1xuICAgICAgICBpZiAoaW1nUmF0aW8gPCB0aGlzLmltZ0JveFJhdGlvKSB7XG4gICAgICAgICAgICBoMSA9IHRoaXMuaW1nQm94SGVpZ2h0O1xuICAgICAgICAgICAgdzEgPSAnYXV0byc7XG4gICAgICAgICAgICByYXRpbyA9IGgwIC8gaDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3MSA9IHRoaXMuaW1nQm94V2lkdGg7XG4gICAgICAgICAgICBoMSA9ICdhdXRvJztcbiAgICAgICAgICAgIHJhdGlvID0gdzAgLyB3MTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWN0aXZlRGF0YSA9IHtcbiAgICAgICAgICAgIHcwOiB3MCxcbiAgICAgICAgICAgIGgwOiBoMCxcbiAgICAgICAgICAgIHcxOiB3MSxcbiAgICAgICAgICAgIGgxOiBoMSxcbiAgICAgICAgICAgIHJhdGlvOiByYXRpbyxcbiAgICAgICAgICAgIGltZ1JhdGlvOiBpbWdSYXRpbyxcbiAgICAgICAgICAgIGN2czogdGFyZ2V0SW1nXG4gICAgICAgIH1cbiAgICB9XG4gICAgX2dldFJvdGF0ZU51bShkaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5yb3RhdGVOdW0gKz0gZGlyZWN0aW9uO1xuICAgICAgICBpZiAodGhpcy5yb3RhdGVOdW0gPiAzKSB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZU51bSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucm90YXRlTnVtIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5yb3RhdGVOdW0gPSAzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3Jlc2V0KCkge1xuICAgICAgICB0aGlzLnJvdGF0ZU51bSA9IDA7XG4gICAgICAgIHRoaXMuc2NhbGVSYXRpbyA9IDE7XG5cbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gdGhpcy5yZXN1bHRMaXN0LnNsaWNlKDAsIDEpO1xuICAgICAgICB0aGlzLmltZ0hhbmRsZXIgPSBuZXcgSW1nSGFuZGxlcih7XG4gICAgICAgICAgICBzb3VyY2VJbWc6IHRoaXMucmVzdWx0TGlzdFswXVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICB9XG4gICAgc2F2ZShjdnMpIHtcbiAgICAgICAgbGV0IG1heCA9IHRoaXMubWF4U2l6ZSAqIDEwMjQ7XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5fY29tcHJlc3MoY3ZzLCBtYXgsIGZhbHNlKTtcbiAgICAgICAgLy8g5qih5ouf5aSE55CG5ZCO5Zu+54mH5bGV56S6XG4gICAgICAgICQoJyNKLXByZXZpZXctY29udGFpbmVyJykuYXBwZW5kKCQoJzxpbWc+JykuYXR0cignc3JjJywgZGF0YSkpO1xuXG4gICAgICAgIHRoaXMuX2dldEZvcm1EYXRhKGRhdGEpO1xuICAgIH1cbiAgICBfZ2V0Rm9ybURhdGEoZGF0YSkge1xuXG4gICAgICAgIGxldCBibG9iID0gYmFzZTY0RGF0YTJCbG9iKGRhdGEsIHRoaXMubWltZSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdlbmQgY29tcHJlc3M6ICcgKyBNYXRoLmNlaWwoYmxvYi5zaXplIC8gMTAyNCkpO1xuICAgICAgICBsZXQgZm9ybURhdGEgPSBibG9iMkZvcm1EYXRhKGJsb2IpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiL3NhdmVGaWxlXCIsXG4gICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGRhdGE6IGZvcm1EYXRhLFxuICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLCAvLyDkuI3lpITnkIbmlbDmja5cbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSAvLyDkuI3orr7nva7lhoXlrrnnsbvlnotcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIOWPquWvuSdpbWFnZS9qcGVnJ+agvOW8j+acieaViFxuICAgIF9jb21wcmVzcyhjdnMsIG1heCwgaXNTaW1wbGUpIHtcbiAgICAgICAgbGV0IHF1YWxpdHkgPSAxO1xuICAgICAgICBsZXQgbWluV0ggPSA4MDA7XG4gICAgICAgIGxldCBzY2FsZVJhdGlvID0gMC45O1xuICAgICAgICBsZXQgcXVhbGl0eVN0ZXAgPSAwLjE7XG4gICAgICAgIC8vIOi0qOmHj+WOi+e8qeWPquaUr+aMgSdpbWFnZS9qcGVnJ++8jCdpbWFnZS93ZWJwJyhjaHJvbWXmlK/mjIEpXG4gICAgICAgIGxldCBxdWFsaXR5VHlwZSA9ICdpbWFnZS9qcGVnJztcblxuICAgICAgICBsZXQgd2lkdGggPSBjdnMud2lkdGg7XG4gICAgICAgIGxldCBoZWlnaHQgPSBjdnMuaGVpZ2h0O1xuICAgICAgICBsZXQgY3ZzUmF0aW8gPSB3aWR0aCAvIGhlaWdodDtcbiAgICAgICAgbGV0IGRhdGEgPSBjdnMudG9EYXRhVVJMKHF1YWxpdHlUeXBlLCAxLjApO1xuICAgICAgICBsZXQgc2l6ZTAgPSBnZXRCYXNlNjRTaXplKGRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygnc3RhcnQgY29tcHJlc3M6ICcgKyBNYXRoLmNlaWwoc2l6ZTAgLyAxMDI0KSk7XG4gICAgICAgIGlmIChpc1NpbXBsZSkge1xuICAgICAgICAgICAgd2hpbGUgKHNpemUwID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgcXVhbGl0eSA9IE1hdGguZmxvb3IobWF4IC8gc2l6ZTAgKiAxMCkgLyAxMDtcbiAgICAgICAgICAgICAgICBkYXRhID0gY3ZzLnRvRGF0YVVSTChxdWFsaXR5VHlwZSwgcXVhbGl0eSk7XG4gICAgICAgICAgICAgICAgc2l6ZTAgPSBnZXRCYXNlNjRTaXplKGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDkvJjlhYjnvKnmlL5cbiAgICAgICAgICAgIHdoaWxlIChzaXplMCA+IG1heCAmJiAod2lkdGggPiBtaW5XSCB8fCBoZWlnaHQgPiBtaW5XSCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3V2lkdGgsIG5ld0hlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoY3ZzUmF0aW8gPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1dpZHRoID0gd2lkdGggKiBzY2FsZVJhdGlvID4gbWluV0ggPyB3aWR0aCAqIHNjYWxlUmF0aW8gOiBtaW5XSDtcbiAgICAgICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gbmV3V2lkdGggLyBjdnNSYXRpbztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdIZWlnaHQgPSBoZWlnaHQgKiBzY2FsZVJhdGlvID4gbWluV0ggPyBoZWlnaHQgKiBzY2FsZVJhdGlvIDogbWluV0g7XG4gICAgICAgICAgICAgICAgICAgIG5ld1dpZHRoID0gbmV3SGVpZ2h0ICogY3ZzUmF0aW87XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IGNhbnZhcyA9IGdldENhbnZhcyhuZXdXaWR0aCwgbmV3SGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGN2cywgMCwgMCwgbmV3V2lkdGgsIG5ld0hlaWdodCk7XG5cbiAgICAgICAgICAgICAgICBkYXRhID0gY2FudmFzLnRvRGF0YVVSTCh0aGlzLm1pbWUsIDEuMCk7XG4gICAgICAgICAgICAgICAgc2l6ZTAgPSBnZXRCYXNlNjRTaXplKGRhdGEpO1xuICAgICAgICAgICAgICAgIHdpZHRoID0gbmV3V2lkdGg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuICAgICAgICAgICAgICAgIGN2cyA9IGNhbnZhcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOmZjeS9jui0qOmHj1xuICAgICAgICAgICAgd2hpbGUgKHNpemUwID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgcXVhbGl0eSAtPSBxdWFsaXR5U3RlcDtcbiAgICAgICAgICAgICAgICBkYXRhID0gY3ZzLnRvRGF0YVVSTChxdWFsaXR5VHlwZSwgcXVhbGl0eSk7XG4gICAgICAgICAgICAgICAgc2l6ZTAgPSBnZXRCYXNlNjRTaXplKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCdlbmQgY29tcHJlc3M6ICcgKyBNYXRoLmNlaWwoc2l6ZTAgLyAxMDI0KSk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBkZXN0b3J5KCkge1xuICAgICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcbiAgICB9XG4gICAgc2hvd0RpYWxvZygpIHtcbiAgICAgICAgdGhpcy4kZWwuc2hvdygpO1xuICAgIH1cbiAgICBoaWRlRGlhbG9nKCkge1xuICAgICAgICB0aGlzLiRlbC5oaWRlKCk7XG4gICAgfVxuXG59XG5cblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFBpcGVJbWc7XG59IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFBpcGVJbWc7XG4gICAgfSk7XG59IGVsc2Uge1xuICAgIHdpbmRvdy5QaXBlSW1nID0gUGlwZUltZztcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/pipeImg.js\n");

/***/ }),

/***/ "./src/js/pipeImg.tpl":
/*!****************************!*\
  !*** ./src/js/pipeImg.tpl ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = \"<div class=\\\"pipeImg-wrapper J-pipe-wrapper\\\">\\r\\n    <div class=\\\"pipe-header\\\">\\r\\n        <ul class=\\\"menu\\\">\\r\\n            <li class=\\\"item active J-menu-item\\\"><a class=\\\"btn J-btn-rotate\\\" href=\\\"javascript:void(0)\\\">旋转</a></li>\\r\\n            <li class=\\\"item J-menu-item\\\"><a class=\\\"btn J-btn-crop\\\" href=\\\"javascript:void(0)\\\">裁剪</a></li>\\r\\n            <li class=\\\"item J-menu-item\\\"><a class=\\\"btn J-btn-scale\\\" href=\\\"javascript:void(0)\\\">缩放</a></li>\\r\\n            <li class=\\\"item J-menu-item\\\">\\r\\n                <a class=\\\"btn J-btn-mark\\\" href=\\\"javascript:void(0)\\\">添加水印</a>\\r\\n            </li>\\r\\n            <li class=\\\"item J-menu-item\\\">\\r\\n                <a class=\\\"btn J-btn-mark-all\\\" href=\\\"javascript:void(0)\\\">批量添加水印</a>\\r\\n            </li>\\r\\n        </ul>\\r\\n        <a class=\\\"btn btn-close J-button-close\\\" href=\\\"javascript:void(0)\\\">关闭</a>\\r\\n    </div>\\r\\n    <div class=\\\"pipe-content\\\">\\r\\n        <!-- 旋转面板 -->\\r\\n        <div class=\\\"panel active J-panel J-rotate-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box\\\">\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"size\\\">\\r\\n                        <span class=\\\"J-num-width\\\"></span>*<span class=\\\"J-num-height\\\"></span>px\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <a class=\\\"btn btn-rotate J-btn-rotate-left\\\" href=\\\"javascript:void(0)\\\">逆时针旋转</a>\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <a class=\\\"btn btn-rotate J-btn-rotate-right\\\" href=\\\"javascript:void(0)\\\">顺时针旋转</a>\\r\\n                </div>\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-main J-button-save\\\" href=\\\"javascript:void(0)\\\">保存</a>\\r\\n                    <a class=\\\"button button-reset J-button-reset\\\" href=\\\"javascript:void(0)\\\">重置</a>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <!-- 裁剪面板 -->\\r\\n        <div class=\\\"panel J-panel J-crop-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box J-crop-box\\\">\\r\\n\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <input class=\\\"num-width J-num-width\\\" type=\\\"text\\\">\\r\\n                <label for=\\\"fixRatio\\\">约束比例</label>\\r\\n                <input class=\\\"fix-ratio J-fix-ratio\\\" type=\\\"checkbox\\\" name=\\\"fixRatio\\\">\\r\\n                <input class=\\\"num-height J-num-height\\\" type=\\\"text\\\">\\r\\n                <span class=\\\"txt\\\">px</span>\\r\\n\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-main J-button-save\\\" href=\\\"javascript:void(0)\\\">保存</a>\\r\\n                    <a class=\\\"button button-reset J-button-reset\\\" href=\\\"javascript:void(0)\\\">重置</a>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <!-- 缩放面板 -->\\r\\n        <div class=\\\"panel J-panel J-scale-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box\\\"></div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <input class=\\\"num-width J-num-width\\\" type=\\\"text\\\">\\r\\n                <span class=\\\"txt\\\">X</span>\\r\\n                <input class=\\\"num-height J-num-height\\\" type=\\\"text\\\">\\r\\n                <span class=\\\"txt\\\">px</span>\\r\\n                <input class=\\\"J-scale-range\\\" type=\\\"range\\\" name=\\\"scaleRatio\\\" min=\\\"1\\\" max=\\\"20\\\" step=\\\"1\\\" value=\\\"20\\\">\\r\\n\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-main J-button-save\\\" href=\\\"javascript:void(0)\\\">保存</a>\\r\\n                    <a class=\\\"button button-reset J-button-reset\\\" href=\\\"javascript:void(0)\\\">重置</a>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <!-- 添加水印面板 -->\\r\\n        <div class=\\\"panel J-panel J-mark-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box J-mark-box\\\">\\r\\n\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <div class=\\\"item\\\">\\r\\n                    <label for=\\\"color\\\">颜色：</label>\\r\\n                    <input class=\\\"J-color\\\" type=\\\"radio\\\" name=\\\"color\\\" value=\\\"0\\\" autocomplete=\\\"off\\\">\\r\\n                    <input class=\\\"J-color\\\" type=\\\"radio\\\" name=\\\"color\\\" value=\\\"1\\\" checked autocomplete=\\\"off\\\">\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <label for=\\\"position\\\">位置：</label>\\r\\n                    <input class=\\\"J-position\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"0\\\" checked autocomplete=\\\"off\\\">\\r\\n                    <input class=\\\"J-position\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"1\\\" autocomplete=\\\"off\\\">\\r\\n                    <input class=\\\"J-position\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"2\\\" autocomplete=\\\"off\\\">\\r\\n                    <input class=\\\"J-position\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"3\\\" autocomplete=\\\"off\\\">\\r\\n                    <input class=\\\"J-position\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"4\\\" autocomplete=\\\"off\\\">\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n\\r\\n                    <label for=\\\"opacity\\\">透明度：</label>\\r\\n                    <input class=\\\"J-opacity\\\" name=\\\"opacity\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"1\\\" step=\\\"0.1\\\" value=\\\"0.8\\\">\\r\\n                </div>\\r\\n\\r\\n                <select class=\\\"J-markTxt\\\" name=\\\"markTxt\\\">\\r\\n                    <option value=\\\"0\\\" selected=\\\"selected\\\">展示厅</option>\\r\\n                    <option value=\\\"1\\\">公司名称</option>\\r\\n                </select>\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-confirm J-button-confirm\\\" href=\\\"javascript:void(0)\\\">确定</a>\\r\\n                    <a class=\\\"button button-cancel J-button-cancel\\\" href=\\\"javascript:void(0)\\\">取消</a>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <!-- 批量添加水印面板 -->\\r\\n        <div class=\\\"panel J-panel J-mark-all-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box J-mark-box-all\\\">\\r\\n\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <div class=\\\"item\\\">\\r\\n                    <label for=\\\"colorAll\\\">颜色：</label>\\r\\n                    <input class=\\\"J-color\\\" type=\\\"radio\\\" name=\\\"colorAll\\\" value=\\\"0\\\" autocomplete=\\\"off\\\">\\r\\n                    <input class=\\\"J-color\\\" type=\\\"radio\\\" name=\\\"colorAll\\\" value=\\\"1\\\" checked autocomplete=\\\"off\\\">\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <label for=\\\"positionAll\\\">位置：</label>\\r\\n                    <input class=\\\"J-position\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"0\\\" checked autocomplete=\\\"off\\\">\\r\\n                    <input class=\\\"J-position\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"1\\\" autocomplete=\\\"off\\\">\\r\\n                    <input class=\\\"J-position\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"2\\\" autocomplete=\\\"off\\\">\\r\\n                    <input class=\\\"J-position\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"3\\\" autocomplete=\\\"off\\\">\\r\\n                    <input class=\\\"J-position\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"4\\\" autocomplete=\\\"off\\\">\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n\\r\\n                    <label for=\\\"opacityAll\\\">透明度：</label>\\r\\n                    <input class=\\\"J-opacity\\\" name=\\\"opacityAll\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"1\\\" step=\\\"0.1\\\" value=\\\"0.8\\\">\\r\\n                </div>\\r\\n\\r\\n                <select class=\\\"J-markTxt\\\" name=\\\"markTxtAll\\\">\\r\\n                    <option value=\\\"0\\\" selected=\\\"selected\\\">展示厅</option>\\r\\n                    <option value=\\\"1\\\">公司名称</option>\\r\\n                </select>\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-confirm J-button-confirm-all\\\" href=\\\"javascript:void(0)\\\">保存</a>\\r\\n                    <a class=\\\"button button-cancel J-button-cancel\\\" href=\\\"javascript:void(0)\\\">取消</a>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"pipe-footer J-imgs-thumbnail\\\"></div>\\r\\n</div>\\r\\n\"//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvcGlwZUltZy50cGw/NmM2MSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIuL3NyYy9qcy9waXBlSW1nLnRwbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJwaXBlSW1nLXdyYXBwZXIgSi1waXBlLXdyYXBwZXJcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJwaXBlLWhlYWRlclxcXCI+XFxyXFxuICAgICAgICA8dWwgY2xhc3M9XFxcIm1lbnVcXFwiPlxcclxcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwiaXRlbSBhY3RpdmUgSi1tZW51LWl0ZW1cXFwiPjxhIGNsYXNzPVxcXCJidG4gSi1idG4tcm90YXRlXFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiPuaXi+i9rDwvYT48L2xpPlxcclxcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwiaXRlbSBKLW1lbnUtaXRlbVxcXCI+PGEgY2xhc3M9XFxcImJ0biBKLWJ0bi1jcm9wXFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiPuijgeWJqjwvYT48L2xpPlxcclxcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwiaXRlbSBKLW1lbnUtaXRlbVxcXCI+PGEgY2xhc3M9XFxcImJ0biBKLWJ0bi1zY2FsZVxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj7nvKnmlL48L2E+PC9saT5cXHJcXG4gICAgICAgICAgICA8bGkgY2xhc3M9XFxcIml0ZW0gSi1tZW51LWl0ZW1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnRuIEotYnRuLW1hcmtcXFwiIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCI+5re75Yqg5rC05Y2wPC9hPlxcclxcbiAgICAgICAgICAgIDwvbGk+XFxyXFxuICAgICAgICAgICAgPGxpIGNsYXNzPVxcXCJpdGVtIEotbWVudS1pdGVtXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImJ0biBKLWJ0bi1tYXJrLWFsbFxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj7mibnph4/mt7vliqDmsLTljbA8L2E+XFxyXFxuICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgIDwvdWw+XFxyXFxuICAgICAgICA8YSBjbGFzcz1cXFwiYnRuIGJ0bi1jbG9zZSBKLWJ1dHRvbi1jbG9zZVxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj7lhbPpl608L2E+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJwaXBlLWNvbnRlbnRcXFwiPlxcclxcbiAgICAgICAgPCEtLSDml4vovazpnaLmnb8gLS0+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbCBhY3RpdmUgSi1wYW5lbCBKLXJvdGF0ZS1wYW5lbFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW1nLWJveCBKLWltZy1ib3hcXFwiPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtZm9vdGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzaXplXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiSi1udW0td2lkdGhcXFwiPjwvc3Bhbj4qPHNwYW4gY2xhc3M9XFxcIkotbnVtLWhlaWdodFxcXCI+PC9zcGFuPnB4XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImJ0biBidG4tcm90YXRlIEotYnRuLXJvdGF0ZS1sZWZ0XFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiPumAhuaXtumSiOaXi+i9rDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImJ0biBidG4tcm90YXRlIEotYnRuLXJvdGF0ZS1yaWdodFxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj7pobrml7bpkojml4vovaw8L2E+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b25zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJidXR0b24gYnV0dG9uLW1haW4gSi1idXR0b24tc2F2ZVxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj7kv53lrZg8L2E+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnV0dG9uIGJ1dHRvbi1yZXNldCBKLWJ1dHRvbi1yZXNldFxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj7ph43nva48L2E+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8IS0tIOijgeWJqumdouadvyAtLT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInBhbmVsIEotcGFuZWwgSi1jcm9wLXBhbmVsXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbWctYm94IEotaW1nLWJveCBKLWNyb3AtYm94XFxcIj5cXHJcXG5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWZvb3RlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwibnVtLXdpZHRoIEotbnVtLXdpZHRoXFxcIiB0eXBlPVxcXCJ0ZXh0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiZml4UmF0aW9cXFwiPue6puadn+avlOS+izwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiZml4LXJhdGlvIEotZml4LXJhdGlvXFxcIiB0eXBlPVxcXCJjaGVja2JveFxcXCIgbmFtZT1cXFwiZml4UmF0aW9cXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcIm51bS1oZWlnaHQgSi1udW0taGVpZ2h0XFxcIiB0eXBlPVxcXCJ0ZXh0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInR4dFxcXCI+cHg8L3NwYW4+XFxyXFxuXFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJ1dHRvbnNcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImJ1dHRvbiBidXR0b24tbWFpbiBKLWJ1dHRvbi1zYXZlXFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiPuS/neWtmDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJidXR0b24gYnV0dG9uLXJlc2V0IEotYnV0dG9uLXJlc2V0XFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiPumHjee9rjwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwhLS0g57yp5pS+6Z2i5p2/IC0tPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwicGFuZWwgSi1wYW5lbCBKLXNjYWxlLXBhbmVsXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbWctYm94IEotaW1nLWJveFxcXCI+PC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGVudC1mb290ZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcIm51bS13aWR0aCBKLW51bS13aWR0aFxcXCIgdHlwZT1cXFwidGV4dFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ0eHRcXFwiPlg8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwibnVtLWhlaWdodCBKLW51bS1oZWlnaHRcXFwiIHR5cGU9XFxcInRleHRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwidHh0XFxcIj5weDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJKLXNjYWxlLXJhbmdlXFxcIiB0eXBlPVxcXCJyYW5nZVxcXCIgbmFtZT1cXFwic2NhbGVSYXRpb1xcXCIgbWluPVxcXCIxXFxcIiBtYXg9XFxcIjIwXFxcIiBzdGVwPVxcXCIxXFxcIiB2YWx1ZT1cXFwiMjBcXFwiPlxcclxcblxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b25zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJidXR0b24gYnV0dG9uLW1haW4gSi1idXR0b24tc2F2ZVxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj7kv53lrZg8L2E+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnV0dG9uIGJ1dHRvbi1yZXNldCBKLWJ1dHRvbi1yZXNldFxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj7ph43nva48L2E+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcblxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8IS0tIOa3u+WKoOawtOWNsOmdouadvyAtLT5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInBhbmVsIEotcGFuZWwgSi1tYXJrLXBhbmVsXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbWctYm94IEotaW1nLWJveCBKLW1hcmstYm94XFxcIj5cXHJcXG5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWZvb3RlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW1cXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwiY29sb3JcXFwiPuminOiJsu+8mjwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcIkotY29sb3JcXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJjb2xvclxcXCIgdmFsdWU9XFxcIjBcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1jb2xvclxcXCIgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcImNvbG9yXFxcIiB2YWx1ZT1cXFwiMVxcXCIgY2hlY2tlZCBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpdGVtXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcInBvc2l0aW9uXFxcIj7kvY3nva7vvJo8L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJKLXBvc2l0aW9uXFxcIiB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwicG9zaXRpb25cXFwiIHZhbHVlPVxcXCIwXFxcIiBjaGVja2VkIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1wb3NpdGlvblxcXCIgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInBvc2l0aW9uXFxcIiB2YWx1ZT1cXFwiMVxcXCIgYXV0b2NvbXBsZXRlPVxcXCJvZmZcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJKLXBvc2l0aW9uXFxcIiB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwicG9zaXRpb25cXFwiIHZhbHVlPVxcXCIyXFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcIkotcG9zaXRpb25cXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJwb3NpdGlvblxcXCIgdmFsdWU9XFxcIjNcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1wb3NpdGlvblxcXCIgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInBvc2l0aW9uXFxcIiB2YWx1ZT1cXFwiNFxcXCIgYXV0b2NvbXBsZXRlPVxcXCJvZmZcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCI+XFxyXFxuXFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJvcGFjaXR5XFxcIj7pgI/mmI7luqbvvJo8L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJKLW9wYWNpdHlcXFwiIG5hbWU9XFxcIm9wYWNpdHlcXFwiIHR5cGU9XFxcInJhbmdlXFxcIiBtaW49XFxcIjBcXFwiIG1heD1cXFwiMVxcXCIgc3RlcD1cXFwiMC4xXFxcIiB2YWx1ZT1cXFwiMC44XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XFxcIkotbWFya1R4dFxcXCIgbmFtZT1cXFwibWFya1R4dFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIwXFxcIiBzZWxlY3RlZD1cXFwic2VsZWN0ZWRcXFwiPuWxleekuuWOhTwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMVxcXCI+5YWs5Y+45ZCN56ewPC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b25zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJidXR0b24gYnV0dG9uLWNvbmZpcm0gSi1idXR0b24tY29uZmlybVxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj7noa7lrpo8L2E+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnV0dG9uIGJ1dHRvbi1jYW5jZWwgSi1idXR0b24tY2FuY2VsXFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiPuWPlua2iDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuXFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwhLS0g5om56YeP5re75Yqg5rC05Y2w6Z2i5p2/IC0tPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwicGFuZWwgSi1wYW5lbCBKLW1hcmstYWxsLXBhbmVsXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbWctYm94IEotaW1nLWJveCBKLW1hcmstYm94LWFsbFxcXCI+XFxyXFxuXFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGVudC1mb290ZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpdGVtXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XFxcImNvbG9yQWxsXFxcIj7popzoibLvvJo8L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJKLWNvbG9yXFxcIiB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwiY29sb3JBbGxcXFwiIHZhbHVlPVxcXCIwXFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcIkotY29sb3JcXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJjb2xvckFsbFxcXCIgdmFsdWU9XFxcIjFcXFwiIGNoZWNrZWQgYXV0b2NvbXBsZXRlPVxcXCJvZmZcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVxcXCJwb3NpdGlvbkFsbFxcXCI+5L2N572u77yaPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1wb3NpdGlvblxcXCIgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInBvc2l0aW9uQWxsXFxcIiB2YWx1ZT1cXFwiMFxcXCIgY2hlY2tlZCBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcIkotcG9zaXRpb25cXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJwb3NpdGlvbkFsbFxcXCIgdmFsdWU9XFxcIjFcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1wb3NpdGlvblxcXCIgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInBvc2l0aW9uQWxsXFxcIiB2YWx1ZT1cXFwiMlxcXCIgYXV0b2NvbXBsZXRlPVxcXCJvZmZcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJKLXBvc2l0aW9uXFxcIiB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwicG9zaXRpb25BbGxcXFwiIHZhbHVlPVxcXCIzXFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcIkotcG9zaXRpb25cXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJwb3NpdGlvbkFsbFxcXCIgdmFsdWU9XFxcIjRcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW1cXFwiPlxcclxcblxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cXFwib3BhY2l0eUFsbFxcXCI+6YCP5piO5bqm77yaPC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1vcGFjaXR5XFxcIiBuYW1lPVxcXCJvcGFjaXR5QWxsXFxcIiB0eXBlPVxcXCJyYW5nZVxcXCIgbWluPVxcXCIwXFxcIiBtYXg9XFxcIjFcXFwiIHN0ZXA9XFxcIjAuMVxcXCIgdmFsdWU9XFxcIjAuOFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcblxcclxcbiAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJKLW1hcmtUeHRcXFwiIG5hbWU9XFxcIm1hcmtUeHRBbGxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMFxcXCIgc2VsZWN0ZWQ9XFxcInNlbGVjdGVkXFxcIj7lsZXnpLrljoU8L29wdGlvbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XFxcIjFcXFwiPuWFrOWPuOWQjeensDwvb3B0aW9uPlxcclxcbiAgICAgICAgICAgICAgICA8L3NlbGVjdD5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnV0dG9uIGJ1dHRvbi1jb25maXJtIEotYnV0dG9uLWNvbmZpcm0tYWxsXFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiPuS/neWtmDwvYT5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJidXR0b24gYnV0dG9uLWNhbmNlbCBKLWJ1dHRvbi1jYW5jZWxcXFwiIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCI+5Y+W5raIPC9hPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwicGlwZS1mb290ZXIgSi1pbWdzLXRodW1ibmFpbFxcXCI+PC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuXCIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/pipeImg.tpl\n");

/***/ }),

/***/ "./src/js/util.js":
/*!************************!*\
  !*** ./src/js/util.js ***!
  \************************/
/*! exports provided: drag, loadImage, loadImages, getCanvas, getBase64Size, compress, base64Data2Blob, blob2FormData, chooseFile, uploadFile, getImgPromise, _$ */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"drag\", function() { return drag; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loadImage\", function() { return loadImage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loadImages\", function() { return loadImages; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getCanvas\", function() { return getCanvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getBase64Size\", function() { return getBase64Size; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"compress\", function() { return compress; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"base64Data2Blob\", function() { return base64Data2Blob; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blob2FormData\", function() { return blob2FormData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"chooseFile\", function() { return chooseFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uploadFile\", function() { return uploadFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getImgPromise\", function() { return getImgPromise; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_$\", function() { return _$; });\n//拖拽\nfunction drag(moveElement, dragBar = document, container, cb) {\n    if (!moveElement) return;\n\n    var draging = false,\n        x0, y0, mLeft0, mTop0, mLeft1, mTop1;\n\n    var mousedownHandler = (e) => {\n        e = e || window.event;\n        x0 = e.clientX;\n        y0 = e.clientY;\n        mLeft0 = moveElement.offsetLeft;\n        mTop0 = moveElement.offsetTop;\n\n        draging = true;\n\n    };\n    var mousemoveHandler = (e) => {\n        e = e || window.event;\n        if (draging) {\n            var x1 = e.clientX,\n                y1 = e.clientY;\n            mLeft1 = x1 - x0 + mLeft0;\n            mTop1 = y1 - y0 + mTop0;\n\n\n            if (container) {\n                // 计算可移动位置的大小， 保证元素不会超过可移动范围\n                // 此处就是父元素的宽度减去子元素宽度\n                var width = container.clientWidth - moveElement.offsetWidth;\n                var height = container.clientHeight - moveElement.offsetHeight;\n                // min方法保证不会超过右边界，max保证不会超过左边界\n                mLeft1 = Math.min(Math.max(0, mLeft1), width);\n                mTop1 = Math.min(Math.max(0, mTop1), height);\n            }\n\n\n            moveElement.style.left = mLeft1;\n            moveElement.style.top = mTop1;\n\n            typeof cb === 'function' && cb(mLeft1, mTop1);\n        }\n    };\n    var mouseupHandler = (e) => {\n        draging = false;\n    }\n\n    if (window.addEventListener) {\n        dragBar.addEventListener('mousedown', mousedownHandler, false);\n        document.addEventListener('mousemove', mousemoveHandler, false);\n        document.addEventListener('mouseup', mouseupHandler, false);\n    }\n}\n\nfunction getImgPromise(src) {\n    return new Promise((resolve, reject) => {\n        let image = new Image();\n        // 跨域报错处理（Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.）\n        image.setAttribute('crossorigin', 'anonymous');\n        image.src = src;\n        image.onload = () => {\n            resolve(image);\n        };\n        image.onerror = () => {\n            reject('Error: image error!');\n        };\n    });\n}\n// 加载图片\nfunction loadImage(src, success, failure) {\n    var image = new Image();\n    // 跨域报错处理（Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.）\n    image.setAttribute('crossorigin', 'anonymous');\n    image.src = src;\n    image.onload = function () {\n        typeof success === 'function' && success(image);\n    };\n    image.onerror = function () {\n        typeof failure === 'function' && failure();\n    };\n}\n\nfunction loadImages(srcList, success, failure) {\n    var images = [];\n    var index = srcList.length;\n    var _loadImage = () => {\n        if (index === 0) {\n            return false;\n        }\n        var image = new Image();\n        // 跨域报错处理（Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.）\n        image.setAttribute('crossorigin', 'anonymous');\n        image.src = srcList[--index];\n        image.onload = function () {\n            images.push(image);\n            if (images.length === srcList.length) {\n                typeof success === 'function' && success(images);\n                return false;\n            }\n            _loadImage();\n        };\n        image.onerror = function () {\n            typeof failure === 'function' && failure();\n        };\n    };\n    _loadImage();\n\n}\n// 创建cavas\nfunction getCanvas(width, height) {\n    let canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n}\n\n//获取base64图片大小\nfunction getBase64Size(base64Data) {\n    // 'data:image/jpeg;base64,xxxxxx...xxx='\n    var str = base64Data.replace(/^data:image\\/[\\w]*;base64,$/, '');\n    var equalIndex = str.indexOf('=');\n    if (equalIndex > 0) {\n        str = str.substring(0, equalIndex);\n    }\n    var strLength = str.length;\n    return parseInt(strLength - (strLength / 8) * 2);\n}\n// 压缩只支持image/jpeg和image/webp\nfunction compress(img, quality = 1, width, height, mime = 'images/jpeg') { //  Image 对象，或者是 Canvas 元素\n    var canvas = getCanvas(width, height),\n        ctx = canvas.getContext(\"2d\");\n    if (width && height) {\n        ctx.drawImage(img, 0, 0, width, height);\n    } else {\n        ctx.drawImage(img, 0, 0);\n    }\n\n    var base64 = canvas.toDataURL(mime);\n    if (quality < 1) {\n        base64 = canvas.toDataURL(mime, quality);\n    }\n\n    return base64; // 压缩后的base64串\n}\n\n\nfunction base64Data2Blob(base64Data, mime) {\n    var binStr = atob(base64Data.split(',')[1]),\n        len = binStr.length,\n        arr = new Uint8Array(len);\n    if (!mime) {\n        // mime = base64Data.split(',')[0].split(':')[1].split(';')[0];\n        mime = base64Data.substring(base64Data.indexOf('data:') + 5, base64Data.indexOf(';base64'));\n    }\n\n    for (var i = 0; i < len; i++) {\n        arr[i] = binStr.charCodeAt(i);\n    }\n\n    return new Blob([arr], {\n        type: mime\n    });\n\n}\n\nfunction blob2FormData(blob, fileName) {\n    var formData = new FormData();\n    formData.append('file', blob);\n    if (!fileName) {\n        fileName = new Date().getTime();\n    }\n    formData.append(\"fileName\", fileName);\n\n    return formData;\n}\n\n// canvas转成blob对象，type值为image/jpeg或者image/webp时，可使用encoderOptions（0-1）设置图片展示质量。\nfunction canvas2Blob(canvas, callback, type, quality) {\n    // Polyfill\n    if (!HTMLCanvasElement.prototype.toBlob) {\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n            value: function (callback, type, quality) {\n\n                var binStr = atob(this.toDataURL('image/jpeg', quality).split(',')[1]),\n                    len = binStr.length,\n                    arr = new Uint8Array(len);\n\n                for (var i = 0; i < len; i++) {\n                    arr[i] = binStr.charCodeAt(i);\n                }\n\n                callback(new Blob([arr], {\n                    type: type || 'image/png'\n                }));\n            }\n        });\n    }\n\n    canvas.toBlob(callback, type, quality);\n}\n\nfunction uploadFile(formData, url) {\n\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open('POST', url); //注意跨域问题\n    xmlHttp.send(formData);\n    xmlHttp.onreadystatechange = function () {\n        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\n            console.log(xmlHttp.responseText);\n        } else {\n            console.log(xmlHttp.statusText);\n        }\n    };\n}\n// 选择文件\nfunction chooseFile(btn, cb, validFileCallback) {\n    let $btn = typeof btn === \"string\" ? document.querySelector(btn) : btn;\n    let $file = $btn.querySelector('input[type=file]');\n    if (!$file) {\n        let fileNode = document.createElement('input');\n        fileNode.setAttribute('type', 'file');\n\n        fileNode.style.cssText = 'display: none;';\n        $btn.appendChild(fileNode);\n        $file = $btn.querySelector('input[type=file]');\n    }\n\n    $file.addEventListener('change', function (e) {\n        if (this.files.length > 0) {\n\n            let oFile = this.files[0];\n\n            let validFile = true;\n            if (typeof validFileCallback === 'function' && validFileCallback(oFile) === false) {\n                validFile = false;\n            }\n\n            if (validFile) {\n                let reader = new FileReader();\n                reader.readAsDataURL(oFile);\n\n                reader.onload = function () {\n                    typeof cb === 'function' && cb(this.result);\n                }\n            } else {\n                console.log('onValidateFile function return false')\n            }\n\n        }\n    }, false);\n\n    // 阻止冒泡导致两次触发selectBtn\n    $file.addEventListener('click', (e) => {\n        e.stopPropagation();\n    })\n\n    $file.click();\n\n}\nfunction _$(ele) {\n    return typeof ele === 'string' ? document.querySelector(ele) : ele;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbC5qcz9mNjQ0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEU7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0I7QUFDbEI7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUU7QUFDakUsMEZBQTBGO0FBQzFGOztBQUVBLG1CQUFtQixTQUFTO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLCtCQUErQixTQUFTO0FBQ3hDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFlQyIsImZpbGUiOiIuL3NyYy9qcy91dGlsLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy/mi5bmi71cbmZ1bmN0aW9uIGRyYWcobW92ZUVsZW1lbnQsIGRyYWdCYXIgPSBkb2N1bWVudCwgY29udGFpbmVyLCBjYikge1xuICAgIGlmICghbW92ZUVsZW1lbnQpIHJldHVybjtcblxuICAgIHZhciBkcmFnaW5nID0gZmFsc2UsXG4gICAgICAgIHgwLCB5MCwgbUxlZnQwLCBtVG9wMCwgbUxlZnQxLCBtVG9wMTtcblxuICAgIHZhciBtb3VzZWRvd25IYW5kbGVyID0gKGUpID0+IHtcbiAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgICAgICB4MCA9IGUuY2xpZW50WDtcbiAgICAgICAgeTAgPSBlLmNsaWVudFk7XG4gICAgICAgIG1MZWZ0MCA9IG1vdmVFbGVtZW50Lm9mZnNldExlZnQ7XG4gICAgICAgIG1Ub3AwID0gbW92ZUVsZW1lbnQub2Zmc2V0VG9wO1xuXG4gICAgICAgIGRyYWdpbmcgPSB0cnVlO1xuXG4gICAgfTtcbiAgICB2YXIgbW91c2Vtb3ZlSGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcbiAgICAgICAgaWYgKGRyYWdpbmcpIHtcbiAgICAgICAgICAgIHZhciB4MSA9IGUuY2xpZW50WCxcbiAgICAgICAgICAgICAgICB5MSA9IGUuY2xpZW50WTtcbiAgICAgICAgICAgIG1MZWZ0MSA9IHgxIC0geDAgKyBtTGVmdDA7XG4gICAgICAgICAgICBtVG9wMSA9IHkxIC0geTAgKyBtVG9wMDtcblxuXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgLy8g6K6h566X5Y+v56e75Yqo5L2N572u55qE5aSn5bCP77yMIOS/neivgeWFg+e0oOS4jeS8mui2hei/h+WPr+enu+WKqOiMg+WbtFxuICAgICAgICAgICAgICAgIC8vIOatpOWkhOWwseaYr+eItuWFg+e0oOeahOWuveW6puWHj+WOu+WtkOWFg+e0oOWuveW6plxuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aCAtIG1vdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBjb250YWluZXIuY2xpZW50SGVpZ2h0IC0gbW92ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIC8vIG1pbuaWueazleS/neivgeS4jeS8mui2hei/h+WPs+i+ueeVjO+8jG1heOS/neivgeS4jeS8mui2hei/h+W3pui+ueeVjFxuICAgICAgICAgICAgICAgIG1MZWZ0MSA9IE1hdGgubWluKE1hdGgubWF4KDAsIG1MZWZ0MSksIHdpZHRoKTtcbiAgICAgICAgICAgICAgICBtVG9wMSA9IE1hdGgubWluKE1hdGgubWF4KDAsIG1Ub3AxKSwgaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBtb3ZlRWxlbWVudC5zdHlsZS5sZWZ0ID0gbUxlZnQxO1xuICAgICAgICAgICAgbW92ZUVsZW1lbnQuc3R5bGUudG9wID0gbVRvcDE7XG5cbiAgICAgICAgICAgIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyAmJiBjYihtTGVmdDEsIG1Ub3AxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIG1vdXNldXBIYW5kbGVyID0gKGUpID0+IHtcbiAgICAgICAgZHJhZ2luZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBkcmFnQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG1vdXNlZG93bkhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW91c2Vtb3ZlSGFuZGxlciwgZmFsc2UpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2V1cEhhbmRsZXIsIGZhbHNlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEltZ1Byb21pc2Uoc3JjKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIC8vIOi3qOWfn+aKpemUmeWkhOeQhu+8iEZhaWxlZCB0byBleGVjdXRlICd0b0RhdGFVUkwnIG9uICdIVE1MQ2FudmFzRWxlbWVudCc6IFRhaW50ZWQgY2FudmFzZXMgbWF5IG5vdCBiZSBleHBvcnRlZC7vvIlcbiAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdjcm9zc29yaWdpbicsICdhbm9ueW1vdXMnKTtcbiAgICAgICAgaW1hZ2Uuc3JjID0gc3JjO1xuICAgICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKGltYWdlKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1hZ2Uub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCgnRXJyb3I6IGltYWdlIGVycm9yIScpO1xuICAgICAgICB9O1xuICAgIH0pO1xufVxuLy8g5Yqg6L295Zu+54mHXG5mdW5jdGlvbiBsb2FkSW1hZ2Uoc3JjLCBzdWNjZXNzLCBmYWlsdXJlKSB7XG4gICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgLy8g6Leo5Z+f5oql6ZSZ5aSE55CG77yIRmFpbGVkIHRvIGV4ZWN1dGUgJ3RvRGF0YVVSTCcgb24gJ0hUTUxDYW52YXNFbGVtZW50JzogVGFpbnRlZCBjYW52YXNlcyBtYXkgbm90IGJlIGV4cG9ydGVkLu+8iVxuICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnY3Jvc3NvcmlnaW4nLCAnYW5vbnltb3VzJyk7XG4gICAgaW1hZ2Uuc3JjID0gc3JjO1xuICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHlwZW9mIHN1Y2Nlc3MgPT09ICdmdW5jdGlvbicgJiYgc3VjY2VzcyhpbWFnZSk7XG4gICAgfTtcbiAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0eXBlb2YgZmFpbHVyZSA9PT0gJ2Z1bmN0aW9uJyAmJiBmYWlsdXJlKCk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gbG9hZEltYWdlcyhzcmNMaXN0LCBzdWNjZXNzLCBmYWlsdXJlKSB7XG4gICAgdmFyIGltYWdlcyA9IFtdO1xuICAgIHZhciBpbmRleCA9IHNyY0xpc3QubGVuZ3RoO1xuICAgIHZhciBfbG9hZEltYWdlID0gKCkgPT4ge1xuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgLy8g6Leo5Z+f5oql6ZSZ5aSE55CG77yIRmFpbGVkIHRvIGV4ZWN1dGUgJ3RvRGF0YVVSTCcgb24gJ0hUTUxDYW52YXNFbGVtZW50JzogVGFpbnRlZCBjYW52YXNlcyBtYXkgbm90IGJlIGV4cG9ydGVkLu+8iVxuICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ2Nyb3Nzb3JpZ2luJywgJ2Fub255bW91cycpO1xuICAgICAgICBpbWFnZS5zcmMgPSBzcmNMaXN0Wy0taW5kZXhdO1xuICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpbWFnZXMucHVzaChpbWFnZSk7XG4gICAgICAgICAgICBpZiAoaW1hZ2VzLmxlbmd0aCA9PT0gc3JjTGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0eXBlb2Ygc3VjY2VzcyA9PT0gJ2Z1bmN0aW9uJyAmJiBzdWNjZXNzKGltYWdlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2xvYWRJbWFnZSgpO1xuICAgICAgICB9O1xuICAgICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHlwZW9mIGZhaWx1cmUgPT09ICdmdW5jdGlvbicgJiYgZmFpbHVyZSgpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgX2xvYWRJbWFnZSgpO1xuXG59XG4vLyDliJvlu7pjYXZhc1xuZnVuY3Rpb24gZ2V0Q2FudmFzKHdpZHRoLCBoZWlnaHQpIHtcbiAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICByZXR1cm4gY2FudmFzO1xufVxuXG4vL+iOt+WPlmJhc2U2NOWbvueJh+Wkp+Wwj1xuZnVuY3Rpb24gZ2V0QmFzZTY0U2l6ZShiYXNlNjREYXRhKSB7XG4gICAgLy8gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQseHh4eHh4Li4ueHh4PSdcbiAgICB2YXIgc3RyID0gYmFzZTY0RGF0YS5yZXBsYWNlKC9eZGF0YTppbWFnZVxcL1tcXHddKjtiYXNlNjQsJC8sICcnKTtcbiAgICB2YXIgZXF1YWxJbmRleCA9IHN0ci5pbmRleE9mKCc9Jyk7XG4gICAgaWYgKGVxdWFsSW5kZXggPiAwKSB7XG4gICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgZXF1YWxJbmRleCk7XG4gICAgfVxuICAgIHZhciBzdHJMZW5ndGggPSBzdHIubGVuZ3RoO1xuICAgIHJldHVybiBwYXJzZUludChzdHJMZW5ndGggLSAoc3RyTGVuZ3RoIC8gOCkgKiAyKTtcbn1cbi8vIOWOi+e8qeWPquaUr+aMgWltYWdlL2pwZWflkoxpbWFnZS93ZWJwXG5mdW5jdGlvbiBjb21wcmVzcyhpbWcsIHF1YWxpdHkgPSAxLCB3aWR0aCwgaGVpZ2h0LCBtaW1lID0gJ2ltYWdlcy9qcGVnJykgeyAvLyAgSW1hZ2Ug5a+56LGh77yM5oiW6ICF5pivIENhbnZhcyDlhYPntKBcbiAgICB2YXIgY2FudmFzID0gZ2V0Q2FudmFzKHdpZHRoLCBoZWlnaHQpLFxuICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGlmICh3aWR0aCAmJiBoZWlnaHQpIHtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcbiAgICB9XG5cbiAgICB2YXIgYmFzZTY0ID0gY2FudmFzLnRvRGF0YVVSTChtaW1lKTtcbiAgICBpZiAocXVhbGl0eSA8IDEpIHtcbiAgICAgICAgYmFzZTY0ID0gY2FudmFzLnRvRGF0YVVSTChtaW1lLCBxdWFsaXR5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmFzZTY0OyAvLyDljovnvKnlkI7nmoRiYXNlNjTkuLJcbn1cblxuXG5mdW5jdGlvbiBiYXNlNjREYXRhMkJsb2IoYmFzZTY0RGF0YSwgbWltZSkge1xuICAgIHZhciBiaW5TdHIgPSBhdG9iKGJhc2U2NERhdGEuc3BsaXQoJywnKVsxXSksXG4gICAgICAgIGxlbiA9IGJpblN0ci5sZW5ndGgsXG4gICAgICAgIGFyciA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gICAgaWYgKCFtaW1lKSB7XG4gICAgICAgIC8vIG1pbWUgPSBiYXNlNjREYXRhLnNwbGl0KCcsJylbMF0uc3BsaXQoJzonKVsxXS5zcGxpdCgnOycpWzBdO1xuICAgICAgICBtaW1lID0gYmFzZTY0RGF0YS5zdWJzdHJpbmcoYmFzZTY0RGF0YS5pbmRleE9mKCdkYXRhOicpICsgNSwgYmFzZTY0RGF0YS5pbmRleE9mKCc7YmFzZTY0JykpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgYXJyW2ldID0gYmluU3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBCbG9iKFthcnJdLCB7XG4gICAgICAgIHR5cGU6IG1pbWVcbiAgICB9KTtcblxufVxuXG5mdW5jdGlvbiBibG9iMkZvcm1EYXRhKGJsb2IsIGZpbGVOYW1lKSB7XG4gICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgYmxvYik7XG4gICAgaWYgKCFmaWxlTmFtZSkge1xuICAgICAgICBmaWxlTmFtZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIH1cbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlTmFtZVwiLCBmaWxlTmFtZSk7XG5cbiAgICByZXR1cm4gZm9ybURhdGE7XG59XG5cbi8vIGNhbnZhc+i9rOaIkGJsb2Llr7nosaHvvIx0eXBl5YC85Li6aW1hZ2UvanBlZ+aIluiAhWltYWdlL3dlYnDml7bvvIzlj6/kvb/nlKhlbmNvZGVyT3B0aW9uc++8iDAtMe+8ieiuvue9ruWbvueJh+Wxleekuui0qOmHj+OAglxuZnVuY3Rpb24gY2FudmFzMkJsb2IoY2FudmFzLCBjYWxsYmFjaywgdHlwZSwgcXVhbGl0eSkge1xuICAgIC8vIFBvbHlmaWxsXG4gICAgaWYgKCFIVE1MQ2FudmFzRWxlbWVudC5wcm90b3R5cGUudG9CbG9iKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MQ2FudmFzRWxlbWVudC5wcm90b3R5cGUsICd0b0Jsb2InLCB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGNhbGxiYWNrLCB0eXBlLCBxdWFsaXR5KSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgYmluU3RyID0gYXRvYih0aGlzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIHF1YWxpdHkpLnNwbGl0KCcsJylbMV0pLFxuICAgICAgICAgICAgICAgICAgICBsZW4gPSBiaW5TdHIubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBhcnIgPSBuZXcgVWludDhBcnJheShsZW4pO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBhcnJbaV0gPSBiaW5TdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgQmxvYihbYXJyXSwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdpbWFnZS9wbmcnXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjYW52YXMudG9CbG9iKGNhbGxiYWNrLCB0eXBlLCBxdWFsaXR5KTtcbn1cblxuZnVuY3Rpb24gdXBsb2FkRmlsZShmb3JtRGF0YSwgdXJsKSB7XG5cbiAgICB2YXIgeG1sSHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhtbEh0dHAub3BlbignUE9TVCcsIHVybCk7IC8v5rOo5oSP6Leo5Z+f6Zeu6aKYXG4gICAgeG1sSHR0cC5zZW5kKGZvcm1EYXRhKTtcbiAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHhtbEh0dHAucmVhZHlTdGF0ZSA9PSA0ICYmIHhtbEh0dHAuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coeG1sSHR0cC5yZXNwb25zZVRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coeG1sSHR0cC5zdGF0dXNUZXh0KTtcbiAgICAgICAgfVxuICAgIH07XG59XG4vLyDpgInmi6nmlofku7ZcbmZ1bmN0aW9uIGNob29zZUZpbGUoYnRuLCBjYiwgdmFsaWRGaWxlQ2FsbGJhY2spIHtcbiAgICBsZXQgJGJ0biA9IHR5cGVvZiBidG4gPT09IFwic3RyaW5nXCIgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJ0bikgOiBidG47XG4gICAgbGV0ICRmaWxlID0gJGJ0bi5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPWZpbGVdJyk7XG4gICAgaWYgKCEkZmlsZSkge1xuICAgICAgICBsZXQgZmlsZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBmaWxlTm9kZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZmlsZScpO1xuXG4gICAgICAgIGZpbGVOb2RlLnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTogbm9uZTsnO1xuICAgICAgICAkYnRuLmFwcGVuZENoaWxkKGZpbGVOb2RlKTtcbiAgICAgICAgJGZpbGUgPSAkYnRuLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9ZmlsZV0nKTtcbiAgICB9XG5cbiAgICAkZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAodGhpcy5maWxlcy5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgICAgIGxldCBvRmlsZSA9IHRoaXMuZmlsZXNbMF07XG5cbiAgICAgICAgICAgIGxldCB2YWxpZEZpbGUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZEZpbGVDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJyAmJiB2YWxpZEZpbGVDYWxsYmFjayhvRmlsZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRGaWxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWxpZEZpbGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChvRmlsZSk7XG5cbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgJiYgY2IodGhpcy5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29uVmFsaWRhdGVGaWxlIGZ1bmN0aW9uIHJldHVybiBmYWxzZScpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH0sIGZhbHNlKTtcblxuICAgIC8vIOmYu+atouWGkuazoeWvvOiHtOS4pOasoeinpuWPkXNlbGVjdEJ0blxuICAgICRmaWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9KVxuXG4gICAgJGZpbGUuY2xpY2soKTtcblxufVxuZnVuY3Rpb24gXyQoZWxlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBlbGUgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGUpIDogZWxlO1xufVxuXG5leHBvcnQge1xuICAgIGRyYWcsXG4gICAgbG9hZEltYWdlLFxuICAgIGxvYWRJbWFnZXMsXG4gICAgZ2V0Q2FudmFzLFxuICAgIGdldEJhc2U2NFNpemUsXG4gICAgY29tcHJlc3MsXG4gICAgYmFzZTY0RGF0YTJCbG9iLFxuICAgIGJsb2IyRm9ybURhdGEsXG4gICAgY2hvb3NlRmlsZSxcbiAgICB1cGxvYWRGaWxlLFxuICAgIGdldEltZ1Byb21pc2UsXG4gICAgXyRcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/util.js\n");

/***/ }),

/***/ 0:
/*!*********************************!*\
  !*** multi ./src/js/pipeImg.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! H:\workspace\03pipeImg\src\js\pipeImg.js */"./src/js/pipeImg.js");


/***/ })

/******/ });