'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/******/(function (modules) {
  // webpackBootstrap
  /******/ // The module cache
  /******/var installedModules = {};
  /******/
  /******/ // The require function
  /******/function __webpack_require__(moduleId) {
    /******/
    /******/ // Check if module is in cache
    /******/if (installedModules[moduleId]) {
      /******/return installedModules[moduleId].exports;
      /******/
    }
    /******/ // Create a new module (and put it into the cache)
    /******/var module = installedModules[moduleId] = {
      /******/i: moduleId,
      /******/l: false,
      /******/exports: {}
      /******/ };
    /******/
    /******/ // Execute the module function
    /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
    /******/
    /******/ // Flag the module as loaded
    /******/module.l = true;
    /******/
    /******/ // Return the exports of the module
    /******/return module.exports;
    /******/
  }
  /******/
  /******/
  /******/ // expose the modules object (__webpack_modules__)
  /******/__webpack_require__.m = modules;
  /******/
  /******/ // expose the module cache
  /******/__webpack_require__.c = installedModules;
  /******/
  /******/ // define getter function for harmony exports
  /******/__webpack_require__.d = function (exports, name, getter) {
    /******/if (!__webpack_require__.o(exports, name)) {
      /******/Object.defineProperty(exports, name, { enumerable: true, get: getter });
      /******/
    }
    /******/
  };
  /******/
  /******/ // define __esModule on exports
  /******/__webpack_require__.r = function (exports) {
    /******/if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {
      /******/Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
      /******/
    }
    /******/Object.defineProperty(exports, '__esModule', { value: true });
    /******/
  };
  /******/
  /******/ // create a fake namespace object
  /******/ // mode & 1: value is a module id, require it
  /******/ // mode & 2: merge all properties of value into the ns
  /******/ // mode & 4: return value when already ns object
  /******/ // mode & 8|1: behave like require
  /******/__webpack_require__.t = function (value, mode) {
    /******/if (mode & 1) value = __webpack_require__(value);
    /******/if (mode & 8) return value;
    /******/if (mode & 4 && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value && value.__esModule) return value;
    /******/var ns = Object.create(null);
    /******/__webpack_require__.r(ns);
    /******/Object.defineProperty(ns, 'default', { enumerable: true, value: value });
    /******/if (mode & 2 && typeof value != 'string') for (var key in value) {
      __webpack_require__.d(ns, key, function (key) {
        return value[key];
      }.bind(null, key));
    } /******/return ns;
    /******/
  };
  /******/
  /******/ // getDefaultExport function for compatibility with non-harmony modules
  /******/__webpack_require__.n = function (module) {
    /******/var getter = module && module.__esModule ?
    /******/function getDefault() {
      return module['default'];
    } :
    /******/function getModuleExports() {
      return module;
    };
    /******/__webpack_require__.d(getter, 'a', getter);
    /******/return getter;
    /******/
  };
  /******/
  /******/ // Object.prototype.hasOwnProperty.call
  /******/__webpack_require__.o = function (object, property) {
    return Object.prototype.hasOwnProperty.call(object, property);
  };
  /******/
  /******/ // __webpack_public_path__
  /******/__webpack_require__.p = "";
  /******/
  /******/
  /******/ // Load entry module and return exports
  /******/return __webpack_require__(__webpack_require__.s = 0);
  /******/
})(
/************************************************************************/
/******/{

  /***/"./node_modules/webpack/buildin/amd-options.js":
  /*!****************************************!*\
    !*** (webpack)/buildin/amd-options.js ***!
    \****************************************/
  /*! no static exports found */
  /***/function node_modulesWebpackBuildinAmdOptionsJs(module, exports) {

    eval("/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n/* WEBPACK VAR INJECTION */}.call(this, {}))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vYW1kLW9wdGlvbnMuanM/MDA4NiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9hbWQtb3B0aW9ucy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbHMgX193ZWJwYWNrX2FtZF9vcHRpb25zX18gKi9cclxubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXztcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/amd-options.js\n");

    /***/
  },

  /***/"./node_modules/webpack/buildin/harmony-module.js":
  /*!*******************************************!*\
    !*** (webpack)/buildin/harmony-module.js ***!
    \*******************************************/
  /*! no static exports found */
  /***/function node_modulesWebpackBuildinHarmonyModuleJs(module, exports) {

    eval("module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vaGFybW9ueS1tb2R1bGUuanM/ODJiMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2hhcm1vbnktbW9kdWxlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcmlnaW5hbE1vZHVsZSkge1xuXHRpZiAoIW9yaWdpbmFsTW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdHZhciBtb2R1bGUgPSBPYmplY3QuY3JlYXRlKG9yaWdpbmFsTW9kdWxlKTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJsb2FkZWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUubDtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImlkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJleHBvcnRzXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWVcblx0XHR9KTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/harmony-module.js\n");

    /***/
  },

  /***/"./src/js/dialog.js":
  /*!**************************!*\
    !*** ./src/js/dialog.js ***!
    \**************************/
  /*! exports provided: Dialog */
  /***/function srcJsDialogJs(module, __webpack_exports__, __webpack_require__) {

    "use strict";

    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Dialog\", function() { return Dialog; });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ \"./src/js/util.js\");\n/* harmony import */ var _dragBox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dragBox */ \"./src/js/dragBox.js\");\n/* harmony import */ var _dialog_tpl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dialog.tpl */ \"./src/js/dialog.tpl\");\n/* harmony import */ var _dialog_tpl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_dialog_tpl__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nclass Dialog {\n\n    constructor(options) {\n\n        // 默认配置参数\n        let defaults = {\n            imgList: [],\n            template: _dialog_tpl__WEBPACK_IMPORTED_MODULE_2___default.a,\n            markTextList: ['producttest.en.made-in-china.com', 'Focus Service Co - Product Sourcing'],\n            \n            closeBtnTxt: '关闭',\n            saveBtnTxt: '保存',\n            resetBtnTxt: '重置',\n            confirmBtnTxt: '确定',\n            cancelBtnTxt: '取消',\n            rotateMenuTxt: '旋转',\n            turnLeftTxt: '逆时针旋转',\n            turnRightTxt: '顺时针旋转',\n            cropMenuTxt: '裁剪',                \n            scaleMenuTxt: '缩放',\n            markMenuTxt: '添加水印',\n            colorTxt: '颜色',\n            positionTxt: '位置',\n            opacityTxt: '透明度',\n            showRoomTxt: '展示厅',\n            companyNameTxt: '公司名称',\n            markAllMenuTxt: '批量添加水印',\n\n            onSaveRotate: (args, cb) => {},\n            onSaveCrop: (args, cb) => {},\n            onSaveScale: (args, cb) => {},\n            onSaveMark: (args, cb) => {},\n            onReset: (cb) => {},\n            onSave: (cb) => {},\n            onChangeActive: (options, cb) => {},\n            onSaveMarkAll: (cb) => {}\n            \n        };\n\n\n        options = Object.assign({}, defaults, options);\n\n        this.imgList = options.imgList;\n        this.template = options.template;\n        this.markTextList = options.markTextList;\n\n        this.closeBtnTxt = options.closeBtnTxt;\n        this.saveBtnTxt = options.saveBtnTxt;\n        this.resetBtnTxt = options.resetBtnTxt;\n        this.confirmBtnTxt = options.confirmBtnTxt;\n        this.cancelBtnTxt = options.cancelBtnTxt;\n        this.rotateMenuTxt = options.rotateMenuTxt;\n        this.turnLeftTxt = options.turnLeftTxt;\n        this.turnRightTxt = options.turnRightTxt;\n        this.cropMenuTxt = options.cropMenuTxt;\n        this.scaleMenuTxt = options.scaleMenuTxt;\n        this.markMenuTxt = options.markMenuTxt;\n        this.colorTxt = options.colorTxt;\n        this.positionTxt = options.positionTxt;\n        this.opacityTxt = options.opacityTxt;\n        this.showRoomTxt = options.showRoomTxt;\n        this.companyNameTxt = options.companyNameTxt;\n        this.markAllMenuTxt = options.markAllMenuTxt;\n\n        this.onSaveRotate = options.onSaveRotate;\n        this.onSaveCrop = options.onSaveCrop;\n        this.onSaveScale = options.onSaveScale;\n        this.onSaveMark = options.onSaveMark;\n        this.onReset = options.onReset;\n        this.onSave = options.onSave;\n        this.onChangeActive = options.onChangeActive;\n        this.onSaveMarkAll = options.onSaveMarkAll;\n\n        this._init();\n\n    }\n\n    _init() {\n        let templateHtml = template(this.template, {\n            imgList: this.imgList,\n\n            closeBtnTxt: this.closeBtnTxt,\n            saveBtnTxt: this.saveBtnTxt,\n            resetBtnTxt: this.resetBtnTxt,\n            confirmBtnTxt: this.confirmBtnTxt,\n            cancelBtnTxt: this.cancelBtnTxt,\n            rotateMenuTxt: this.rotateMenuTxt,\n            turnLeftTxt: this.turnLeftTxt,\n            turnRightTxt: this.turnRightTxt,\n            cropMenuTxt: this.cropMenuTxt,                \n            scaleMenuTxt: this.scaleMenuTxt,\n            markMenuTxt: this.markMenuTxt,\n            colorTxt: this.colorTxt,\n            positionTxt: this.positionTxt,\n            opacityTxt: this.opacityTxt,\n            showRoomTxt: this.showRoomTxt,\n            companyNameTxt: this.companyNameTxt,\n            markAllMenuTxt: this.markAllMenuTxt\n        });\n\n        let html = '<div class=\"pipe-dialog J-pipe-dialog\" onselectstart=\"return false\" ondragstart=\"return false\"><div class=\"pipe-mask J-pipe-mask\"></div>'+ templateHtml +'</div>';\n        $('body').append(html);\n        \n        this.$el = $('.J-pipe-dialog');\n        this.$pipeWrapper = this.$el.find('.J-pipe-wrapper');\n\n        // 通用按钮\n        this.$btnClose = this.$el.find('.J-button-close');\n        this.$btnSave = this.$el.find('.J-button-save');\n        this.$btnReset = this.$el.find('.J-button-reset');\n        this.$btnConfirm = this.$el.find('.J-button-confirm');\n        this.$btnCancel = this.$el.find('.J-button-cancel');\n        this.$btnSaveAll = this.$el.find('.J-button-confirm-all');\n        this.$imgsThumbnail = this.$el.find('.J-imgs-thumbnail');\n        // 菜单导航\n        // this.$menuRotate = this.$el.find('.J-menu-rotate');\n        // this.$menuCrop = this.$el.find('.J-menu-crop');\n        // this.$menuScale = this.$el.find('.J-menu-scale');\n        // this.$menuMark = this.$el.find('.J-menu-mark');\n        // this.$menuMarkAll = this.$el.find('.J-menu-mark-all');\n        // 模块按钮\n        // 旋转\n        this.$btnRotateLeft = this.$el.find('.J-btn-rotate-left');\n        this.$btnRotateRight = this.$el.find('.J-btn-rotate-right');\n        // 裁剪\n        this.$inputCropWidth = this.$el.find('.J-input-crop-width');\n        this.$inputCropHeight = this.$el.find('.J-input-crop-height');\n        this.$radioCropFix = this.$el.find('.J-radio-crop-fix');\n        // 缩放\n        this.$inputScaleWidth = this.$el.find('.J-input-scale-width');\n        this.$inputScaleHeight = this.$el.find('.J-input-scale-height');\n        this.$rangeScaleRatio = this.$el.find('.J-range-scale-ratio');\n        // 添加水印\n        this.$radioMarkColor = this.$el.find('.J-radio-mark-color');\n        this.$radioMarkPosition = this.$el.find('.J-radio-mark-position');\n        this.$rangeMarkOpacity = this.$el.find('.J-range-mark-opacity');\n        this.$selectMarkTxt = this.$el.find('.J-select-mark-txt');\n        // 批量添加水印\n        this.$radioMarkAllColor = this.$el.find('.J-radio-markAll-color');\n        this.$radioMarkAllPosition = this.$el.find('.J-radio-markAll-position');\n        this.$rangeMarkAllOpacity = this.$el.find('.J-range-markAll-opacity');\n        this.$selectMarkAllTxt = this.$el.find('.J-select-markAll-txt');\n\n        // 全局变量\n        this.isChange = false;\n        this.rotateNum = 0;\n        this.scaleRatio = 1;\n\n        this.imgBoxHeight = this.$el.find('.J-img-box').height();\n        this.imgBoxWidth = this.$el.find('.J-img-box').width();\n        this.imgBoxRatio = this.imgBoxWidth / this.imgBoxHeight;\n\n        this.activeImg = this.imgList[0];\n\n        \n\n\n        // 初始化裁剪框\n        this.cropBox = new _dragBox__WEBPACK_IMPORTED_MODULE_1__[\"DragBox\"]({\n            ele: '.J-crop-box .J-source',\n            hasLight: true,\n            onDragPoint: (data) => {\n                this._showSize(data.width * this.activeData.ratio, data.height * this.activeData.ratio);\n                this.isChange = true;\n            }\n        });\n        // 初始化缩放\n        let $scalePanel = this.$el.find('.J-scale-panel');\n        let $scaleImgWrapper = $scalePanel.find('.J-scale-img-wrapper');\n        let imgEl = $scalePanel.find('.J-source').get(0);\n        Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"drag\"])(imgEl, imgEl, $scaleImgWrapper.get(0));\n        // 初始化水印框\n        this.markBox = new _dragBox__WEBPACK_IMPORTED_MODULE_1__[\"DragBox\"]({\n            ele: '.J-mark-box .J-source',\n            fixRatio: false,\n            markText: 'producttest.en.made-in-china.com',\n            onDragComplete: (left, top) => {\n                this.markX = left * this.activeData.ratio;\n                this.markY = top * this.activeData.ratio;\n\n                this.$el.find('.J-mark-panel').find('.J-position').prop('checked', false);\n\n                this.isChange = true;\n            },\n            onDragPoint: (boxData) => {\n                this.$el.find('.J-mark-panel').find('.J-mark-txt').css({\n                    'font-size': parseInt(this.markBox.$dragBox.css('height')) / 1.5\n                })\n                this._updateMark();\n            } \n        });\n        // 初始化批量水印框\n        this.markAllBox = new _dragBox__WEBPACK_IMPORTED_MODULE_1__[\"DragBox\"]({\n            ele: '.J-mark-box-all .J-source',\n            markText: 'producttest.en.made-in-china.com',\n            onDragComplete: (left, top) => {\n                this.markXAll = left * this.activeData.ratio;\n                this.markYAll = top * this.activeData.ratio;\n\n                this.$el.find('.J-mark-all-panel').find('.J-position').prop('checked', false);\n\n                this.isChange = true;\n            },\n            onDragPoint: (boxData) => {\n                this.$el.find('.J-mark-all-panel').find('.J-mark-txt').css({\n                    'font-size': parseInt(this.markAllBox.$dragBox.css('height')) / 1.5\n                })\n                this._updateMarkAll();\n            } \n        });\n\n        this._refresh();\n        this._bind();\n    }\n    _bind() {\n        // 切换编辑图片\n        this.$el.find('.J-footer-normal').on('click', '.J-img-thumbnail', (e) => {\n\n            let $thumbnail = $(e.target).parent();\n            $thumbnail.addClass('active').siblings().removeClass('active');\n\n            this.$el.find('.J-panel').not('.J-mark-all-panel').find('.J-source').attr('src', $thumbnail.find('img').attr('src'));\n            let targetImg = this.$el.find('.J-source:first').get(0);\n\n            // let targetImg = $thumbnail.find('img').get(0);\n\n            this.activeImg = targetImg;\n            this._refresh();\n            this._initPanel();\n\n            let options = {\n                activeImg: targetImg\n            };\n            this.onChangeActive(options, (img) => {\n\n            });\n        })\n        // 批量水印切换编辑图片\n        this.$el.find('.J-mark-all-panel').on('click', '.J-img-thumbnail', (e) => {\n\n            let $thumbnail = $(e.target).parent();\n            $thumbnail.addClass('active').siblings().removeClass('active');\n\n            this.$el.find('.J-mark-all-panel').find('.J-source').attr('src', $thumbnail.find('img').attr('src'));\n            let targetImg = this.$el.find('.J-mark-all-panel').find('.J-source:first').get(0);\n\n            // let targetImg = $thumbnail.find('img').get(0);\n            this.activeImg = targetImg;\n            this._refresh();\n            this._initMarkAll();\n\n            let options = {\n                activeImg: targetImg\n            };\n            this.onChangeActive(options, (img) => {\n\n            });\n        })\n\n        // 菜单切换\n        this.$el.find('.J-menu-btn').on('click', (e) => {\n            let $item = $(e.target).parent();\n            let index = $item.index();\n            let oldActiveIndex = $item.parent().find('.active:first').index();\n            $item.addClass('active').siblings().removeClass('active');\n            this.$el.find('.J-panel').eq(index).addClass('active').siblings().removeClass('active');\n\n            // 若有编辑操作，离开旋转，裁剪，缩放面板进行保存\n            if (this.isChange) {\n                switch (oldActiveIndex) {\n                    case 0:\n                        this._saveRotate();\n                        break;\n                    case 1:\n                        this._saveCrop();\n                        break;\n                    case 2:\n                        this._saveScale();\n                        break;\n                    default:\n                        break;\n                }\n            }\n\n            // 进入裁剪\n            if (index === 1) {\n                this._initCrop();\n            }\n            // 进入缩放\n            if (index === 2) {\n                this._initScale();\n            }\n            // // 进入水印\n            if (index === 3) {\n                this._initMark();\n            }\n\n        })\n        this.$el.find('.J-item').on('click', '.J-menu-btn', (e) => {\n            if (!$(e.target).parent().hasClass('J-item-mark-all')) {\n                this.$el.find('.J-footer-normal').show();\n                this.$el.find('.J-footer-special').hide();\n                this.$el.find('.J-item-mark').show();\n                this.$el.find('.J-item-mark-all').hide();              \n            }\n        })\n        this.$el.find('.J-item').on('click', '.J-menu-btn-sub', (e) => {\n            if ($(e.target).parent().parent().hasClass('J-item-mark')) {\n                let $markPanel = this.$el.find('.J-mark-all-panel');\n                let $activeImg = $markPanel.find('.J-img-thumbnail.active img');\n                this.$el.find('.J-item-mark-all').addClass('active').siblings().removeClass('active');\n                this.$el.find('.J-mark-all-panel').addClass('active').siblings().removeClass('active');\n                this.$el.find('.J-item-mark').hide();\n                this.$el.find('.J-item-mark-all').show();\n                \n                this.$el.find('.J-footer-normal').hide();\n                this.$el.find('.J-footer-special').show();\n\n                $markPanel.find('.J-source').attr('src', $activeImg.attr('src'));\n                this.rotateNum = 0;\n                this.scaleRatio = 1;\n                this.activeImg = $activeImg.get(0);\n                this._refresh();\n                this._initMarkAll();\n\n                this.isChange = false;\n\n            } else {         \n                this.$el.find('.J-item-mark').addClass('active').siblings().removeClass('active');\n                this.$el.find('.J-mark-panel').addClass('active').siblings().removeClass('active');\n                this.$el.find('.J-item-mark').show();\n                this.$el.find('.J-item-mark-all').hide();\n                this._initPanel();\n                this.$el.find('.J-footer-normal').show();\n                this.$el.find('.J-footer-special').hide();               \n\n            }\n        })\n\n        // 旋转++++++++++++++++\n        // 逆时针旋转\n        this.$btnRotateLeft.on('click', () => {\n            this._getRotateNum(-1);\n            this._updateRotate();\n        })\n        // 顺时针旋转\n        this.$btnRotateRight.on('click', () => {\n            this._getRotateNum(1);\n            this._updateRotate();\n        })\n        // 裁剪++++++++++++\n        this.$inputCropWidth.on('input', (e) => {\n            this.cropBox.width = $(e.target).val() / this.activeData.ratio;\n            if (this.cropBox.fixRatio) {\n                this.cropBox.height = this.cropBox.width / this.cropBox.boxData.ratio;\n            }\n            this._updateCrop();\n        })\n        this.$inputCropHeight.on('input', (e) => {\n            this.cropBox.height = $(e.target).val() / this.activeData.ratio;\n            if (this.cropBox.fixRatio) {\n                this.cropBox.width = this.cropBox.height * this.cropBox.boxData.ratio;\n            }\n            this._updateCrop();\n        })\n        this.$radioCropFix.on('change', (e) => {\n            this.cropBox.fixRatio = !this.cropBox.fixRatio;\n        })\n\n        // 缩放++++++++++++++\n        this.$inputScaleWidth.on('input', (e) => {\n            let $this = $(e.target);\n            this.scaleRatio = parseInt($this.val()) / this.activeData.w0;\n            this._updateScale();\n        })\n        this.$inputScaleHeight.on('input', (e) => {\n            let $this = $(e.target);\n            this.scaleRatio = parseInt($this.val()) / this.activeData.h0;\n            this._updateScale();\n        })\n        this.$rangeScaleRatio.on('input', (e) => {\n            let $this = $(e.target);\n            let max = parseInt($this.attr('max'));\n            this.scaleRatio = parseInt($this.val()) / max;\n            this._updateScale();\n        })\n        // 水印++++++++++++++\n        this.$radioMarkColor.on('input', () => {\n            this._updateMark();\n        })\n        this.$rangeMarkOpacity.on('input', () => {\n            this._updateMark();\n        })\n        this.$selectMarkTxt.on('change', () => {\n            this._updateMark();\n        })\n        this.$radioMarkPosition.on('change', () => {\n            this._updateMark();\n        })\n\n        // 批量水印++++++++++++++\n        this.$radioMarkAllColor.on('input', () => {\n            this._updateMarkAll();\n        })\n        this.$rangeMarkAllOpacity.on('input', () => {\n            this._updateMarkAll();\n        })\n        this.$selectMarkAllTxt.on('change', () => {\n            this._updateMarkAll();\n        })\n        this.$radioMarkAllPosition.on('change', () => {\n            this._updateMarkAll();\n        })\n\n\n        // 水印确定\n        this.$btnConfirm.on('click', () => {\n            this._saveMark();\n        })\n        // 水印取消\n        this.$btnCancel.on('click', () => {\n            this._cancelMark();\n        })\n        // 批量水印确定\n        this.$btnSaveAll.on('click', () => {\n            this._saveMarkAll();\n        })\n        // 重置\n        this.$btnReset.on('click', () => {\n            this._reset();\n        })\n        // 保存\n        this.$btnSave.on('click', (e) => {\n            if (this.isChange) {\n                let panelIndex = $(e.target).parents('.J-panel').index();\n                switch (panelIndex) {\n                    case 0:\n                        this._saveRotate();\n                        break;\n                    case 1:\n                        this._saveCrop();\n                        break;\n                    case 2:\n                        this._saveScale();\n                    default:\n                        break;\n                }           \n            }\n            this._save();\n        })\n        // 关闭\n        this.$btnClose.on('click', (e) => {\n            if (this.isChange) {\n                let result = confirm('Leave without saving?');\n                if (result) {\n                    this.destory();\n                }\n            } else {\n                this.destory();\n            }\n            \n        })\n        // 禁用鼠标右击菜单\n        this.$el.on('contextmenu', (e) => {\n            // return false;\n        })\n\n    }\n    _initPanel() {\n\n        this._initCrop();\n        this._initScale();\n        this._initMark();\n        this._goHome();\n    }\n    _goHome() {\n        this.$el.find('.J-menu-btn').parent(':first').addClass('active').siblings().removeClass('active');\n        this.$el.find('.J-panel:first').addClass('active').siblings().removeClass('active');\n    }\n\n    _initRotate() {\n        this.rotateNum = 0;\n    }\n    _updateRotate() {\n        this.$el.find('.J-source').css({\n            'transform': `rotate(${this.rotateNum * 90}deg)`\n        });\n\n        if (this.rotateNum === 1 || this.rotateNum === 3) {\n            // 旋转类90度后\n            if (1 / this.activeData.imgRatio < this.imgBoxRatio) {\n                this.$el.find('.J-source').css({\n                    'width': this.imgBoxHeight,\n                    'height': 'auto'\n                });\n            } else {\n                this.$el.find('.J-source').css({\n                    'width': 'auto',\n                    'height': this.imgBoxWidth\n                });\n            }\n\n        } else {\n            if (this.activeData.imgRatio < this.imgBoxRatio) {\n                this.$el.find('.J-source').css({\n                    'width': 'auto',\n                    'height': this.imgBoxHeight\n                });\n            } else {\n                this.$el.find('.J-source').css({\n                    'width': this.imgBoxWidth,\n                    'height': 'auto'\n                });\n            }\n        }\n\n        this.isChange = true;\n    }\n    _saveRotate() {\n        let options = {\n            rotateNum: this.rotateNum\n        };\n        this.onSaveRotate(options, (img) => {\n            this.rotateNum = 0;\n            this.activeImg = img;\n            this._refresh();\n\n            this.isChange = false;\n        });\n    }\n    _initCrop() {\n        let $cropPanel = this.$el.find('.J-crop-panel');\n\n        this.cropBox.isFixed = $cropPanel.find('.J-fix-ratio').prop('checked');\n        this.cropBox.width = $cropPanel.find('.J-num-width').val() / this.activeData.ratio;\n        this.cropBox.height = $cropPanel.find('.J-num-height').val() / this.activeData.ratio;\n    }\n    _updateCrop() {\n        this.cropBox.update();\n        this.isChange = true;\n    }\n    _saveCrop() {\n        let options = {\n            sx: this.cropBox.boxData.left * this.activeData.ratio,\n            sy: this.cropBox.boxData.top * this.activeData.ratio,\n            cropW: this.cropBox.boxData.width * this.activeData.ratio,\n            cropH: this.cropBox.boxData.height * this.activeData.ratio\n        };\n        this.onSaveCrop(options, (img) => {\n            this.sx = 0;\n            this.sy = 0;\n            this.cropW = img.width;\n            this.cropH = img.height;     \n\n            this.activeImg = img;\n            this._refresh();\n\n            this.isChange = false;\n        })\n    }\n    _initScale() {\n        let $scalePanel = this.$el.find('.J-scale-panel');\n        let $scaleImgBox = $scalePanel.find('.J-img-box');\n        let $scaleRange = $scalePanel.find('.J-scale-range');\n        let $scaleImgWrapper = $scalePanel.find('.J-scale-img-wrapper');\n\n        let $img = $scaleImgBox.find('.J-source');\n\n        let width = this.activeData.w0 + (this.activeData.w0 - this.imgBoxWidth);\n        let height = this.activeData.h0 + (this.activeData.h0 - this.imgBoxHeight);\n        $scaleImgWrapper.css({\n            'width': width,\n            'height': height,\n            'margin-left': -width / 2,\n            'margin-top': -height / 2\n        });\n        // 去除预览图的缩放显示\n        $img.css({\n            'position': 'absolute',\n            'left': (width - this.activeData.w0) / 2,\n            'top': (height - this.activeData.h0) / 2,\n            'width': this.activeData.w0,\n            'height': this.activeData.h0,\n            'max-width': 'none',\n            'max-height': 'none',\n            'cursor': 'move'\n        })\n        // 初始化滑块值\n        $scaleRange.val($scaleRange.attr('max'));\n\n        this.scaleRatio = 1;\n    }\n    _updateScale() {\n        let scaleRatio = this.scaleRatio;\n\n        let $scalePanel = this.$el.find('.J-scale-panel');\n        let $scaleRange = $scalePanel.find('.J-scale-range');\n        let $scaleNumWidth = $scalePanel.find('.J-num-width');\n        let $scaleNumHeight = $scalePanel.find('.J-num-height');\n        let max = parseInt($scaleRange.attr('max'));\n\n        if ($scaleNumWidth.val() != this.activeData.w0 * scaleRatio) {\n            $scaleNumWidth.val(this.activeData.w0 * scaleRatio);\n        }\n        if ($scaleNumHeight.val() != this.activeData.h0 * scaleRatio) {\n            $scaleNumHeight.val(this.activeData.h0 * scaleRatio);\n        }\n        if ($scaleRange.val() != max * scaleRatio) {\n            $scaleRange.val(max * scaleRatio);\n        }\n\n        $('.J-source').css({\n            'transform': `scale(${this.scaleRatio})`\n        });\n\n        this.isChange = true;\n    }\n    _saveScale() {\n        let options = {\n            scaleRatio: this.scaleRatio,\n        };\n        this.onSaveScale(options, (img) => {\n            this.scaleRatio = 1;\n            this.activeImg = img;\n            this._refresh();\n\n            this.isChange = false;\n        })\n\n    }\n    _setMarkPosition(type) {\n        const POSITION = ['center', 'upLeft', 'upRight', 'downLeft', 'downRight'];\n\n        let $markPanel, $dragBox, markX, markY;\n        if (type === 'all') {\n            $markPanel = this.$el.find('.J-mark-all-panel');\n            $dragBox = this.markAllBox.$dragBox;\n            markX = this.markXAll;\n            markY = this.markYAll;\n        } else {\n            $markPanel = this.$el.find('.J-mark-panel');         \n            $dragBox = this.markBox.$dragBox;   \n            markX = this.markX;\n            markY = this.markY;\n        }\n\n        let positionVal = $markPanel.find('.J-position:checked').val();\n        \n        let dragBoxWrapperWidth = this.activeData.w1;\n        let dragBoxWrapperHeight = this.activeData.h1;\n        let dragBoxWidth = $dragBox.find('.J-mark-txt').outerWidth();\n        let dragBoxHeight = $dragBox.find('.J-mark-txt').outerHeight();\n\n        switch (POSITION[positionVal]) {\n            case 'center':\n                markX = (dragBoxWrapperWidth - dragBoxWidth) / 2 * this.activeData.ratio;\n                markY = (dragBoxWrapperHeight - dragBoxHeight) / 2 * this.activeData.ratio;\n                break;\n            case 'upLeft':\n                markX = 0;\n                markY = 0;\n                break;\n            case 'upRight':\n                markX = (dragBoxWrapperWidth - dragBoxWidth) * this.activeData.ratio;\n                markY = 0;\n                break;\n            case 'downLeft':\n                markX = 0;\n                markY = (dragBoxWrapperHeight - dragBoxHeight) * this.activeData.ratio;\n                break;\n            case 'downRight':\n                markX = (dragBoxWrapperWidth - dragBoxWidth) * this.activeData.ratio;\n                markY = (dragBoxWrapperHeight - dragBoxHeight) * this.activeData.ratio;\n                break;\n            default:\n                break;\n        }\n\n        $dragBox.css({\n            'left': markX / this.activeData.ratio,\n            'top': markY / this.activeData.ratio,\n            'width': dragBoxWidth,\n            'height': dragBoxHeight\n        })\n\n        if (type === 'all') {\n            this.markXAll = markX;\n            this.markYAll = markY;         \n        } else {\n            this.markX = markX;\n            this.markY = markY;\n        }\n    }\n    _setMarkStyle(type) {\n        let $markPanel;\n        if (type === 'all') {\n            $markPanel = this.$el.find('.J-mark-all-panel');\n        } else {\n            $markPanel = this.$el.find('.J-mark-panel');            \n        }\n        let $markTxt = $markPanel.find('.J-mark-txt');\n        let colorVal = $markPanel.find('.J-color:checked').val();\n        let opacityVal = $markPanel.find('.J-opacity').val();\n        let txtVal = $markPanel.find('.J-markTxt:selected').val();   \n\n        let color = `rgba(255, 255, 255, ${opacityVal})`;\n        if (colorVal === '1') {\n            color = `rgba(0, 0, 0, ${opacityVal})`;\n        }\n        let text = this.markTextList[txtVal];\n\n        $markTxt.text(text).css({\n            'color': color\n        });\n        if (type === 'all') {\n            this.markStyleAll = color;\n            this.markTextAll = text;            \n        } else {\n            this.markStyle = color;\n            this.markText = text;\n        }\n        \n    }\n    _initMark() {\n        let $markPanel = this.$el.find('.J-mark-panel');\n        let $markTxt = $markPanel.find('.J-mark-txt');\n\n        let font = parseInt($markTxt.css('font-size')) + 'px microsoft yahei';\n        this.markFont = font;\n\n        $markPanel.find('.J-color:last').prop('checked', true);\n        $markPanel.find('.J-position:first').prop('checked', true);\n        $markPanel.find('.J-opacity').val($markPanel.find('.J-opacity').attr('defaultValue'));\n        $markPanel.find('.J-markTxt:first').prop('selected', true);\n\n        this._setMarkStyle();\n        this._setMarkPosition();\n    }\n    _updateMark() {\n        this._setMarkStyle();\n        this._setMarkPosition();\n\n        this.isChange = true;\n    }\n    _saveMark() {\n        let options = {\n            markX: this.markX,\n            markY: this.markY,\n            markText: this.markText,\n            markFont: this.markFont,\n            markStyle: this.markStyle\n        };\n        \n        this.onSaveMark(options, (img) => {\n            this.activeImg = img;\n            this._refresh();\n            this._goHome();\n\n            this.isChange = false;\n        })  \n    }\n    _cancelMark() {\n        this._goHome();\n    }\n    _initMarkAll() {\n        let $markPanel = this.$el.find('.J-mark-all-panel');\n        let $markTxt = $markPanel.find('.J-mark-txt');\n\n        let font = parseInt($markTxt.css('font-size')) + 'px microsoft yahei';\n        this.markFontAll = font;\n\n        $markPanel.find('.J-color:last').prop('checked', true);\n        $markPanel.find('.J-position:first').prop('checked', true);\n        $markPanel.find('.J-opacity').val($markPanel.find('.J-opacity').attr('defaultValue'));\n        $markPanel.find('.J-select-markAll-txt:first').prop('selected', true);\n\n        this._setMarkStyle('all');\n        this._setMarkPosition('all');\n    }\n    _updateMarkAll() {\n        this._setMarkStyle('all');\n        this._setMarkPosition('all');\n\n        this.isChange = true;\n    }\n    _showSize(w0, h0) {\n        w0 = Math.round(w0);\n        h0 = Math.round(h0);\n        // 显示活动图片原始宽高\n        let $numWidth = this.$el.find('.J-num-width');\n        let $numHeight = this.$el.find('.J-num-height');\n        $numWidth.each((index, element) => {\n            if ($(element).get(0).nodeName.toLowerCase() === 'input') {\n                $numWidth.val(w0);\n            } else {\n                $numWidth.html(w0);\n            }\n        })\n        $numHeight.each((index, element) => {\n            if ($(element).get(0).nodeName.toLowerCase() === 'input') {\n                $numHeight.val(h0);\n            } else {\n                $numHeight.html(h0);\n            }\n        })\n    }\n    _refresh() {\n\n        this._updateActiveData();\n        let src = '';\n        if (this.activeData.img.nodeName.toLowerCase() === 'img') {\n            src = this.activeData.img.src;\n        } else {\n            src = this.activeData.img.toDataURL(this.mime, 1.0);\n        }\n\n        if (this.$el.find('.J-img-box').find('.J-source').length > 0) {\n            this.$el.find('.J-img-box').find('.J-source').attr('src', src);\n        } else {\n            this.$el.find('.J-img-box').append(`<img class=\"J-source\" src=\"${src}\">`);\n        }\n\n        this.$el.find('.J-source').removeAttr('style');\n        this.cropBox && (this.cropBox.boxEl.style = '');\n\n        this.$el.find('.J-img-box').find('.J-source').css({\n            width: this.activeData.w1,\n            height: this.activeData.h1\n        })\n\n        this._showSize(this.activeData.w0, this.activeData.h0);\n\n    }\n    // 更新正在编辑图片的数据\n    _updateActiveData() {\n        let targetImg = this.activeImg;\n        let w0 = targetImg.width;\n        let h0 = targetImg.height;\n        if (targetImg.nodeName.toLowerCase() === 'img') {\n            w0 = targetImg.naturalWidth;\n            h0 = targetImg.naturalHeight;\n        }\n\n        let imgRatio = w0 / h0;\n        let h1;\n        let w1;\n        let ratio;\n        if (imgRatio < this.imgBoxRatio) {\n            h1 = this.imgBoxHeight;\n            // w1 = 'auto';\n            w1 = h1 * imgRatio;\n            ratio = h0 / h1;\n        } else {\n            w1 = this.imgBoxWidth;\n            // h1 = 'auto';\n            h1 = w1 / imgRatio;\n            ratio = w0 / w1;\n        }\n\n        this.activeData = {\n            w0: w0,\n            h0: h0,\n            w1: w1,\n            h1: h1,\n            ratio: ratio,\n            imgRatio: imgRatio,\n            img: targetImg\n        }\n    }\n    _getRotateNum(direction) {\n        this.rotateNum += direction;\n        if (this.rotateNum > 3) {\n            this.rotateNum = 0;\n        }\n        if (this.rotateNum < 0) {\n            this.rotateNum = 3;\n        }\n    }\n\n    _reset() {\n        this.onReset((img) => {\n            this.rotateNum = 0;\n            this.scaleRatio = 1;\n            this.activeImg = img;\n            this._refresh();\n\n            this.isChange = false;\n        });  \n    }\n    _save() {\n        this.onSave((data) => {\n\n            let $activeThumb = this.$el.find('.J-footer-normal').find('.J-img-thumbnail.active');\n            $activeThumb.addClass('new').find('img').attr('src', data.src);\n\n            let index = $activeThumb.index();\n            this.$el.find('.J-mark-all-panel').find('.J-img-thumbnail').eq(index).find('img').attr('src', data.src);\n\n            this.isChange = false;\n            this.imgList = this.$el.find('.J-footer-normal').find('.J-img-thumbnail img');\n\n        });  \n    }\n    _saveMarkAll() {\n        let options = {\n            markX: this.markXAll,\n            markY: this.markYAll,\n            markText: this.markTextAll,\n            markFont: this.markFontAll,\n            markStyle: this.markStyleAll\n        };\n        this.onSaveMarkAll(options, (data) => {\n\n            this.destory();\n            this.isChange = false;\n\n        })          \n    }\n \n    destory() {\n        this.$el.remove();\n    }\n    showDialog() {\n        this.$el.show();\n    }\n    hideDialog() {\n        this.$el.hide();\n    }\n\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvZGlhbG9nLmpzPzIwZDgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRWdCO0FBR0c7QUFDWTs7QUFFL0I7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGtEQUFHO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMENBQTBDO0FBQzFDLHdDQUF3QztBQUN4Qyx5Q0FBeUM7QUFDekMsd0NBQXdDO0FBQ3hDLCtCQUErQjtBQUMvQiw4QkFBOEI7QUFDOUIsK0NBQStDO0FBQy9DOztBQUVBOzs7QUFHQSxrQ0FBa0M7O0FBRWxDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOzs7OztBQUtBO0FBQ0EsMkJBQTJCLGdEQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsa0RBQUk7QUFDWjtBQUNBLDJCQUEyQixnREFBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYTtBQUNBLFNBQVM7QUFDVDtBQUNBLDhCQUE4QixnREFBTztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGE7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsYUFBYTtBQUNiLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGFBQWEsTztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEOztBQUVBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTOzs7QUFHVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxvQkFBb0I7QUFDdkQsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0MsZ0JBQWdCO0FBQ2xELFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsd0Q7QUFDQSw2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBLGtDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsd0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFOztBQUVBLDJDQUEyQyxXQUFXO0FBQ3REO0FBQ0EscUNBQXFDLFdBQVc7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULDZFQUE2RSxJQUFJO0FBQ2pGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTLEU7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsU0FBUyxFO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVlIiwiZmlsZSI6Ii4vc3JjL2pzL2RpYWxvZy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgZHJhZ1xufSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHtcbiAgICBEcmFnQm94XG59IGZyb20gJy4vZHJhZ0JveCc7XG5pbXBvcnQgdHBsIGZyb20gJy4vZGlhbG9nLnRwbCc7XG5cbmNsYXNzIERpYWxvZyB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cbiAgICAgICAgLy8g6buY6K6k6YWN572u5Y+C5pWwXG4gICAgICAgIGxldCBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIGltZ0xpc3Q6IFtdLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRwbCxcbiAgICAgICAgICAgIG1hcmtUZXh0TGlzdDogWydwcm9kdWN0dGVzdC5lbi5tYWRlLWluLWNoaW5hLmNvbScsICdGb2N1cyBTZXJ2aWNlIENvIC0gUHJvZHVjdCBTb3VyY2luZyddLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjbG9zZUJ0blR4dDogJ+WFs+mXrScsXG4gICAgICAgICAgICBzYXZlQnRuVHh0OiAn5L+d5a2YJyxcbiAgICAgICAgICAgIHJlc2V0QnRuVHh0OiAn6YeN572uJyxcbiAgICAgICAgICAgIGNvbmZpcm1CdG5UeHQ6ICfnoa7lrponLFxuICAgICAgICAgICAgY2FuY2VsQnRuVHh0OiAn5Y+W5raIJyxcbiAgICAgICAgICAgIHJvdGF0ZU1lbnVUeHQ6ICfml4vovawnLFxuICAgICAgICAgICAgdHVybkxlZnRUeHQ6ICfpgIbml7bpkojml4vovawnLFxuICAgICAgICAgICAgdHVyblJpZ2h0VHh0OiAn6aG65pe26ZKI5peL6L2sJyxcbiAgICAgICAgICAgIGNyb3BNZW51VHh0OiAn6KOB5YmqJywgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBzY2FsZU1lbnVUeHQ6ICfnvKnmlL4nLFxuICAgICAgICAgICAgbWFya01lbnVUeHQ6ICfmt7vliqDmsLTljbAnLFxuICAgICAgICAgICAgY29sb3JUeHQ6ICfpopzoibInLFxuICAgICAgICAgICAgcG9zaXRpb25UeHQ6ICfkvY3nva4nLFxuICAgICAgICAgICAgb3BhY2l0eVR4dDogJ+mAj+aYjuW6picsXG4gICAgICAgICAgICBzaG93Um9vbVR4dDogJ+WxleekuuWOhScsXG4gICAgICAgICAgICBjb21wYW55TmFtZVR4dDogJ+WFrOWPuOWQjeensCcsXG4gICAgICAgICAgICBtYXJrQWxsTWVudVR4dDogJ+aJuemHj+a3u+WKoOawtOWNsCcsXG5cbiAgICAgICAgICAgIG9uU2F2ZVJvdGF0ZTogKGFyZ3MsIGNiKSA9PiB7fSxcbiAgICAgICAgICAgIG9uU2F2ZUNyb3A6IChhcmdzLCBjYikgPT4ge30sXG4gICAgICAgICAgICBvblNhdmVTY2FsZTogKGFyZ3MsIGNiKSA9PiB7fSxcbiAgICAgICAgICAgIG9uU2F2ZU1hcms6IChhcmdzLCBjYikgPT4ge30sXG4gICAgICAgICAgICBvblJlc2V0OiAoY2IpID0+IHt9LFxuICAgICAgICAgICAgb25TYXZlOiAoY2IpID0+IHt9LFxuICAgICAgICAgICAgb25DaGFuZ2VBY3RpdmU6IChvcHRpb25zLCBjYikgPT4ge30sXG4gICAgICAgICAgICBvblNhdmVNYXJrQWxsOiAoY2IpID0+IHt9XG4gICAgICAgICAgICBcbiAgICAgICAgfTtcblxuXG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5pbWdMaXN0ID0gb3B0aW9ucy5pbWdMaXN0O1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcbiAgICAgICAgdGhpcy5tYXJrVGV4dExpc3QgPSBvcHRpb25zLm1hcmtUZXh0TGlzdDtcblxuICAgICAgICB0aGlzLmNsb3NlQnRuVHh0ID0gb3B0aW9ucy5jbG9zZUJ0blR4dDtcbiAgICAgICAgdGhpcy5zYXZlQnRuVHh0ID0gb3B0aW9ucy5zYXZlQnRuVHh0O1xuICAgICAgICB0aGlzLnJlc2V0QnRuVHh0ID0gb3B0aW9ucy5yZXNldEJ0blR4dDtcbiAgICAgICAgdGhpcy5jb25maXJtQnRuVHh0ID0gb3B0aW9ucy5jb25maXJtQnRuVHh0O1xuICAgICAgICB0aGlzLmNhbmNlbEJ0blR4dCA9IG9wdGlvbnMuY2FuY2VsQnRuVHh0O1xuICAgICAgICB0aGlzLnJvdGF0ZU1lbnVUeHQgPSBvcHRpb25zLnJvdGF0ZU1lbnVUeHQ7XG4gICAgICAgIHRoaXMudHVybkxlZnRUeHQgPSBvcHRpb25zLnR1cm5MZWZ0VHh0O1xuICAgICAgICB0aGlzLnR1cm5SaWdodFR4dCA9IG9wdGlvbnMudHVyblJpZ2h0VHh0O1xuICAgICAgICB0aGlzLmNyb3BNZW51VHh0ID0gb3B0aW9ucy5jcm9wTWVudVR4dDtcbiAgICAgICAgdGhpcy5zY2FsZU1lbnVUeHQgPSBvcHRpb25zLnNjYWxlTWVudVR4dDtcbiAgICAgICAgdGhpcy5tYXJrTWVudVR4dCA9IG9wdGlvbnMubWFya01lbnVUeHQ7XG4gICAgICAgIHRoaXMuY29sb3JUeHQgPSBvcHRpb25zLmNvbG9yVHh0O1xuICAgICAgICB0aGlzLnBvc2l0aW9uVHh0ID0gb3B0aW9ucy5wb3NpdGlvblR4dDtcbiAgICAgICAgdGhpcy5vcGFjaXR5VHh0ID0gb3B0aW9ucy5vcGFjaXR5VHh0O1xuICAgICAgICB0aGlzLnNob3dSb29tVHh0ID0gb3B0aW9ucy5zaG93Um9vbVR4dDtcbiAgICAgICAgdGhpcy5jb21wYW55TmFtZVR4dCA9IG9wdGlvbnMuY29tcGFueU5hbWVUeHQ7XG4gICAgICAgIHRoaXMubWFya0FsbE1lbnVUeHQgPSBvcHRpb25zLm1hcmtBbGxNZW51VHh0O1xuXG4gICAgICAgIHRoaXMub25TYXZlUm90YXRlID0gb3B0aW9ucy5vblNhdmVSb3RhdGU7XG4gICAgICAgIHRoaXMub25TYXZlQ3JvcCA9IG9wdGlvbnMub25TYXZlQ3JvcDtcbiAgICAgICAgdGhpcy5vblNhdmVTY2FsZSA9IG9wdGlvbnMub25TYXZlU2NhbGU7XG4gICAgICAgIHRoaXMub25TYXZlTWFyayA9IG9wdGlvbnMub25TYXZlTWFyaztcbiAgICAgICAgdGhpcy5vblJlc2V0ID0gb3B0aW9ucy5vblJlc2V0O1xuICAgICAgICB0aGlzLm9uU2F2ZSA9IG9wdGlvbnMub25TYXZlO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQWN0aXZlID0gb3B0aW9ucy5vbkNoYW5nZUFjdGl2ZTtcbiAgICAgICAgdGhpcy5vblNhdmVNYXJrQWxsID0gb3B0aW9ucy5vblNhdmVNYXJrQWxsO1xuXG4gICAgICAgIHRoaXMuX2luaXQoKTtcblxuICAgIH1cblxuICAgIF9pbml0KCkge1xuICAgICAgICBsZXQgdGVtcGxhdGVIdG1sID0gdGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwge1xuICAgICAgICAgICAgaW1nTGlzdDogdGhpcy5pbWdMaXN0LFxuXG4gICAgICAgICAgICBjbG9zZUJ0blR4dDogdGhpcy5jbG9zZUJ0blR4dCxcbiAgICAgICAgICAgIHNhdmVCdG5UeHQ6IHRoaXMuc2F2ZUJ0blR4dCxcbiAgICAgICAgICAgIHJlc2V0QnRuVHh0OiB0aGlzLnJlc2V0QnRuVHh0LFxuICAgICAgICAgICAgY29uZmlybUJ0blR4dDogdGhpcy5jb25maXJtQnRuVHh0LFxuICAgICAgICAgICAgY2FuY2VsQnRuVHh0OiB0aGlzLmNhbmNlbEJ0blR4dCxcbiAgICAgICAgICAgIHJvdGF0ZU1lbnVUeHQ6IHRoaXMucm90YXRlTWVudVR4dCxcbiAgICAgICAgICAgIHR1cm5MZWZ0VHh0OiB0aGlzLnR1cm5MZWZ0VHh0LFxuICAgICAgICAgICAgdHVyblJpZ2h0VHh0OiB0aGlzLnR1cm5SaWdodFR4dCxcbiAgICAgICAgICAgIGNyb3BNZW51VHh0OiB0aGlzLmNyb3BNZW51VHh0LCAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHNjYWxlTWVudVR4dDogdGhpcy5zY2FsZU1lbnVUeHQsXG4gICAgICAgICAgICBtYXJrTWVudVR4dDogdGhpcy5tYXJrTWVudVR4dCxcbiAgICAgICAgICAgIGNvbG9yVHh0OiB0aGlzLmNvbG9yVHh0LFxuICAgICAgICAgICAgcG9zaXRpb25UeHQ6IHRoaXMucG9zaXRpb25UeHQsXG4gICAgICAgICAgICBvcGFjaXR5VHh0OiB0aGlzLm9wYWNpdHlUeHQsXG4gICAgICAgICAgICBzaG93Um9vbVR4dDogdGhpcy5zaG93Um9vbVR4dCxcbiAgICAgICAgICAgIGNvbXBhbnlOYW1lVHh0OiB0aGlzLmNvbXBhbnlOYW1lVHh0LFxuICAgICAgICAgICAgbWFya0FsbE1lbnVUeHQ6IHRoaXMubWFya0FsbE1lbnVUeHRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGh0bWwgPSAnPGRpdiBjbGFzcz1cInBpcGUtZGlhbG9nIEotcGlwZS1kaWFsb2dcIiBvbnNlbGVjdHN0YXJ0PVwicmV0dXJuIGZhbHNlXCIgb25kcmFnc3RhcnQ9XCJyZXR1cm4gZmFsc2VcIj48ZGl2IGNsYXNzPVwicGlwZS1tYXNrIEotcGlwZS1tYXNrXCI+PC9kaXY+JysgdGVtcGxhdGVIdG1sICsnPC9kaXY+JztcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZChodG1sKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuJGVsID0gJCgnLkotcGlwZS1kaWFsb2cnKTtcbiAgICAgICAgdGhpcy4kcGlwZVdyYXBwZXIgPSB0aGlzLiRlbC5maW5kKCcuSi1waXBlLXdyYXBwZXInKTtcblxuICAgICAgICAvLyDpgJrnlKjmjInpkq5cbiAgICAgICAgdGhpcy4kYnRuQ2xvc2UgPSB0aGlzLiRlbC5maW5kKCcuSi1idXR0b24tY2xvc2UnKTtcbiAgICAgICAgdGhpcy4kYnRuU2F2ZSA9IHRoaXMuJGVsLmZpbmQoJy5KLWJ1dHRvbi1zYXZlJyk7XG4gICAgICAgIHRoaXMuJGJ0blJlc2V0ID0gdGhpcy4kZWwuZmluZCgnLkotYnV0dG9uLXJlc2V0Jyk7XG4gICAgICAgIHRoaXMuJGJ0bkNvbmZpcm0gPSB0aGlzLiRlbC5maW5kKCcuSi1idXR0b24tY29uZmlybScpO1xuICAgICAgICB0aGlzLiRidG5DYW5jZWwgPSB0aGlzLiRlbC5maW5kKCcuSi1idXR0b24tY2FuY2VsJyk7XG4gICAgICAgIHRoaXMuJGJ0blNhdmVBbGwgPSB0aGlzLiRlbC5maW5kKCcuSi1idXR0b24tY29uZmlybS1hbGwnKTtcbiAgICAgICAgdGhpcy4kaW1nc1RodW1ibmFpbCA9IHRoaXMuJGVsLmZpbmQoJy5KLWltZ3MtdGh1bWJuYWlsJyk7XG4gICAgICAgIC8vIOiPnOWNleWvvOiIqlxuICAgICAgICAvLyB0aGlzLiRtZW51Um90YXRlID0gdGhpcy4kZWwuZmluZCgnLkotbWVudS1yb3RhdGUnKTtcbiAgICAgICAgLy8gdGhpcy4kbWVudUNyb3AgPSB0aGlzLiRlbC5maW5kKCcuSi1tZW51LWNyb3AnKTtcbiAgICAgICAgLy8gdGhpcy4kbWVudVNjYWxlID0gdGhpcy4kZWwuZmluZCgnLkotbWVudS1zY2FsZScpO1xuICAgICAgICAvLyB0aGlzLiRtZW51TWFyayA9IHRoaXMuJGVsLmZpbmQoJy5KLW1lbnUtbWFyaycpO1xuICAgICAgICAvLyB0aGlzLiRtZW51TWFya0FsbCA9IHRoaXMuJGVsLmZpbmQoJy5KLW1lbnUtbWFyay1hbGwnKTtcbiAgICAgICAgLy8g5qih5Z2X5oyJ6ZKuXG4gICAgICAgIC8vIOaXi+i9rFxuICAgICAgICB0aGlzLiRidG5Sb3RhdGVMZWZ0ID0gdGhpcy4kZWwuZmluZCgnLkotYnRuLXJvdGF0ZS1sZWZ0Jyk7XG4gICAgICAgIHRoaXMuJGJ0blJvdGF0ZVJpZ2h0ID0gdGhpcy4kZWwuZmluZCgnLkotYnRuLXJvdGF0ZS1yaWdodCcpO1xuICAgICAgICAvLyDoo4HliapcbiAgICAgICAgdGhpcy4kaW5wdXRDcm9wV2lkdGggPSB0aGlzLiRlbC5maW5kKCcuSi1pbnB1dC1jcm9wLXdpZHRoJyk7XG4gICAgICAgIHRoaXMuJGlucHV0Q3JvcEhlaWdodCA9IHRoaXMuJGVsLmZpbmQoJy5KLWlucHV0LWNyb3AtaGVpZ2h0Jyk7XG4gICAgICAgIHRoaXMuJHJhZGlvQ3JvcEZpeCA9IHRoaXMuJGVsLmZpbmQoJy5KLXJhZGlvLWNyb3AtZml4Jyk7XG4gICAgICAgIC8vIOe8qeaUvlxuICAgICAgICB0aGlzLiRpbnB1dFNjYWxlV2lkdGggPSB0aGlzLiRlbC5maW5kKCcuSi1pbnB1dC1zY2FsZS13aWR0aCcpO1xuICAgICAgICB0aGlzLiRpbnB1dFNjYWxlSGVpZ2h0ID0gdGhpcy4kZWwuZmluZCgnLkotaW5wdXQtc2NhbGUtaGVpZ2h0Jyk7XG4gICAgICAgIHRoaXMuJHJhbmdlU2NhbGVSYXRpbyA9IHRoaXMuJGVsLmZpbmQoJy5KLXJhbmdlLXNjYWxlLXJhdGlvJyk7XG4gICAgICAgIC8vIOa3u+WKoOawtOWNsFxuICAgICAgICB0aGlzLiRyYWRpb01hcmtDb2xvciA9IHRoaXMuJGVsLmZpbmQoJy5KLXJhZGlvLW1hcmstY29sb3InKTtcbiAgICAgICAgdGhpcy4kcmFkaW9NYXJrUG9zaXRpb24gPSB0aGlzLiRlbC5maW5kKCcuSi1yYWRpby1tYXJrLXBvc2l0aW9uJyk7XG4gICAgICAgIHRoaXMuJHJhbmdlTWFya09wYWNpdHkgPSB0aGlzLiRlbC5maW5kKCcuSi1yYW5nZS1tYXJrLW9wYWNpdHknKTtcbiAgICAgICAgdGhpcy4kc2VsZWN0TWFya1R4dCA9IHRoaXMuJGVsLmZpbmQoJy5KLXNlbGVjdC1tYXJrLXR4dCcpO1xuICAgICAgICAvLyDmibnph4/mt7vliqDmsLTljbBcbiAgICAgICAgdGhpcy4kcmFkaW9NYXJrQWxsQ29sb3IgPSB0aGlzLiRlbC5maW5kKCcuSi1yYWRpby1tYXJrQWxsLWNvbG9yJyk7XG4gICAgICAgIHRoaXMuJHJhZGlvTWFya0FsbFBvc2l0aW9uID0gdGhpcy4kZWwuZmluZCgnLkotcmFkaW8tbWFya0FsbC1wb3NpdGlvbicpO1xuICAgICAgICB0aGlzLiRyYW5nZU1hcmtBbGxPcGFjaXR5ID0gdGhpcy4kZWwuZmluZCgnLkotcmFuZ2UtbWFya0FsbC1vcGFjaXR5Jyk7XG4gICAgICAgIHRoaXMuJHNlbGVjdE1hcmtBbGxUeHQgPSB0aGlzLiRlbC5maW5kKCcuSi1zZWxlY3QtbWFya0FsbC10eHQnKTtcblxuICAgICAgICAvLyDlhajlsYDlj5jph49cbiAgICAgICAgdGhpcy5pc0NoYW5nZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJvdGF0ZU51bSA9IDA7XG4gICAgICAgIHRoaXMuc2NhbGVSYXRpbyA9IDE7XG5cbiAgICAgICAgdGhpcy5pbWdCb3hIZWlnaHQgPSB0aGlzLiRlbC5maW5kKCcuSi1pbWctYm94JykuaGVpZ2h0KCk7XG4gICAgICAgIHRoaXMuaW1nQm94V2lkdGggPSB0aGlzLiRlbC5maW5kKCcuSi1pbWctYm94Jykud2lkdGgoKTtcbiAgICAgICAgdGhpcy5pbWdCb3hSYXRpbyA9IHRoaXMuaW1nQm94V2lkdGggLyB0aGlzLmltZ0JveEhlaWdodDtcblxuICAgICAgICB0aGlzLmFjdGl2ZUltZyA9IHRoaXMuaW1nTGlzdFswXTtcblxuICAgICAgICBcblxuXG4gICAgICAgIC8vIOWIneWni+WMluijgeWJquahhlxuICAgICAgICB0aGlzLmNyb3BCb3ggPSBuZXcgRHJhZ0JveCh7XG4gICAgICAgICAgICBlbGU6ICcuSi1jcm9wLWJveCAuSi1zb3VyY2UnLFxuICAgICAgICAgICAgaGFzTGlnaHQ6IHRydWUsXG4gICAgICAgICAgICBvbkRyYWdQb2ludDogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zaG93U2l6ZShkYXRhLndpZHRoICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvLCBkYXRhLmhlaWdodCAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyDliJ3lp4vljJbnvKnmlL5cbiAgICAgICAgbGV0ICRzY2FsZVBhbmVsID0gdGhpcy4kZWwuZmluZCgnLkotc2NhbGUtcGFuZWwnKTtcbiAgICAgICAgbGV0ICRzY2FsZUltZ1dyYXBwZXIgPSAkc2NhbGVQYW5lbC5maW5kKCcuSi1zY2FsZS1pbWctd3JhcHBlcicpO1xuICAgICAgICBsZXQgaW1nRWwgPSAkc2NhbGVQYW5lbC5maW5kKCcuSi1zb3VyY2UnKS5nZXQoMCk7XG4gICAgICAgIGRyYWcoaW1nRWwsIGltZ0VsLCAkc2NhbGVJbWdXcmFwcGVyLmdldCgwKSk7XG4gICAgICAgIC8vIOWIneWni+WMluawtOWNsOahhlxuICAgICAgICB0aGlzLm1hcmtCb3ggPSBuZXcgRHJhZ0JveCh7XG4gICAgICAgICAgICBlbGU6ICcuSi1tYXJrLWJveCAuSi1zb3VyY2UnLFxuICAgICAgICAgICAgZml4UmF0aW86IGZhbHNlLFxuICAgICAgICAgICAgbWFya1RleHQ6ICdwcm9kdWN0dGVzdC5lbi5tYWRlLWluLWNoaW5hLmNvbScsXG4gICAgICAgICAgICBvbkRyYWdDb21wbGV0ZTogKGxlZnQsIHRvcCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubWFya1ggPSBsZWZ0ICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgICAgIHRoaXMubWFya1kgPSB0b3AgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1tYXJrLXBhbmVsJykuZmluZCgnLkotcG9zaXRpb24nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pc0NoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25EcmFnUG9pbnQ6IChib3hEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotbWFyay1wYW5lbCcpLmZpbmQoJy5KLW1hcmstdHh0JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6IHBhcnNlSW50KHRoaXMubWFya0JveC4kZHJhZ0JveC5jc3MoJ2hlaWdodCcpKSAvIDEuNVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWFyaygpO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIOWIneWni+WMluaJuemHj+awtOWNsOahhlxuICAgICAgICB0aGlzLm1hcmtBbGxCb3ggPSBuZXcgRHJhZ0JveCh7XG4gICAgICAgICAgICBlbGU6ICcuSi1tYXJrLWJveC1hbGwgLkotc291cmNlJyxcbiAgICAgICAgICAgIG1hcmtUZXh0OiAncHJvZHVjdHRlc3QuZW4ubWFkZS1pbi1jaGluYS5jb20nLFxuICAgICAgICAgICAgb25EcmFnQ29tcGxldGU6IChsZWZ0LCB0b3ApID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtYQWxsID0gbGVmdCAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbztcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtZQWxsID0gdG9wICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotbWFyay1hbGwtcGFuZWwnKS5maW5kKCcuSi1wb3NpdGlvbicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkRyYWdQb2ludDogKGJveERhdGEpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1tYXJrLWFsbC1wYW5lbCcpLmZpbmQoJy5KLW1hcmstdHh0JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6IHBhcnNlSW50KHRoaXMubWFya0FsbEJveC4kZHJhZ0JveC5jc3MoJ2hlaWdodCcpKSAvIDEuNVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWFya0FsbCgpO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuICAgICAgICB0aGlzLl9iaW5kKCk7XG4gICAgfVxuICAgIF9iaW5kKCkge1xuICAgICAgICAvLyDliIfmjaLnvJbovpHlm77niYdcbiAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotZm9vdGVyLW5vcm1hbCcpLm9uKCdjbGljaycsICcuSi1pbWctdGh1bWJuYWlsJywgKGUpID0+IHtcblxuICAgICAgICAgICAgbGV0ICR0aHVtYm5haWwgPSAkKGUudGFyZ2V0KS5wYXJlbnQoKTtcbiAgICAgICAgICAgICR0aHVtYm5haWwuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1wYW5lbCcpLm5vdCgnLkotbWFyay1hbGwtcGFuZWwnKS5maW5kKCcuSi1zb3VyY2UnKS5hdHRyKCdzcmMnLCAkdGh1bWJuYWlsLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycpKTtcbiAgICAgICAgICAgIGxldCB0YXJnZXRJbWcgPSB0aGlzLiRlbC5maW5kKCcuSi1zb3VyY2U6Zmlyc3QnKS5nZXQoMCk7XG5cbiAgICAgICAgICAgIC8vIGxldCB0YXJnZXRJbWcgPSAkdGh1bWJuYWlsLmZpbmQoJ2ltZycpLmdldCgwKTtcblxuICAgICAgICAgICAgdGhpcy5hY3RpdmVJbWcgPSB0YXJnZXRJbWc7XG4gICAgICAgICAgICB0aGlzLl9yZWZyZXNoKCk7XG4gICAgICAgICAgICB0aGlzLl9pbml0UGFuZWwoKTtcblxuICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlSW1nOiB0YXJnZXRJbWdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlQWN0aXZlKG9wdGlvbnMsIChpbWcpID0+IHtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vIOaJuemHj+awtOWNsOWIh+aNoue8lui+keWbvueJh1xuICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1tYXJrLWFsbC1wYW5lbCcpLm9uKCdjbGljaycsICcuSi1pbWctdGh1bWJuYWlsJywgKGUpID0+IHtcblxuICAgICAgICAgICAgbGV0ICR0aHVtYm5haWwgPSAkKGUudGFyZ2V0KS5wYXJlbnQoKTtcbiAgICAgICAgICAgICR0aHVtYm5haWwuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1tYXJrLWFsbC1wYW5lbCcpLmZpbmQoJy5KLXNvdXJjZScpLmF0dHIoJ3NyYycsICR0aHVtYm5haWwuZmluZCgnaW1nJykuYXR0cignc3JjJykpO1xuICAgICAgICAgICAgbGV0IHRhcmdldEltZyA9IHRoaXMuJGVsLmZpbmQoJy5KLW1hcmstYWxsLXBhbmVsJykuZmluZCgnLkotc291cmNlOmZpcnN0JykuZ2V0KDApO1xuXG4gICAgICAgICAgICAvLyBsZXQgdGFyZ2V0SW1nID0gJHRodW1ibmFpbC5maW5kKCdpbWcnKS5nZXQoMCk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUltZyA9IHRhcmdldEltZztcbiAgICAgICAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICAgICAgICAgIHRoaXMuX2luaXRNYXJrQWxsKCk7XG5cbiAgICAgICAgICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUltZzogdGFyZ2V0SW1nXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZUFjdGl2ZShvcHRpb25zLCAoaW1nKSA9PiB7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuXG4gICAgICAgIC8vIOiPnOWNleWIh+aNolxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1tZW51LWJ0bicpLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgJGl0ZW0gPSAkKGUudGFyZ2V0KS5wYXJlbnQoKTtcbiAgICAgICAgICAgIGxldCBpbmRleCA9ICRpdGVtLmluZGV4KCk7XG4gICAgICAgICAgICBsZXQgb2xkQWN0aXZlSW5kZXggPSAkaXRlbS5wYXJlbnQoKS5maW5kKCcuYWN0aXZlOmZpcnN0JykuaW5kZXgoKTtcbiAgICAgICAgICAgICRpdGVtLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLXBhbmVsJykuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgLy8g6Iul5pyJ57yW6L6R5pON5L2c77yM56a75byA5peL6L2s77yM6KOB5Ymq77yM57yp5pS+6Z2i5p2/6L+b6KGM5L+d5a2YXG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAob2xkQWN0aXZlSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2F2ZVJvdGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NhdmVDcm9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2F2ZVNjYWxlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g6L+b5YWl6KOB5YmqXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0Q3JvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g6L+b5YWl57yp5pS+XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0U2NhbGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIC8vIOi/m+WFpeawtOWNsFxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdE1hcmsoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KVxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1pdGVtJykub24oJ2NsaWNrJywgJy5KLW1lbnUtYnRuJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghJChlLnRhcmdldCkucGFyZW50KCkuaGFzQ2xhc3MoJ0otaXRlbS1tYXJrLWFsbCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotZm9vdGVyLW5vcm1hbCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1mb290ZXItc3BlY2lhbCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1pdGVtLW1hcmsnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotaXRlbS1tYXJrLWFsbCcpLmhpZGUoKTsgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1pdGVtJykub24oJ2NsaWNrJywgJy5KLW1lbnUtYnRuLXN1YicsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoJChlLnRhcmdldCkucGFyZW50KCkucGFyZW50KCkuaGFzQ2xhc3MoJ0otaXRlbS1tYXJrJykpIHtcbiAgICAgICAgICAgICAgICBsZXQgJG1hcmtQYW5lbCA9IHRoaXMuJGVsLmZpbmQoJy5KLW1hcmstYWxsLXBhbmVsJyk7XG4gICAgICAgICAgICAgICAgbGV0ICRhY3RpdmVJbWcgPSAkbWFya1BhbmVsLmZpbmQoJy5KLWltZy10aHVtYm5haWwuYWN0aXZlIGltZycpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLWl0ZW0tbWFyay1hbGwnKS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotbWFyay1hbGwtcGFuZWwnKS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotaXRlbS1tYXJrJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLWl0ZW0tbWFyay1hbGwnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotZm9vdGVyLW5vcm1hbCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1mb290ZXItc3BlY2lhbCcpLnNob3coKTtcblxuICAgICAgICAgICAgICAgICRtYXJrUGFuZWwuZmluZCgnLkotc291cmNlJykuYXR0cignc3JjJywgJGFjdGl2ZUltZy5hdHRyKCdzcmMnKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVOdW0gPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NhbGVSYXRpbyA9IDE7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJbWcgPSAkYWN0aXZlSW1nLmdldCgwKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdE1hcmtBbGwoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuaXNDaGFuZ2UgPSBmYWxzZTtcblxuICAgICAgICAgICAgfSBlbHNlIHsgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1pdGVtLW1hcmsnKS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotbWFyay1wYW5lbCcpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1pdGVtLW1hcmsnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotaXRlbS1tYXJrLWFsbCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0UGFuZWwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1mb290ZXItbm9ybWFsJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLWZvb3Rlci1zcGVjaWFsJykuaGlkZSgpOyAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8g5peL6L2sKysrKysrKysrKysrKysrK1xuICAgICAgICAvLyDpgIbml7bpkojml4vovaxcbiAgICAgICAgdGhpcy4kYnRuUm90YXRlTGVmdC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9nZXRSb3RhdGVOdW0oLTEpO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUm90YXRlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vIOmhuuaXtumSiOaXi+i9rFxuICAgICAgICB0aGlzLiRidG5Sb3RhdGVSaWdodC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9nZXRSb3RhdGVOdW0oMSk7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVSb3RhdGUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLy8g6KOB5YmqKysrKysrKysrKysrXG4gICAgICAgIHRoaXMuJGlucHV0Q3JvcFdpZHRoLm9uKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNyb3BCb3gud2lkdGggPSAkKGUudGFyZ2V0KS52YWwoKSAvIHRoaXMuYWN0aXZlRGF0YS5yYXRpbztcbiAgICAgICAgICAgIGlmICh0aGlzLmNyb3BCb3guZml4UmF0aW8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyb3BCb3guaGVpZ2h0ID0gdGhpcy5jcm9wQm94LndpZHRoIC8gdGhpcy5jcm9wQm94LmJveERhdGEucmF0aW87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVDcm9wKCk7XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuJGlucHV0Q3JvcEhlaWdodC5vbignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jcm9wQm94LmhlaWdodCA9ICQoZS50YXJnZXQpLnZhbCgpIC8gdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3JvcEJveC5maXhSYXRpbykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JvcEJveC53aWR0aCA9IHRoaXMuY3JvcEJveC5oZWlnaHQgKiB0aGlzLmNyb3BCb3guYm94RGF0YS5yYXRpbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNyb3AoKTtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy4kcmFkaW9Dcm9wRml4Lm9uKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jcm9wQm94LmZpeFJhdGlvID0gIXRoaXMuY3JvcEJveC5maXhSYXRpbztcbiAgICAgICAgfSlcblxuICAgICAgICAvLyDnvKnmlL4rKysrKysrKysrKysrK1xuICAgICAgICB0aGlzLiRpbnB1dFNjYWxlV2lkdGgub24oJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGxldCAkdGhpcyA9ICQoZS50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gcGFyc2VJbnQoJHRoaXMudmFsKCkpIC8gdGhpcy5hY3RpdmVEYXRhLncwO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2NhbGUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy4kaW5wdXRTY2FsZUhlaWdodC5vbignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0ICR0aGlzID0gJChlLnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnNjYWxlUmF0aW8gPSBwYXJzZUludCgkdGhpcy52YWwoKSkgLyB0aGlzLmFjdGl2ZURhdGEuaDA7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVTY2FsZSgpO1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLiRyYW5nZVNjYWxlUmF0aW8ub24oJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGxldCAkdGhpcyA9ICQoZS50YXJnZXQpO1xuICAgICAgICAgICAgbGV0IG1heCA9IHBhcnNlSW50KCR0aGlzLmF0dHIoJ21heCcpKTtcbiAgICAgICAgICAgIHRoaXMuc2NhbGVSYXRpbyA9IHBhcnNlSW50KCR0aGlzLnZhbCgpKSAvIG1heDtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNjYWxlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vIOawtOWNsCsrKysrKysrKysrKysrXG4gICAgICAgIHRoaXMuJHJhZGlvTWFya0NvbG9yLm9uKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1hcmsoKTtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy4kcmFuZ2VNYXJrT3BhY2l0eS5vbignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNYXJrKCk7XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuJHNlbGVjdE1hcmtUeHQub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1hcmsoKTtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy4kcmFkaW9NYXJrUG9zaXRpb24ub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1hcmsoKTtcbiAgICAgICAgfSlcblxuICAgICAgICAvLyDmibnph4/msLTljbArKysrKysrKysrKysrK1xuICAgICAgICB0aGlzLiRyYWRpb01hcmtBbGxDb2xvci5vbignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNYXJrQWxsKCk7XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuJHJhbmdlTWFya0FsbE9wYWNpdHkub24oJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWFya0FsbCgpO1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLiRzZWxlY3RNYXJrQWxsVHh0Lm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNYXJrQWxsKCk7XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuJHJhZGlvTWFya0FsbFBvc2l0aW9uLm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNYXJrQWxsKCk7XG4gICAgICAgIH0pXG5cblxuICAgICAgICAvLyDmsLTljbDnoa7lrppcbiAgICAgICAgdGhpcy4kYnRuQ29uZmlybS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9zYXZlTWFyaygpO1xuICAgICAgICB9KVxuICAgICAgICAvLyDmsLTljbDlj5bmtohcbiAgICAgICAgdGhpcy4kYnRuQ2FuY2VsLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2NhbmNlbE1hcmsoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLy8g5om56YeP5rC05Y2w56Gu5a6aXG4gICAgICAgIHRoaXMuJGJ0blNhdmVBbGwub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fc2F2ZU1hcmtBbGwoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLy8g6YeN572uXG4gICAgICAgIHRoaXMuJGJ0blJlc2V0Lm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vIOS/neWtmFxuICAgICAgICB0aGlzLiRidG5TYXZlLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgIGxldCBwYW5lbEluZGV4ID0gJChlLnRhcmdldCkucGFyZW50cygnLkotcGFuZWwnKS5pbmRleCgpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocGFuZWxJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zYXZlUm90YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2F2ZUNyb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zYXZlU2NhbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fc2F2ZSgpO1xuICAgICAgICB9KVxuICAgICAgICAvLyDlhbPpl61cbiAgICAgICAgdGhpcy4kYnRuQ2xvc2Uub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGNvbmZpcm0oJ0xlYXZlIHdpdGhvdXQgc2F2aW5nPycpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0b3J5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RvcnkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICAvLyDnpoHnlKjpvKDmoIflj7Plh7voj5zljZVcbiAgICAgICAgdGhpcy4kZWwub24oJ2NvbnRleHRtZW51JywgKGUpID0+IHtcbiAgICAgICAgICAgIC8vIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSlcblxuICAgIH1cbiAgICBfaW5pdFBhbmVsKCkge1xuXG4gICAgICAgIHRoaXMuX2luaXRDcm9wKCk7XG4gICAgICAgIHRoaXMuX2luaXRTY2FsZSgpO1xuICAgICAgICB0aGlzLl9pbml0TWFyaygpO1xuICAgICAgICB0aGlzLl9nb0hvbWUoKTtcbiAgICB9XG4gICAgX2dvSG9tZSgpIHtcbiAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotbWVudS1idG4nKS5wYXJlbnQoJzpmaXJzdCcpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotcGFuZWw6Zmlyc3QnKS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgX2luaXRSb3RhdGUoKSB7XG4gICAgICAgIHRoaXMucm90YXRlTnVtID0gMDtcbiAgICB9XG4gICAgX3VwZGF0ZVJvdGF0ZSgpIHtcbiAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotc291cmNlJykuY3NzKHtcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBgcm90YXRlKCR7dGhpcy5yb3RhdGVOdW0gKiA5MH1kZWcpYFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5yb3RhdGVOdW0gPT09IDEgfHwgdGhpcy5yb3RhdGVOdW0gPT09IDMpIHtcbiAgICAgICAgICAgIC8vIOaXi+i9rOexuzkw5bqm5ZCOXG4gICAgICAgICAgICBpZiAoMSAvIHRoaXMuYWN0aXZlRGF0YS5pbWdSYXRpbyA8IHRoaXMuaW1nQm94UmF0aW8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1zb3VyY2UnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiB0aGlzLmltZ0JveEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6ICdhdXRvJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1zb3VyY2UnKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiB0aGlzLmltZ0JveFdpZHRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZURhdGEuaW1nUmF0aW8gPCB0aGlzLmltZ0JveFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotc291cmNlJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogdGhpcy5pbWdCb3hIZWlnaHRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotc291cmNlJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogdGhpcy5pbWdCb3hXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6ICdhdXRvJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0NoYW5nZSA9IHRydWU7XG4gICAgfVxuICAgIF9zYXZlUm90YXRlKCkge1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHJvdGF0ZU51bTogdGhpcy5yb3RhdGVOdW1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblNhdmVSb3RhdGUob3B0aW9ucywgKGltZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5yb3RhdGVOdW0gPSAwO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVJbWcgPSBpbWc7XG4gICAgICAgICAgICB0aGlzLl9yZWZyZXNoKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaXNDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9pbml0Q3JvcCgpIHtcbiAgICAgICAgbGV0ICRjcm9wUGFuZWwgPSB0aGlzLiRlbC5maW5kKCcuSi1jcm9wLXBhbmVsJyk7XG5cbiAgICAgICAgdGhpcy5jcm9wQm94LmlzRml4ZWQgPSAkY3JvcFBhbmVsLmZpbmQoJy5KLWZpeC1yYXRpbycpLnByb3AoJ2NoZWNrZWQnKTtcbiAgICAgICAgdGhpcy5jcm9wQm94LndpZHRoID0gJGNyb3BQYW5lbC5maW5kKCcuSi1udW0td2lkdGgnKS52YWwoKSAvIHRoaXMuYWN0aXZlRGF0YS5yYXRpbztcbiAgICAgICAgdGhpcy5jcm9wQm94LmhlaWdodCA9ICRjcm9wUGFuZWwuZmluZCgnLkotbnVtLWhlaWdodCcpLnZhbCgpIC8gdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgIH1cbiAgICBfdXBkYXRlQ3JvcCgpIHtcbiAgICAgICAgdGhpcy5jcm9wQm94LnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLmlzQ2hhbmdlID0gdHJ1ZTtcbiAgICB9XG4gICAgX3NhdmVDcm9wKCkge1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHN4OiB0aGlzLmNyb3BCb3guYm94RGF0YS5sZWZ0ICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvLFxuICAgICAgICAgICAgc3k6IHRoaXMuY3JvcEJveC5ib3hEYXRhLnRvcCAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbyxcbiAgICAgICAgICAgIGNyb3BXOiB0aGlzLmNyb3BCb3guYm94RGF0YS53aWR0aCAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbyxcbiAgICAgICAgICAgIGNyb3BIOiB0aGlzLmNyb3BCb3guYm94RGF0YS5oZWlnaHQgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW9cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblNhdmVDcm9wKG9wdGlvbnMsIChpbWcpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3ggPSAwO1xuICAgICAgICAgICAgdGhpcy5zeSA9IDA7XG4gICAgICAgICAgICB0aGlzLmNyb3BXID0gaW1nLndpZHRoO1xuICAgICAgICAgICAgdGhpcy5jcm9wSCA9IGltZy5oZWlnaHQ7ICAgICBcblxuICAgICAgICAgICAgdGhpcy5hY3RpdmVJbWcgPSBpbWc7XG4gICAgICAgICAgICB0aGlzLl9yZWZyZXNoKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaXNDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgfSlcbiAgICB9XG4gICAgX2luaXRTY2FsZSgpIHtcbiAgICAgICAgbGV0ICRzY2FsZVBhbmVsID0gdGhpcy4kZWwuZmluZCgnLkotc2NhbGUtcGFuZWwnKTtcbiAgICAgICAgbGV0ICRzY2FsZUltZ0JveCA9ICRzY2FsZVBhbmVsLmZpbmQoJy5KLWltZy1ib3gnKTtcbiAgICAgICAgbGV0ICRzY2FsZVJhbmdlID0gJHNjYWxlUGFuZWwuZmluZCgnLkotc2NhbGUtcmFuZ2UnKTtcbiAgICAgICAgbGV0ICRzY2FsZUltZ1dyYXBwZXIgPSAkc2NhbGVQYW5lbC5maW5kKCcuSi1zY2FsZS1pbWctd3JhcHBlcicpO1xuXG4gICAgICAgIGxldCAkaW1nID0gJHNjYWxlSW1nQm94LmZpbmQoJy5KLXNvdXJjZScpO1xuXG4gICAgICAgIGxldCB3aWR0aCA9IHRoaXMuYWN0aXZlRGF0YS53MCArICh0aGlzLmFjdGl2ZURhdGEudzAgLSB0aGlzLmltZ0JveFdpZHRoKTtcbiAgICAgICAgbGV0IGhlaWdodCA9IHRoaXMuYWN0aXZlRGF0YS5oMCArICh0aGlzLmFjdGl2ZURhdGEuaDAgLSB0aGlzLmltZ0JveEhlaWdodCk7XG4gICAgICAgICRzY2FsZUltZ1dyYXBwZXIuY3NzKHtcbiAgICAgICAgICAgICd3aWR0aCc6IHdpZHRoLFxuICAgICAgICAgICAgJ2hlaWdodCc6IGhlaWdodCxcbiAgICAgICAgICAgICdtYXJnaW4tbGVmdCc6IC13aWR0aCAvIDIsXG4gICAgICAgICAgICAnbWFyZ2luLXRvcCc6IC1oZWlnaHQgLyAyXG4gICAgICAgIH0pO1xuICAgICAgICAvLyDljrvpmaTpooTop4jlm77nmoTnvKnmlL7mmL7npLpcbiAgICAgICAgJGltZy5jc3Moe1xuICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICdsZWZ0JzogKHdpZHRoIC0gdGhpcy5hY3RpdmVEYXRhLncwKSAvIDIsXG4gICAgICAgICAgICAndG9wJzogKGhlaWdodCAtIHRoaXMuYWN0aXZlRGF0YS5oMCkgLyAyLFxuICAgICAgICAgICAgJ3dpZHRoJzogdGhpcy5hY3RpdmVEYXRhLncwLFxuICAgICAgICAgICAgJ2hlaWdodCc6IHRoaXMuYWN0aXZlRGF0YS5oMCxcbiAgICAgICAgICAgICdtYXgtd2lkdGgnOiAnbm9uZScsXG4gICAgICAgICAgICAnbWF4LWhlaWdodCc6ICdub25lJyxcbiAgICAgICAgICAgICdjdXJzb3InOiAnbW92ZSdcbiAgICAgICAgfSlcbiAgICAgICAgLy8g5Yid5aeL5YyW5ruR5Z2X5YC8XG4gICAgICAgICRzY2FsZVJhbmdlLnZhbCgkc2NhbGVSYW5nZS5hdHRyKCdtYXgnKSk7XG5cbiAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gMTtcbiAgICB9XG4gICAgX3VwZGF0ZVNjYWxlKCkge1xuICAgICAgICBsZXQgc2NhbGVSYXRpbyA9IHRoaXMuc2NhbGVSYXRpbztcblxuICAgICAgICBsZXQgJHNjYWxlUGFuZWwgPSB0aGlzLiRlbC5maW5kKCcuSi1zY2FsZS1wYW5lbCcpO1xuICAgICAgICBsZXQgJHNjYWxlUmFuZ2UgPSAkc2NhbGVQYW5lbC5maW5kKCcuSi1zY2FsZS1yYW5nZScpO1xuICAgICAgICBsZXQgJHNjYWxlTnVtV2lkdGggPSAkc2NhbGVQYW5lbC5maW5kKCcuSi1udW0td2lkdGgnKTtcbiAgICAgICAgbGV0ICRzY2FsZU51bUhlaWdodCA9ICRzY2FsZVBhbmVsLmZpbmQoJy5KLW51bS1oZWlnaHQnKTtcbiAgICAgICAgbGV0IG1heCA9IHBhcnNlSW50KCRzY2FsZVJhbmdlLmF0dHIoJ21heCcpKTtcblxuICAgICAgICBpZiAoJHNjYWxlTnVtV2lkdGgudmFsKCkgIT0gdGhpcy5hY3RpdmVEYXRhLncwICogc2NhbGVSYXRpbykge1xuICAgICAgICAgICAgJHNjYWxlTnVtV2lkdGgudmFsKHRoaXMuYWN0aXZlRGF0YS53MCAqIHNjYWxlUmF0aW8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkc2NhbGVOdW1IZWlnaHQudmFsKCkgIT0gdGhpcy5hY3RpdmVEYXRhLmgwICogc2NhbGVSYXRpbykge1xuICAgICAgICAgICAgJHNjYWxlTnVtSGVpZ2h0LnZhbCh0aGlzLmFjdGl2ZURhdGEuaDAgKiBzY2FsZVJhdGlvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJHNjYWxlUmFuZ2UudmFsKCkgIT0gbWF4ICogc2NhbGVSYXRpbykge1xuICAgICAgICAgICAgJHNjYWxlUmFuZ2UudmFsKG1heCAqIHNjYWxlUmF0aW8pO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLkotc291cmNlJykuY3NzKHtcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBgc2NhbGUoJHt0aGlzLnNjYWxlUmF0aW99KWBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5pc0NoYW5nZSA9IHRydWU7XG4gICAgfVxuICAgIF9zYXZlU2NhbGUoKSB7XG4gICAgICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgICAgICAgc2NhbGVSYXRpbzogdGhpcy5zY2FsZVJhdGlvLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uU2F2ZVNjYWxlKG9wdGlvbnMsIChpbWcpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2NhbGVSYXRpbyA9IDE7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUltZyA9IGltZztcbiAgICAgICAgICAgIHRoaXMuX3JlZnJlc2goKTtcblxuICAgICAgICAgICAgdGhpcy5pc0NoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9KVxuXG4gICAgfVxuICAgIF9zZXRNYXJrUG9zaXRpb24odHlwZSkge1xuICAgICAgICBjb25zdCBQT1NJVElPTiA9IFsnY2VudGVyJywgJ3VwTGVmdCcsICd1cFJpZ2h0JywgJ2Rvd25MZWZ0JywgJ2Rvd25SaWdodCddO1xuXG4gICAgICAgIGxldCAkbWFya1BhbmVsLCAkZHJhZ0JveCwgbWFya1gsIG1hcmtZO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgICRtYXJrUGFuZWwgPSB0aGlzLiRlbC5maW5kKCcuSi1tYXJrLWFsbC1wYW5lbCcpO1xuICAgICAgICAgICAgJGRyYWdCb3ggPSB0aGlzLm1hcmtBbGxCb3guJGRyYWdCb3g7XG4gICAgICAgICAgICBtYXJrWCA9IHRoaXMubWFya1hBbGw7XG4gICAgICAgICAgICBtYXJrWSA9IHRoaXMubWFya1lBbGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbWFya1BhbmVsID0gdGhpcy4kZWwuZmluZCgnLkotbWFyay1wYW5lbCcpOyAgICAgICAgIFxuICAgICAgICAgICAgJGRyYWdCb3ggPSB0aGlzLm1hcmtCb3guJGRyYWdCb3g7ICAgXG4gICAgICAgICAgICBtYXJrWCA9IHRoaXMubWFya1g7XG4gICAgICAgICAgICBtYXJrWSA9IHRoaXMubWFya1k7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcG9zaXRpb25WYWwgPSAkbWFya1BhbmVsLmZpbmQoJy5KLXBvc2l0aW9uOmNoZWNrZWQnKS52YWwoKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBkcmFnQm94V3JhcHBlcldpZHRoID0gdGhpcy5hY3RpdmVEYXRhLncxO1xuICAgICAgICBsZXQgZHJhZ0JveFdyYXBwZXJIZWlnaHQgPSB0aGlzLmFjdGl2ZURhdGEuaDE7XG4gICAgICAgIGxldCBkcmFnQm94V2lkdGggPSAkZHJhZ0JveC5maW5kKCcuSi1tYXJrLXR4dCcpLm91dGVyV2lkdGgoKTtcbiAgICAgICAgbGV0IGRyYWdCb3hIZWlnaHQgPSAkZHJhZ0JveC5maW5kKCcuSi1tYXJrLXR4dCcpLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgc3dpdGNoIChQT1NJVElPTltwb3NpdGlvblZhbF0pIHtcbiAgICAgICAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgICAgICAgICAgbWFya1ggPSAoZHJhZ0JveFdyYXBwZXJXaWR0aCAtIGRyYWdCb3hXaWR0aCkgLyAyICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgICAgIG1hcmtZID0gKGRyYWdCb3hXcmFwcGVySGVpZ2h0IC0gZHJhZ0JveEhlaWdodCkgLyAyICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndXBMZWZ0JzpcbiAgICAgICAgICAgICAgICBtYXJrWCA9IDA7XG4gICAgICAgICAgICAgICAgbWFya1kgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndXBSaWdodCc6XG4gICAgICAgICAgICAgICAgbWFya1ggPSAoZHJhZ0JveFdyYXBwZXJXaWR0aCAtIGRyYWdCb3hXaWR0aCkgKiB0aGlzLmFjdGl2ZURhdGEucmF0aW87XG4gICAgICAgICAgICAgICAgbWFya1kgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZG93bkxlZnQnOlxuICAgICAgICAgICAgICAgIG1hcmtYID0gMDtcbiAgICAgICAgICAgICAgICBtYXJrWSA9IChkcmFnQm94V3JhcHBlckhlaWdodCAtIGRyYWdCb3hIZWlnaHQpICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZG93blJpZ2h0JzpcbiAgICAgICAgICAgICAgICBtYXJrWCA9IChkcmFnQm94V3JhcHBlcldpZHRoIC0gZHJhZ0JveFdpZHRoKSAqIHRoaXMuYWN0aXZlRGF0YS5yYXRpbztcbiAgICAgICAgICAgICAgICBtYXJrWSA9IChkcmFnQm94V3JhcHBlckhlaWdodCAtIGRyYWdCb3hIZWlnaHQpICogdGhpcy5hY3RpdmVEYXRhLnJhdGlvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgICRkcmFnQm94LmNzcyh7XG4gICAgICAgICAgICAnbGVmdCc6IG1hcmtYIC8gdGhpcy5hY3RpdmVEYXRhLnJhdGlvLFxuICAgICAgICAgICAgJ3RvcCc6IG1hcmtZIC8gdGhpcy5hY3RpdmVEYXRhLnJhdGlvLFxuICAgICAgICAgICAgJ3dpZHRoJzogZHJhZ0JveFdpZHRoLFxuICAgICAgICAgICAgJ2hlaWdodCc6IGRyYWdCb3hIZWlnaHRcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgIHRoaXMubWFya1hBbGwgPSBtYXJrWDtcbiAgICAgICAgICAgIHRoaXMubWFya1lBbGwgPSBtYXJrWTsgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWFya1ggPSBtYXJrWDtcbiAgICAgICAgICAgIHRoaXMubWFya1kgPSBtYXJrWTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc2V0TWFya1N0eWxlKHR5cGUpIHtcbiAgICAgICAgbGV0ICRtYXJrUGFuZWw7XG4gICAgICAgIGlmICh0eXBlID09PSAnYWxsJykge1xuICAgICAgICAgICAgJG1hcmtQYW5lbCA9IHRoaXMuJGVsLmZpbmQoJy5KLW1hcmstYWxsLXBhbmVsJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbWFya1BhbmVsID0gdGhpcy4kZWwuZmluZCgnLkotbWFyay1wYW5lbCcpOyAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGxldCAkbWFya1R4dCA9ICRtYXJrUGFuZWwuZmluZCgnLkotbWFyay10eHQnKTtcbiAgICAgICAgbGV0IGNvbG9yVmFsID0gJG1hcmtQYW5lbC5maW5kKCcuSi1jb2xvcjpjaGVja2VkJykudmFsKCk7XG4gICAgICAgIGxldCBvcGFjaXR5VmFsID0gJG1hcmtQYW5lbC5maW5kKCcuSi1vcGFjaXR5JykudmFsKCk7XG4gICAgICAgIGxldCB0eHRWYWwgPSAkbWFya1BhbmVsLmZpbmQoJy5KLW1hcmtUeHQ6c2VsZWN0ZWQnKS52YWwoKTsgICBcblxuICAgICAgICBsZXQgY29sb3IgPSBgcmdiYSgyNTUsIDI1NSwgMjU1LCAke29wYWNpdHlWYWx9KWA7XG4gICAgICAgIGlmIChjb2xvclZhbCA9PT0gJzEnKSB7XG4gICAgICAgICAgICBjb2xvciA9IGByZ2JhKDAsIDAsIDAsICR7b3BhY2l0eVZhbH0pYDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdGV4dCA9IHRoaXMubWFya1RleHRMaXN0W3R4dFZhbF07XG5cbiAgICAgICAgJG1hcmtUeHQudGV4dCh0ZXh0KS5jc3Moe1xuICAgICAgICAgICAgJ2NvbG9yJzogY29sb3JcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlID09PSAnYWxsJykge1xuICAgICAgICAgICAgdGhpcy5tYXJrU3R5bGVBbGwgPSBjb2xvcjtcbiAgICAgICAgICAgIHRoaXMubWFya1RleHRBbGwgPSB0ZXh0OyAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tYXJrU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgICAgIHRoaXMubWFya1RleHQgPSB0ZXh0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBfaW5pdE1hcmsoKSB7XG4gICAgICAgIGxldCAkbWFya1BhbmVsID0gdGhpcy4kZWwuZmluZCgnLkotbWFyay1wYW5lbCcpO1xuICAgICAgICBsZXQgJG1hcmtUeHQgPSAkbWFya1BhbmVsLmZpbmQoJy5KLW1hcmstdHh0Jyk7XG5cbiAgICAgICAgbGV0IGZvbnQgPSBwYXJzZUludCgkbWFya1R4dC5jc3MoJ2ZvbnQtc2l6ZScpKSArICdweCBtaWNyb3NvZnQgeWFoZWknO1xuICAgICAgICB0aGlzLm1hcmtGb250ID0gZm9udDtcblxuICAgICAgICAkbWFya1BhbmVsLmZpbmQoJy5KLWNvbG9yOmxhc3QnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICRtYXJrUGFuZWwuZmluZCgnLkotcG9zaXRpb246Zmlyc3QnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICRtYXJrUGFuZWwuZmluZCgnLkotb3BhY2l0eScpLnZhbCgkbWFya1BhbmVsLmZpbmQoJy5KLW9wYWNpdHknKS5hdHRyKCdkZWZhdWx0VmFsdWUnKSk7XG4gICAgICAgICRtYXJrUGFuZWwuZmluZCgnLkotbWFya1R4dDpmaXJzdCcpLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7XG5cbiAgICAgICAgdGhpcy5fc2V0TWFya1N0eWxlKCk7XG4gICAgICAgIHRoaXMuX3NldE1hcmtQb3NpdGlvbigpO1xuICAgIH1cbiAgICBfdXBkYXRlTWFyaygpIHtcbiAgICAgICAgdGhpcy5fc2V0TWFya1N0eWxlKCk7XG4gICAgICAgIHRoaXMuX3NldE1hcmtQb3NpdGlvbigpO1xuXG4gICAgICAgIHRoaXMuaXNDaGFuZ2UgPSB0cnVlO1xuICAgIH1cbiAgICBfc2F2ZU1hcmsoKSB7XG4gICAgICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgICAgICAgbWFya1g6IHRoaXMubWFya1gsXG4gICAgICAgICAgICBtYXJrWTogdGhpcy5tYXJrWSxcbiAgICAgICAgICAgIG1hcmtUZXh0OiB0aGlzLm1hcmtUZXh0LFxuICAgICAgICAgICAgbWFya0ZvbnQ6IHRoaXMubWFya0ZvbnQsXG4gICAgICAgICAgICBtYXJrU3R5bGU6IHRoaXMubWFya1N0eWxlXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLm9uU2F2ZU1hcmsob3B0aW9ucywgKGltZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVJbWcgPSBpbWc7XG4gICAgICAgICAgICB0aGlzLl9yZWZyZXNoKCk7XG4gICAgICAgICAgICB0aGlzLl9nb0hvbWUoKTtcblxuICAgICAgICAgICAgdGhpcy5pc0NoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9KSAgXG4gICAgfVxuICAgIF9jYW5jZWxNYXJrKCkge1xuICAgICAgICB0aGlzLl9nb0hvbWUoKTtcbiAgICB9XG4gICAgX2luaXRNYXJrQWxsKCkge1xuICAgICAgICBsZXQgJG1hcmtQYW5lbCA9IHRoaXMuJGVsLmZpbmQoJy5KLW1hcmstYWxsLXBhbmVsJyk7XG4gICAgICAgIGxldCAkbWFya1R4dCA9ICRtYXJrUGFuZWwuZmluZCgnLkotbWFyay10eHQnKTtcblxuICAgICAgICBsZXQgZm9udCA9IHBhcnNlSW50KCRtYXJrVHh0LmNzcygnZm9udC1zaXplJykpICsgJ3B4IG1pY3Jvc29mdCB5YWhlaSc7XG4gICAgICAgIHRoaXMubWFya0ZvbnRBbGwgPSBmb250O1xuXG4gICAgICAgICRtYXJrUGFuZWwuZmluZCgnLkotY29sb3I6bGFzdCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgJG1hcmtQYW5lbC5maW5kKCcuSi1wb3NpdGlvbjpmaXJzdCcpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgJG1hcmtQYW5lbC5maW5kKCcuSi1vcGFjaXR5JykudmFsKCRtYXJrUGFuZWwuZmluZCgnLkotb3BhY2l0eScpLmF0dHIoJ2RlZmF1bHRWYWx1ZScpKTtcbiAgICAgICAgJG1hcmtQYW5lbC5maW5kKCcuSi1zZWxlY3QtbWFya0FsbC10eHQ6Zmlyc3QnKS5wcm9wKCdzZWxlY3RlZCcsIHRydWUpO1xuXG4gICAgICAgIHRoaXMuX3NldE1hcmtTdHlsZSgnYWxsJyk7XG4gICAgICAgIHRoaXMuX3NldE1hcmtQb3NpdGlvbignYWxsJyk7XG4gICAgfVxuICAgIF91cGRhdGVNYXJrQWxsKCkge1xuICAgICAgICB0aGlzLl9zZXRNYXJrU3R5bGUoJ2FsbCcpO1xuICAgICAgICB0aGlzLl9zZXRNYXJrUG9zaXRpb24oJ2FsbCcpO1xuXG4gICAgICAgIHRoaXMuaXNDaGFuZ2UgPSB0cnVlO1xuICAgIH1cbiAgICBfc2hvd1NpemUodzAsIGgwKSB7XG4gICAgICAgIHcwID0gTWF0aC5yb3VuZCh3MCk7XG4gICAgICAgIGgwID0gTWF0aC5yb3VuZChoMCk7XG4gICAgICAgIC8vIOaYvuekuua0u+WKqOWbvueJh+WOn+Wni+WuvemrmFxuICAgICAgICBsZXQgJG51bVdpZHRoID0gdGhpcy4kZWwuZmluZCgnLkotbnVtLXdpZHRoJyk7XG4gICAgICAgIGxldCAkbnVtSGVpZ2h0ID0gdGhpcy4kZWwuZmluZCgnLkotbnVtLWhlaWdodCcpO1xuICAgICAgICAkbnVtV2lkdGguZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmICgkKGVsZW1lbnQpLmdldCgwKS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgICAgICAgJG51bVdpZHRoLnZhbCh3MCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRudW1XaWR0aC5odG1sKHcwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgJG51bUhlaWdodC5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCQoZWxlbWVudCkuZ2V0KDApLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpIHtcbiAgICAgICAgICAgICAgICAkbnVtSGVpZ2h0LnZhbChoMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRudW1IZWlnaHQuaHRtbChoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuICAgIF9yZWZyZXNoKCkge1xuXG4gICAgICAgIHRoaXMuX3VwZGF0ZUFjdGl2ZURhdGEoKTtcbiAgICAgICAgbGV0IHNyYyA9ICcnO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmVEYXRhLmltZy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW1nJykge1xuICAgICAgICAgICAgc3JjID0gdGhpcy5hY3RpdmVEYXRhLmltZy5zcmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcmMgPSB0aGlzLmFjdGl2ZURhdGEuaW1nLnRvRGF0YVVSTCh0aGlzLm1pbWUsIDEuMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy4kZWwuZmluZCgnLkotaW1nLWJveCcpLmZpbmQoJy5KLXNvdXJjZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoJy5KLWltZy1ib3gnKS5maW5kKCcuSi1zb3VyY2UnKS5hdHRyKCdzcmMnLCBzcmMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnLkotaW1nLWJveCcpLmFwcGVuZChgPGltZyBjbGFzcz1cIkotc291cmNlXCIgc3JjPVwiJHtzcmN9XCI+YCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1zb3VyY2UnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICB0aGlzLmNyb3BCb3ggJiYgKHRoaXMuY3JvcEJveC5ib3hFbC5zdHlsZSA9ICcnKTtcblxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1pbWctYm94JykuZmluZCgnLkotc291cmNlJykuY3NzKHtcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLmFjdGl2ZURhdGEudzEsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuYWN0aXZlRGF0YS5oMVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMuX3Nob3dTaXplKHRoaXMuYWN0aXZlRGF0YS53MCwgdGhpcy5hY3RpdmVEYXRhLmgwKTtcblxuICAgIH1cbiAgICAvLyDmm7TmlrDmraPlnKjnvJbovpHlm77niYfnmoTmlbDmja5cbiAgICBfdXBkYXRlQWN0aXZlRGF0YSgpIHtcbiAgICAgICAgbGV0IHRhcmdldEltZyA9IHRoaXMuYWN0aXZlSW1nO1xuICAgICAgICBsZXQgdzAgPSB0YXJnZXRJbWcud2lkdGg7XG4gICAgICAgIGxldCBoMCA9IHRhcmdldEltZy5oZWlnaHQ7XG4gICAgICAgIGlmICh0YXJnZXRJbWcubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ltZycpIHtcbiAgICAgICAgICAgIHcwID0gdGFyZ2V0SW1nLm5hdHVyYWxXaWR0aDtcbiAgICAgICAgICAgIGgwID0gdGFyZ2V0SW1nLm5hdHVyYWxIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW1nUmF0aW8gPSB3MCAvIGgwO1xuICAgICAgICBsZXQgaDE7XG4gICAgICAgIGxldCB3MTtcbiAgICAgICAgbGV0IHJhdGlvO1xuICAgICAgICBpZiAoaW1nUmF0aW8gPCB0aGlzLmltZ0JveFJhdGlvKSB7XG4gICAgICAgICAgICBoMSA9IHRoaXMuaW1nQm94SGVpZ2h0O1xuICAgICAgICAgICAgLy8gdzEgPSAnYXV0byc7XG4gICAgICAgICAgICB3MSA9IGgxICogaW1nUmF0aW87XG4gICAgICAgICAgICByYXRpbyA9IGgwIC8gaDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3MSA9IHRoaXMuaW1nQm94V2lkdGg7XG4gICAgICAgICAgICAvLyBoMSA9ICdhdXRvJztcbiAgICAgICAgICAgIGgxID0gdzEgLyBpbWdSYXRpbztcbiAgICAgICAgICAgIHJhdGlvID0gdzAgLyB3MTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWN0aXZlRGF0YSA9IHtcbiAgICAgICAgICAgIHcwOiB3MCxcbiAgICAgICAgICAgIGgwOiBoMCxcbiAgICAgICAgICAgIHcxOiB3MSxcbiAgICAgICAgICAgIGgxOiBoMSxcbiAgICAgICAgICAgIHJhdGlvOiByYXRpbyxcbiAgICAgICAgICAgIGltZ1JhdGlvOiBpbWdSYXRpbyxcbiAgICAgICAgICAgIGltZzogdGFyZ2V0SW1nXG4gICAgICAgIH1cbiAgICB9XG4gICAgX2dldFJvdGF0ZU51bShkaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5yb3RhdGVOdW0gKz0gZGlyZWN0aW9uO1xuICAgICAgICBpZiAodGhpcy5yb3RhdGVOdW0gPiAzKSB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZU51bSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucm90YXRlTnVtIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5yb3RhdGVOdW0gPSAzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3Jlc2V0KCkge1xuICAgICAgICB0aGlzLm9uUmVzZXQoKGltZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5yb3RhdGVOdW0gPSAwO1xuICAgICAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gMTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSW1nID0gaW1nO1xuICAgICAgICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuXG4gICAgICAgICAgICB0aGlzLmlzQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIH0pOyAgXG4gICAgfVxuICAgIF9zYXZlKCkge1xuICAgICAgICB0aGlzLm9uU2F2ZSgoZGF0YSkgPT4ge1xuXG4gICAgICAgICAgICBsZXQgJGFjdGl2ZVRodW1iID0gdGhpcy4kZWwuZmluZCgnLkotZm9vdGVyLW5vcm1hbCcpLmZpbmQoJy5KLWltZy10aHVtYm5haWwuYWN0aXZlJyk7XG4gICAgICAgICAgICAkYWN0aXZlVGh1bWIuYWRkQ2xhc3MoJ25ldycpLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsIGRhdGEuc3JjKTtcblxuICAgICAgICAgICAgbGV0IGluZGV4ID0gJGFjdGl2ZVRodW1iLmluZGV4KCk7XG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuSi1tYXJrLWFsbC1wYW5lbCcpLmZpbmQoJy5KLWltZy10aHVtYm5haWwnKS5lcShpbmRleCkuZmluZCgnaW1nJykuYXR0cignc3JjJywgZGF0YS5zcmMpO1xuXG4gICAgICAgICAgICB0aGlzLmlzQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmltZ0xpc3QgPSB0aGlzLiRlbC5maW5kKCcuSi1mb290ZXItbm9ybWFsJykuZmluZCgnLkotaW1nLXRodW1ibmFpbCBpbWcnKTtcblxuICAgICAgICB9KTsgIFxuICAgIH1cbiAgICBfc2F2ZU1hcmtBbGwoKSB7XG4gICAgICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgICAgICAgbWFya1g6IHRoaXMubWFya1hBbGwsXG4gICAgICAgICAgICBtYXJrWTogdGhpcy5tYXJrWUFsbCxcbiAgICAgICAgICAgIG1hcmtUZXh0OiB0aGlzLm1hcmtUZXh0QWxsLFxuICAgICAgICAgICAgbWFya0ZvbnQ6IHRoaXMubWFya0ZvbnRBbGwsXG4gICAgICAgICAgICBtYXJrU3R5bGU6IHRoaXMubWFya1N0eWxlQWxsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25TYXZlTWFya0FsbChvcHRpb25zLCAoZGF0YSkgPT4ge1xuXG4gICAgICAgICAgICB0aGlzLmRlc3RvcnkoKTtcbiAgICAgICAgICAgIHRoaXMuaXNDaGFuZ2UgPSBmYWxzZTtcblxuICAgICAgICB9KSAgICAgICAgICBcbiAgICB9XG4gXG4gICAgZGVzdG9yeSgpIHtcbiAgICAgICAgdGhpcy4kZWwucmVtb3ZlKCk7XG4gICAgfVxuICAgIHNob3dEaWFsb2coKSB7XG4gICAgICAgIHRoaXMuJGVsLnNob3coKTtcbiAgICB9XG4gICAgaGlkZURpYWxvZygpIHtcbiAgICAgICAgdGhpcy4kZWwuaGlkZSgpO1xuICAgIH1cblxufVxuXG5leHBvcnQge0RpYWxvZ31cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/dialog.js\n");

    /***/
  },

  /***/"./src/js/dialog.tpl":
  /*!***************************!*\
    !*** ./src/js/dialog.tpl ***!
    \***************************/
  /*! no static exports found */
  /***/function srcJsDialogTpl(module, exports) {

    eval("module.exports = \"<div class=\\\"pipeImg-wrapper J-pipe-wrapper\\\">\\r\\n    <div class=\\\"pipe-header\\\">\\r\\n        <ul class=\\\"menu\\\">\\r\\n            <li class=\\\"item J-item active\\\"><a class=\\\"btn J-menu-btn\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-refresh\\\"></i>{{=rotateMenuTxt}}</a></li>\\r\\n            <li class=\\\"item J-item\\\"><a class=\\\"btn J-menu-btn\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-crop\\\"></i>{{=cropMenuTxt}}</a></li>\\r\\n            <li class=\\\"item J-item\\\"><a class=\\\"btn J-menu-btn\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-scaling\\\"></i>{{=scaleMenuTxt}}</a></li>\\r\\n            <li class=\\\"item J-item J-item-mark\\\">\\r\\n                <a class=\\\"btn J-menu-btn\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-add-l\\\"></i>{{=markMenuTxt}}</a>\\r\\n                <div class=\\\"item item-sub\\\">\\r\\n                    <a class=\\\"btn J-menu-btn-sub\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-batch\\\"></i>{{=markAllMenuTxt}}</a>\\r\\n                </div>\\r\\n            </li>\\r\\n            <li class=\\\"item J-item J-item-mark-all\\\" style=\\\"display:none;\\\">\\r\\n                <a class=\\\"btn J-menu-btn\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-batch\\\"></i>{{=markAllMenuTxt}}</a>\\r\\n                <div class=\\\"item item-sub\\\">\\r\\n                    <a class=\\\"btn J-menu-btn-sub\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-add-l\\\"></i>{{=markMenuTxt}}</a>\\r\\n                </div>\\r\\n            </li>\\r\\n        </ul>\\r\\n        <a class=\\\"btn btn-close J-button-close\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-delete\\\"></i>{{=closeBtnTxt}}</a>\\r\\n    </div>\\r\\n    <div class=\\\"pipe-content\\\">\\r\\n        <!-- 旋转面板 -->\\r\\n        <div class=\\\"panel active J-panel J-rotate-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box\\\">\\r\\n                <img class=\\\"J-source\\\" src=\\\"{{-imgList[0].src}}\\\">\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <div class=\\\"size\\\">\\r\\n                    <span class=\\\"J-num-width\\\"></span>*<span class=\\\"J-num-height\\\"></span>px\\r\\n                </div>\\r\\n                <a class=\\\"btn btn-rotate J-btn-rotate-left\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-rotate-l\\\"></i>{{=turnLeftTxt}}</a>\\r\\n                <a class=\\\"btn btn-rotate J-btn-rotate-right\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-rotate-r\\\"></i>{{=turnRightTxt}}</a>\\r\\n\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-main J-button-save\\\" href=\\\"javascript:void(0)\\\">{{=saveBtnTxt}}</a>\\r\\n                    <a class=\\\"button button-reset J-button-reset\\\" href=\\\"javascript:void(0)\\\">{{=resetBtnTxt}}</a>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <!-- 裁剪面板 -->\\r\\n        <div class=\\\"panel J-panel J-crop-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box J-crop-box\\\">\\r\\n                <img class=\\\"J-source\\\" src=\\\"{{-imgList[0].src}}\\\">\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <input class=\\\"num-width J-num-width J-input-crop-width\\\" type=\\\"text\\\">\\r\\n                <input class=\\\"J-fix-ratio J-radio-crop-fix\\\" id=\\\"fixRatio\\\" type=\\\"checkbox\\\" name=\\\"fixRatio\\\" hidden>\\r\\n                <label class=\\\"fix\\\" for=\\\"fixRatio\\\"><i class=\\\"ob-icon icon-lock\\\"></i></label>\\r\\n                <input class=\\\"num-height J-num-height J-input-crop-height\\\" type=\\\"text\\\">\\r\\n                <span class=\\\"txt\\\">px</span>\\r\\n\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-main J-button-save\\\" href=\\\"javascript:void(0)\\\">{{=saveBtnTxt}}</a>\\r\\n                    <a class=\\\"button button-reset J-button-reset\\\" href=\\\"javascript:void(0)\\\">{{=resetBtnTxt}}</a>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <!-- 缩放面板 -->\\r\\n        <div class=\\\"panel J-panel J-scale-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box\\\">\\r\\n                <div class=\\\"scale-img-wrapper J-scale-img-wrapper\\\">\\r\\n                    <img class=\\\"J-source\\\" src=\\\"{{-imgList[0].src}}\\\">\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <input class=\\\"num-width J-num-width J-input-scale-width\\\" type=\\\"text\\\">\\r\\n                <span class=\\\"txt\\\">X</span>\\r\\n                <input class=\\\"num-height J-num-height J-input-scale-width\\\" type=\\\"text\\\">\\r\\n                <span class=\\\"txt\\\">px</span>\\r\\n                <input class=\\\"scale-range J-scale-range J-range-scale-ratio\\\" type=\\\"range\\\" name=\\\"scaleRatio\\\" min=\\\"5\\\" max=\\\"100\\\" step=\\\"1\\\" defaultValue=\\\"100\\\">\\r\\n\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-main J-button-save\\\" href=\\\"javascript:void(0)\\\">{{=saveBtnTxt}}</a>\\r\\n                    <a class=\\\"button button-reset J-button-reset\\\" href=\\\"javascript:void(0)\\\">{{=resetBtnTxt}}</a>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <!-- 添加水印面板 -->\\r\\n        <div class=\\\"panel J-panel J-mark-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box J-mark-box\\\">\\r\\n                <img class=\\\"J-source\\\" src=\\\"{{-imgList[0].src}}\\\">\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=colorTxt}}:</div> \\r\\n                    <input class=\\\"J-color J-radio-mark-color\\\" id=\\\"colorWhite\\\" type=\\\"radio\\\" name=\\\"color\\\" value=\\\"0\\\" autocomplete=\\\"off\\\" hidden>        \\r\\n                    <label class=\\\"color\\\" for=\\\"colorWhite\\\"></label>\\r\\n                    <input class=\\\"J-color J-radio-mark-color\\\" id=\\\"colorBlack\\\" type=\\\"radio\\\" name=\\\"color\\\" value=\\\"1\\\" checked autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"color color-black\\\" for=\\\"colorBlack\\\"></label>\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=positionTxt}}:</div>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionCenter\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"0\\\" autocomplete=\\\"off\\\" checked hidden>\\r\\n                    <label class=\\\"position center\\\" for=\\\"positionCenter\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionLeftTop\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"1\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position left-top\\\" for=\\\"positionLeftTop\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionRightTop\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"2\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position right-top\\\" for=\\\"positionRightTop\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionLeftBottom\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"3\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position left-bottom\\\" for=\\\"positionLeftBottom\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionRightBottom\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"4\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position right-bottom\\\" for=\\\"positionRightBottom\\\"><span class=\\\"line\\\"></span></label>\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=opacityTxt}}:</div>\\r\\n                    <input class=\\\"opacity-range J-opacity J-range-mark-opacity\\\" name=\\\"opacity\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"1\\\" step=\\\"0.1\\\" defaultValue=\\\"0.8\\\">\\r\\n                </div>\\r\\n\\r\\n                <select class=\\\"J-markTxt J-select-mark-txt\\\" name=\\\"markTxt\\\">\\r\\n                    <option value=\\\"0\\\" selected=\\\"selected\\\">{{=showRoomTxt}}</option>\\r\\n                    <option value=\\\"1\\\">{{=companyNameTxt}}</option>\\r\\n                </select>\\r\\n\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-confirm J-button-confirm\\\" href=\\\"javascript:void(0)\\\">{{=confirmBtnTxt}}</a>\\r\\n                    <a class=\\\"button button-cancel J-button-cancel\\\" href=\\\"javascript:void(0)\\\">{{=cancelBtnTxt}}</a>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <!-- 批量添加水印 -->\\r\\n        <div class=\\\"panel panel-mark-all J-panel J-mark-all-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box J-mark-box-all\\\">\\r\\n                <img class=\\\"J-source\\\" src=\\\"{{-imgList[0].src}}\\\">\\r\\n            </div>\\r\\n            <div class=\\\"imgs-thumbnail\\\">\\r\\n                {{ for(var i=0;i<imgList.length;i++) { }} \\r\\n                <a class=\\\"img-thumbnail {{=i === 0 ? 'active' : ''}} J-img-thumbnail\\\" href=\\\"javascript:void(0)\\\">\\r\\n                    <img src=\\\"{{-imgList[i].src}}\\\">\\r\\n                    <span class=\\\"circle\\\"></span>\\r\\n                </a>\\r\\n                {{ } }}\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=colorTxt}}:</div> \\r\\n                    <input class=\\\"J-color J-radio-mark-color\\\" id=\\\"colorWhiteAll\\\" type=\\\"radio\\\" name=\\\"colorAll\\\" value=\\\"0\\\" autocomplete=\\\"off\\\" hidden>        \\r\\n                    <label class=\\\"color\\\" for=\\\"colorWhiteAll\\\"></label>\\r\\n                    <input class=\\\"J-color J-radio-mark-color\\\" id=\\\"colorBlackAll\\\" type=\\\"radio\\\" name=\\\"colorAll\\\" value=\\\"1\\\" checked autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"color color-black\\\" for=\\\"colorBlackAll\\\"></label>\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=positionTxt}}:</div>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionCenterAll\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"0\\\" autocomplete=\\\"off\\\" checked hidden>\\r\\n                    <label class=\\\"position center\\\" for=\\\"positionCenterAll\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionLeftTopAll\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"1\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position left-top\\\" for=\\\"positionLeftTopAll\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionRightTopAll\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"2\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position right-top\\\" for=\\\"positionRightTopAll\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionLeftBottomAll\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"3\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position left-bottom\\\" for=\\\"positionLeftBottomAll\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionRightBottomAll\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"4\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position right-bottom\\\" for=\\\"positionRightBottomAll\\\"><span class=\\\"line\\\"></span></label>\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=opacityTxt}}:</div>\\r\\n                    <input class=\\\"opacity-range J-opacity J-range-markAll-opacity\\\" name=\\\"opacityAll\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"1\\\" step=\\\"0.1\\\" defaultValue=\\\"0.8\\\">\\r\\n                </div>\\r\\n\\r\\n                <select class=\\\"J-markTxt J-select-markAll-txt\\\" name=\\\"markTxtAll\\\">\\r\\n                    <option value=\\\"0\\\" selected=\\\"selected\\\">{{=showRoomTxt}}</option>\\r\\n                    <option value=\\\"1\\\">{{=companyNameTxt}}</option>\\r\\n                </select>\\r\\n                \\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"pipe-footer J-imgs-thumbnail J-footer-normal\\\">\\r\\n        {{ for(var i=0;i<imgList.length;i++) { }} <a class=\\\"img-thumbnail {{=i === 0 ? 'active' : ''}} J-img-thumbnail\\\"\\r\\n            href=\\\"javascript:void(0)\\\">\\r\\n            <img src=\\\"{{-imgList[i].src}}\\\">\\r\\n            <span class=\\\"circle\\\"></span>\\r\\n            </a>\\r\\n            {{ } }}\\r\\n    </div>\\r\\n    <div class=\\\"pipe-footer mark-all-footer J-footer-special\\\" style=\\\"display:none;\\\">\\r\\n        <div class=\\\"buttons\\\">\\r\\n            <a class=\\\"button button-confirm J-button-confirm-all\\\" href=\\\"javascript:void(0)\\\">{{=saveBtnTxt}}</a>\\r\\n            <a class=\\\"button button-cancel J-button-cancel\\\" href=\\\"javascript:void(0)\\\">{{=cancelBtnTxt}}</a>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n</div>\"//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvZGlhbG9nLnRwbD9kNTU2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG1SQUFtUixnQkFBZ0IsZ0pBQWdKLGNBQWMsbUpBQW1KLGVBQWUsaUxBQWlMLGNBQWMsK0tBQStLLGlCQUFpQixrSUFBa0kscUhBQXFILGlCQUFpQiwrS0FBK0ssY0FBYyw2TEFBNkwsY0FBYyxtUEFBbVAsaUJBQWlCLGtYQUFrWCxjQUFjLDRJQUE0SSxlQUFlLHVKQUF1SixhQUFhLDBHQUEwRyxjQUFjLHFRQUFxUSxpQkFBaUIsd3FCQUF3cUIsYUFBYSwwR0FBMEcsY0FBYyw0VUFBNFUsaUJBQWlCLDZyQkFBNnJCLGFBQWEsMEdBQTBHLGNBQWMsMlFBQTJRLGlCQUFpQixrS0FBa0ssV0FBVyxxbUJBQXFtQixjQUFjLDZqREFBNmpELGFBQWEsd1dBQXdXLGNBQWMsdURBQXVELGlCQUFpQiwrTEFBK0wsZ0JBQWdCLDRHQUE0RyxlQUFlLGtTQUFrUyxpQkFBaUIsNkZBQTZGLGFBQWEsaUJBQWlCLE1BQU0sR0FBRyxnREFBZ0QsMEJBQTBCLG9GQUFvRixpQkFBaUIsdUdBQXVHLEVBQUUsR0FBRywrSkFBK0osV0FBVyx1bkJBQXVuQixjQUFjLDBtREFBMG1ELGFBQWEsb1hBQW9YLGNBQWMsdURBQXVELGlCQUFpQixzTUFBc00sYUFBYSxpQkFBaUIsTUFBTSxHQUFHLDRCQUE0QiwwQkFBMEIsMkZBQTJGLGlCQUFpQix1RkFBdUYsRUFBRSxHQUFHLHVHQUF1Ryw0SUFBNEksYUFBYSxvR0FBb0csZUFBZSIsImZpbGUiOiIuL3NyYy9qcy9kaWFsb2cudHBsLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcInBpcGVJbWctd3JhcHBlciBKLXBpcGUtd3JhcHBlclxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcInBpcGUtaGVhZGVyXFxcIj5cXHJcXG4gICAgICAgIDx1bCBjbGFzcz1cXFwibWVudVxcXCI+XFxyXFxuICAgICAgICAgICAgPGxpIGNsYXNzPVxcXCJpdGVtIEotaXRlbSBhY3RpdmVcXFwiPjxhIGNsYXNzPVxcXCJidG4gSi1tZW51LWJ0blxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj48aSBjbGFzcz1cXFwib2ItaWNvbiBpY29uLXJlZnJlc2hcXFwiPjwvaT57ez1yb3RhdGVNZW51VHh0fX08L2E+PC9saT5cXHJcXG4gICAgICAgICAgICA8bGkgY2xhc3M9XFxcIml0ZW0gSi1pdGVtXFxcIj48YSBjbGFzcz1cXFwiYnRuIEotbWVudS1idG5cXFwiIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCI+PGkgY2xhc3M9XFxcIm9iLWljb24gaWNvbi1jcm9wXFxcIj48L2k+e3s9Y3JvcE1lbnVUeHR9fTwvYT48L2xpPlxcclxcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwiaXRlbSBKLWl0ZW1cXFwiPjxhIGNsYXNzPVxcXCJidG4gSi1tZW51LWJ0blxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj48aSBjbGFzcz1cXFwib2ItaWNvbiBpY29uLXNjYWxpbmdcXFwiPjwvaT57ez1zY2FsZU1lbnVUeHR9fTwvYT48L2xpPlxcclxcbiAgICAgICAgICAgIDxsaSBjbGFzcz1cXFwiaXRlbSBKLWl0ZW0gSi1pdGVtLW1hcmtcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnRuIEotbWVudS1idG5cXFwiIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCI+PGkgY2xhc3M9XFxcIm9iLWljb24gaWNvbi1hZGQtbFxcXCI+PC9pPnt7PW1hcmtNZW51VHh0fX08L2E+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW0gaXRlbS1zdWJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImJ0biBKLW1lbnUtYnRuLXN1YlxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj48aSBjbGFzcz1cXFwib2ItaWNvbiBpY29uLWJhdGNoXFxcIj48L2k+e3s9bWFya0FsbE1lbnVUeHR9fTwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgICAgICA8bGkgY2xhc3M9XFxcIml0ZW0gSi1pdGVtIEotaXRlbS1tYXJrLWFsbFxcXCIgc3R5bGU9XFxcImRpc3BsYXk6bm9uZTtcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnRuIEotbWVudS1idG5cXFwiIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCI+PGkgY2xhc3M9XFxcIm9iLWljb24gaWNvbi1iYXRjaFxcXCI+PC9pPnt7PW1hcmtBbGxNZW51VHh0fX08L2E+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW0gaXRlbS1zdWJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImJ0biBKLW1lbnUtYnRuLXN1YlxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj48aSBjbGFzcz1cXFwib2ItaWNvbiBpY29uLWFkZC1sXFxcIj48L2k+e3s9bWFya01lbnVUeHR9fTwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9saT5cXHJcXG4gICAgICAgIDwvdWw+XFxyXFxuICAgICAgICA8YSBjbGFzcz1cXFwiYnRuIGJ0bi1jbG9zZSBKLWJ1dHRvbi1jbG9zZVxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj48aSBjbGFzcz1cXFwib2ItaWNvbiBpY29uLWRlbGV0ZVxcXCI+PC9pPnt7PWNsb3NlQnRuVHh0fX08L2E+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJwaXBlLWNvbnRlbnRcXFwiPlxcclxcbiAgICAgICAgPCEtLSDml4vovazpnaLmnb8gLS0+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbCBhY3RpdmUgSi1wYW5lbCBKLXJvdGF0ZS1wYW5lbFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW1nLWJveCBKLWltZy1ib3hcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJKLXNvdXJjZVxcXCIgc3JjPVxcXCJ7ey1pbWdMaXN0WzBdLnNyY319XFxcIj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWZvb3RlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInNpemVcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcIkotbnVtLXdpZHRoXFxcIj48L3NwYW4+KjxzcGFuIGNsYXNzPVxcXCJKLW51bS1oZWlnaHRcXFwiPjwvc3Bhbj5weFxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImJ0biBidG4tcm90YXRlIEotYnRuLXJvdGF0ZS1sZWZ0XFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiPjxpIGNsYXNzPVxcXCJvYi1pY29uIGljb24tcm90YXRlLWxcXFwiPjwvaT57ez10dXJuTGVmdFR4dH19PC9hPlxcclxcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnRuIGJ0bi1yb3RhdGUgSi1idG4tcm90YXRlLXJpZ2h0XFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiPjxpIGNsYXNzPVxcXCJvYi1pY29uIGljb24tcm90YXRlLXJcXFwiPjwvaT57ez10dXJuUmlnaHRUeHR9fTwvYT5cXHJcXG5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnV0dG9uIGJ1dHRvbi1tYWluIEotYnV0dG9uLXNhdmVcXFwiIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCI+e3s9c2F2ZUJ0blR4dH19PC9hPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImJ1dHRvbiBidXR0b24tcmVzZXQgSi1idXR0b24tcmVzZXRcXFwiIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCI+e3s9cmVzZXRCdG5UeHR9fTwvYT5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwhLS0g6KOB5Ymq6Z2i5p2/IC0tPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwicGFuZWwgSi1wYW5lbCBKLWNyb3AtcGFuZWxcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImltZy1ib3ggSi1pbWctYm94IEotY3JvcC1ib3hcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJKLXNvdXJjZVxcXCIgc3JjPVxcXCJ7ey1pbWdMaXN0WzBdLnNyY319XFxcIj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWZvb3RlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwibnVtLXdpZHRoIEotbnVtLXdpZHRoIEotaW5wdXQtY3JvcC13aWR0aFxcXCIgdHlwZT1cXFwidGV4dFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1maXgtcmF0aW8gSi1yYWRpby1jcm9wLWZpeFxcXCIgaWQ9XFxcImZpeFJhdGlvXFxcIiB0eXBlPVxcXCJjaGVja2JveFxcXCIgbmFtZT1cXFwiZml4UmF0aW9cXFwiIGhpZGRlbj5cXHJcXG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJmaXhcXFwiIGZvcj1cXFwiZml4UmF0aW9cXFwiPjxpIGNsYXNzPVxcXCJvYi1pY29uIGljb24tbG9ja1xcXCI+PC9pPjwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwibnVtLWhlaWdodCBKLW51bS1oZWlnaHQgSi1pbnB1dC1jcm9wLWhlaWdodFxcXCIgdHlwZT1cXFwidGV4dFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ0eHRcXFwiPnB4PC9zcGFuPlxcclxcblxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b25zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJidXR0b24gYnV0dG9uLW1haW4gSi1idXR0b24tc2F2ZVxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj57ez1zYXZlQnRuVHh0fX08L2E+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnV0dG9uIGJ1dHRvbi1yZXNldCBKLWJ1dHRvbi1yZXNldFxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj57ez1yZXNldEJ0blR4dH19PC9hPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPCEtLSDnvKnmlL7pnaLmnb8gLS0+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbCBKLXBhbmVsIEotc2NhbGUtcGFuZWxcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImltZy1ib3ggSi1pbWctYm94XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic2NhbGUtaW1nLXdyYXBwZXIgSi1zY2FsZS1pbWctd3JhcHBlclxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJKLXNvdXJjZVxcXCIgc3JjPVxcXCJ7ey1pbWdMaXN0WzBdLnNyY319XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGVudC1mb290ZXJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcIm51bS13aWR0aCBKLW51bS13aWR0aCBKLWlucHV0LXNjYWxlLXdpZHRoXFxcIiB0eXBlPVxcXCJ0ZXh0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInR4dFxcXCI+WDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJudW0taGVpZ2h0IEotbnVtLWhlaWdodCBKLWlucHV0LXNjYWxlLXdpZHRoXFxcIiB0eXBlPVxcXCJ0ZXh0XFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInR4dFxcXCI+cHg8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwic2NhbGUtcmFuZ2UgSi1zY2FsZS1yYW5nZSBKLXJhbmdlLXNjYWxlLXJhdGlvXFxcIiB0eXBlPVxcXCJyYW5nZVxcXCIgbmFtZT1cXFwic2NhbGVSYXRpb1xcXCIgbWluPVxcXCI1XFxcIiBtYXg9XFxcIjEwMFxcXCIgc3RlcD1cXFwiMVxcXCIgZGVmYXVsdFZhbHVlPVxcXCIxMDBcXFwiPlxcclxcblxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b25zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJidXR0b24gYnV0dG9uLW1haW4gSi1idXR0b24tc2F2ZVxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj57ez1zYXZlQnRuVHh0fX08L2E+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnV0dG9uIGJ1dHRvbi1yZXNldCBKLWJ1dHRvbi1yZXNldFxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj57ez1yZXNldEJ0blR4dH19PC9hPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPCEtLSDmt7vliqDmsLTljbDpnaLmnb8gLS0+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbCBKLXBhbmVsIEotbWFyay1wYW5lbFxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW1nLWJveCBKLWltZy1ib3ggSi1tYXJrLWJveFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcIkotc291cmNlXFxcIiBzcmM9XFxcInt7LWltZ0xpc3RbMF0uc3JjfX1cXFwiPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtZm9vdGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ0eHQtbGFiZWxcXFwiPnt7PWNvbG9yVHh0fX06PC9kaXY+IFxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJKLWNvbG9yIEotcmFkaW8tbWFyay1jb2xvclxcXCIgaWQ9XFxcImNvbG9yV2hpdGVcXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJjb2xvclxcXCIgdmFsdWU9XFxcIjBcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBoaWRkZW4+ICAgICAgICBcXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cXFwiY29sb3JcXFwiIGZvcj1cXFwiY29sb3JXaGl0ZVxcXCI+PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1jb2xvciBKLXJhZGlvLW1hcmstY29sb3JcXFwiIGlkPVxcXCJjb2xvckJsYWNrXFxcIiB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwiY29sb3JcXFwiIHZhbHVlPVxcXCIxXFxcIiBjaGVja2VkIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBoaWRkZW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcImNvbG9yIGNvbG9yLWJsYWNrXFxcIiBmb3I9XFxcImNvbG9yQmxhY2tcXFwiPjwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpdGVtXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInR4dC1sYWJlbFxcXCI+e3s9cG9zaXRpb25UeHR9fTo8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1wb3NpdGlvbiBKLXJhZGlvLW1hcmstcG9zaXRpb25cXFwiIGlkPVxcXCJwb3NpdGlvbkNlbnRlclxcXCIgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInBvc2l0aW9uXFxcIiB2YWx1ZT1cXFwiMFxcXCIgYXV0b2NvbXBsZXRlPVxcXCJvZmZcXFwiIGNoZWNrZWQgaGlkZGVuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJwb3NpdGlvbiBjZW50ZXJcXFwiIGZvcj1cXFwicG9zaXRpb25DZW50ZXJcXFwiPjxzcGFuIGNsYXNzPVxcXCJsaW5lXFxcIj48L3NwYW4+PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1wb3NpdGlvbiBKLXJhZGlvLW1hcmstcG9zaXRpb25cXFwiIGlkPVxcXCJwb3NpdGlvbkxlZnRUb3BcXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJwb3NpdGlvblxcXCIgdmFsdWU9XFxcIjFcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBoaWRkZW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcInBvc2l0aW9uIGxlZnQtdG9wXFxcIiBmb3I9XFxcInBvc2l0aW9uTGVmdFRvcFxcXCI+PHNwYW4gY2xhc3M9XFxcImxpbmVcXFwiPjwvc3Bhbj48L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJKLXBvc2l0aW9uIEotcmFkaW8tbWFyay1wb3NpdGlvblxcXCIgaWQ9XFxcInBvc2l0aW9uUmlnaHRUb3BcXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJwb3NpdGlvblxcXCIgdmFsdWU9XFxcIjJcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBoaWRkZW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcInBvc2l0aW9uIHJpZ2h0LXRvcFxcXCIgZm9yPVxcXCJwb3NpdGlvblJpZ2h0VG9wXFxcIj48c3BhbiBjbGFzcz1cXFwibGluZVxcXCI+PC9zcGFuPjwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcIkotcG9zaXRpb24gSi1yYWRpby1tYXJrLXBvc2l0aW9uXFxcIiBpZD1cXFwicG9zaXRpb25MZWZ0Qm90dG9tXFxcIiB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwicG9zaXRpb25cXFwiIHZhbHVlPVxcXCIzXFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgaGlkZGVuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJwb3NpdGlvbiBsZWZ0LWJvdHRvbVxcXCIgZm9yPVxcXCJwb3NpdGlvbkxlZnRCb3R0b21cXFwiPjxzcGFuIGNsYXNzPVxcXCJsaW5lXFxcIj48L3NwYW4+PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1wb3NpdGlvbiBKLXJhZGlvLW1hcmstcG9zaXRpb25cXFwiIGlkPVxcXCJwb3NpdGlvblJpZ2h0Qm90dG9tXFxcIiB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwicG9zaXRpb25cXFwiIHZhbHVlPVxcXCI0XFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgaGlkZGVuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJwb3NpdGlvbiByaWdodC1ib3R0b21cXFwiIGZvcj1cXFwicG9zaXRpb25SaWdodEJvdHRvbVxcXCI+PHNwYW4gY2xhc3M9XFxcImxpbmVcXFwiPjwvc3Bhbj48L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ0eHQtbGFiZWxcXFwiPnt7PW9wYWNpdHlUeHR9fTo8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwib3BhY2l0eS1yYW5nZSBKLW9wYWNpdHkgSi1yYW5nZS1tYXJrLW9wYWNpdHlcXFwiIG5hbWU9XFxcIm9wYWNpdHlcXFwiIHR5cGU9XFxcInJhbmdlXFxcIiBtaW49XFxcIjBcXFwiIG1heD1cXFwiMVxcXCIgc3RlcD1cXFwiMC4xXFxcIiBkZWZhdWx0VmFsdWU9XFxcIjAuOFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcblxcclxcbiAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJKLW1hcmtUeHQgSi1zZWxlY3QtbWFyay10eHRcXFwiIG5hbWU9XFxcIm1hcmtUeHRcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMFxcXCIgc2VsZWN0ZWQ9XFxcInNlbGVjdGVkXFxcIj57ez1zaG93Um9vbVR4dH19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIxXFxcIj57ez1jb21wYW55TmFtZVR4dH19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcblxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b25zXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJidXR0b24gYnV0dG9uLWNvbmZpcm0gSi1idXR0b24tY29uZmlybVxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj57ez1jb25maXJtQnRuVHh0fX08L2E+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwiYnV0dG9uIGJ1dHRvbi1jYW5jZWwgSi1idXR0b24tY2FuY2VsXFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OnZvaWQoMClcXFwiPnt7PWNhbmNlbEJ0blR4dH19PC9hPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPCEtLSDmibnph4/mt7vliqDmsLTljbAgLS0+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwYW5lbCBwYW5lbC1tYXJrLWFsbCBKLXBhbmVsIEotbWFyay1hbGwtcGFuZWxcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImltZy1ib3ggSi1pbWctYm94IEotbWFyay1ib3gtYWxsXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwiSi1zb3VyY2VcXFwiIHNyYz1cXFwie3staW1nTGlzdFswXS5zcmN9fVxcXCI+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW1ncy10aHVtYm5haWxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICB7eyBmb3IodmFyIGk9MDtpPGltZ0xpc3QubGVuZ3RoO2krKykgeyB9fSBcXHJcXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcImltZy10aHVtYm5haWwge3s9aSA9PT0gMCA/ICdhY3RpdmUnIDogJyd9fSBKLWltZy10aHVtYm5haWxcXFwiIGhyZWY9XFxcImphdmFzY3JpcHQ6dm9pZCgwKVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cXFwie3staW1nTGlzdFtpXS5zcmN9fVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiY2lyY2xlXFxcIj48L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICAgICAge3sgfSB9fVxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtZm9vdGVyXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ0eHQtbGFiZWxcXFwiPnt7PWNvbG9yVHh0fX06PC9kaXY+IFxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJKLWNvbG9yIEotcmFkaW8tbWFyay1jb2xvclxcXCIgaWQ9XFxcImNvbG9yV2hpdGVBbGxcXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJjb2xvckFsbFxcXCIgdmFsdWU9XFxcIjBcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBoaWRkZW4+ICAgICAgICBcXHJcXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cXFwiY29sb3JcXFwiIGZvcj1cXFwiY29sb3JXaGl0ZUFsbFxcXCI+PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1jb2xvciBKLXJhZGlvLW1hcmstY29sb3JcXFwiIGlkPVxcXCJjb2xvckJsYWNrQWxsXFxcIiB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwiY29sb3JBbGxcXFwiIHZhbHVlPVxcXCIxXFxcIiBjaGVja2VkIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBoaWRkZW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcImNvbG9yIGNvbG9yLWJsYWNrXFxcIiBmb3I9XFxcImNvbG9yQmxhY2tBbGxcXFwiPjwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpdGVtXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInR4dC1sYWJlbFxcXCI+e3s9cG9zaXRpb25UeHR9fTo8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1wb3NpdGlvbiBKLXJhZGlvLW1hcmstcG9zaXRpb25cXFwiIGlkPVxcXCJwb3NpdGlvbkNlbnRlckFsbFxcXCIgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInBvc2l0aW9uQWxsXFxcIiB2YWx1ZT1cXFwiMFxcXCIgYXV0b2NvbXBsZXRlPVxcXCJvZmZcXFwiIGNoZWNrZWQgaGlkZGVuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJwb3NpdGlvbiBjZW50ZXJcXFwiIGZvcj1cXFwicG9zaXRpb25DZW50ZXJBbGxcXFwiPjxzcGFuIGNsYXNzPVxcXCJsaW5lXFxcIj48L3NwYW4+PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1wb3NpdGlvbiBKLXJhZGlvLW1hcmstcG9zaXRpb25cXFwiIGlkPVxcXCJwb3NpdGlvbkxlZnRUb3BBbGxcXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJwb3NpdGlvbkFsbFxcXCIgdmFsdWU9XFxcIjFcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBoaWRkZW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcInBvc2l0aW9uIGxlZnQtdG9wXFxcIiBmb3I9XFxcInBvc2l0aW9uTGVmdFRvcEFsbFxcXCI+PHNwYW4gY2xhc3M9XFxcImxpbmVcXFwiPjwvc3Bhbj48L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJKLXBvc2l0aW9uIEotcmFkaW8tbWFyay1wb3NpdGlvblxcXCIgaWQ9XFxcInBvc2l0aW9uUmlnaHRUb3BBbGxcXFwiIHR5cGU9XFxcInJhZGlvXFxcIiBuYW1lPVxcXCJwb3NpdGlvbkFsbFxcXCIgdmFsdWU9XFxcIjJcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBoaWRkZW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XFxcInBvc2l0aW9uIHJpZ2h0LXRvcFxcXCIgZm9yPVxcXCJwb3NpdGlvblJpZ2h0VG9wQWxsXFxcIj48c3BhbiBjbGFzcz1cXFwibGluZVxcXCI+PC9zcGFuPjwvbGFiZWw+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcIkotcG9zaXRpb24gSi1yYWRpby1tYXJrLXBvc2l0aW9uXFxcIiBpZD1cXFwicG9zaXRpb25MZWZ0Qm90dG9tQWxsXFxcIiB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwicG9zaXRpb25BbGxcXFwiIHZhbHVlPVxcXCIzXFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgaGlkZGVuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJwb3NpdGlvbiBsZWZ0LWJvdHRvbVxcXCIgZm9yPVxcXCJwb3NpdGlvbkxlZnRCb3R0b21BbGxcXFwiPjxzcGFuIGNsYXNzPVxcXCJsaW5lXFxcIj48L3NwYW4+PC9sYWJlbD5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiSi1wb3NpdGlvbiBKLXJhZGlvLW1hcmstcG9zaXRpb25cXFwiIGlkPVxcXCJwb3NpdGlvblJpZ2h0Qm90dG9tQWxsXFxcIiB0eXBlPVxcXCJyYWRpb1xcXCIgbmFtZT1cXFwicG9zaXRpb25BbGxcXFwiIHZhbHVlPVxcXCI0XFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgaGlkZGVuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVxcXCJwb3NpdGlvbiByaWdodC1ib3R0b21cXFwiIGZvcj1cXFwicG9zaXRpb25SaWdodEJvdHRvbUFsbFxcXCI+PHNwYW4gY2xhc3M9XFxcImxpbmVcXFwiPjwvc3Bhbj48L2xhYmVsPlxcclxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ0eHQtbGFiZWxcXFwiPnt7PW9wYWNpdHlUeHR9fTo8L2Rpdj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwib3BhY2l0eS1yYW5nZSBKLW9wYWNpdHkgSi1yYW5nZS1tYXJrQWxsLW9wYWNpdHlcXFwiIG5hbWU9XFxcIm9wYWNpdHlBbGxcXFwiIHR5cGU9XFxcInJhbmdlXFxcIiBtaW49XFxcIjBcXFwiIG1heD1cXFwiMVxcXCIgc3RlcD1cXFwiMC4xXFxcIiBkZWZhdWx0VmFsdWU9XFxcIjAuOFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcblxcclxcbiAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVxcXCJKLW1hcmtUeHQgSi1zZWxlY3QtbWFya0FsbC10eHRcXFwiIG5hbWU9XFxcIm1hcmtUeHRBbGxcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cXFwiMFxcXCIgc2VsZWN0ZWQ9XFxcInNlbGVjdGVkXFxcIj57ez1zaG93Um9vbVR4dH19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVxcXCIxXFxcIj57ez1jb21wYW55TmFtZVR4dH19PC9vcHRpb24+XFxyXFxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxcclxcbiAgICAgICAgICAgICAgICBcXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwicGlwZS1mb290ZXIgSi1pbWdzLXRodW1ibmFpbCBKLWZvb3Rlci1ub3JtYWxcXFwiPlxcclxcbiAgICAgICAge3sgZm9yKHZhciBpPTA7aTxpbWdMaXN0Lmxlbmd0aDtpKyspIHsgfX0gPGEgY2xhc3M9XFxcImltZy10aHVtYm5haWwge3s9aSA9PT0gMCA/ICdhY3RpdmUnIDogJyd9fSBKLWltZy10aHVtYm5haWxcXFwiXFxyXFxuICAgICAgICAgICAgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj5cXHJcXG4gICAgICAgICAgICA8aW1nIHNyYz1cXFwie3staW1nTGlzdFtpXS5zcmN9fVxcXCI+XFxyXFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImNpcmNsZVxcXCI+PC9zcGFuPlxcclxcbiAgICAgICAgICAgIDwvYT5cXHJcXG4gICAgICAgICAgICB7eyB9IH19XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJwaXBlLWZvb3RlciBtYXJrLWFsbC1mb290ZXIgSi1mb290ZXItc3BlY2lhbFxcXCIgc3R5bGU9XFxcImRpc3BsYXk6bm9uZTtcXFwiPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uc1xcXCI+XFxyXFxuICAgICAgICAgICAgPGEgY2xhc3M9XFxcImJ1dHRvbiBidXR0b24tY29uZmlybSBKLWJ1dHRvbi1jb25maXJtLWFsbFxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj57ez1zYXZlQnRuVHh0fX08L2E+XFxyXFxuICAgICAgICAgICAgPGEgY2xhc3M9XFxcImJ1dHRvbiBidXR0b24tY2FuY2VsIEotYnV0dG9uLWNhbmNlbFxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDp2b2lkKDApXFxcIj57ez1jYW5jZWxCdG5UeHR9fTwvYT5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG5cXHJcXG48L2Rpdj5cIiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/dialog.tpl\n");

    /***/
  },

  /***/"./src/js/dragBox.js":
  /*!***************************!*\
    !*** ./src/js/dragBox.js ***!
    \***************************/
  /*! exports provided: DragBox */
  /***/function srcJsDragBoxJs(module, __webpack_exports__, __webpack_require__) {

    "use strict";

    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DragBox\", function() { return DragBox; });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ \"./src/js/util.js\");\n\nclass DragBox {\n    constructor(options) {\n        // 默认配置参数\n        const defaults = {\n            // 待编辑图片元素\n            ele: '',\n            width: '100%',\n            height: '100%',\n            markText: 'producttest.en.made-in-china.com',\n            // 是否有明暗效果，主要是裁剪图片效果\n            hasLight: false,\n            fixRatio: false,\n            // 拖动触点回调函数\n            onDragPoint: (boxData) => {},\n            // 拖动框回调函数\n            onDragComplete: (left, top) => {}\n        };\n\n        options = Object.assign({}, defaults, options);\n        this.ele = options.ele;\n        this.width = options.width;\n        this.height = options.height;\n        this.markText = options.markText;\n        this.hasLight = options.hasLight;\n        this.fixRatio = options.fixRatio;\n        this.onDragPoint = options.onDragPoint;\n        this.onDragComplete = options.onDragComplete;\n\n        this.init();\n    }\n    init() {\n        this.$ele = $(this.ele);\n        let src = this.$ele.attr('src');\n        let $parent = this.$ele.parent();\n\n        let dragBoxHtml = `<div class=\"dragbox-wrapper J-dragbox-wrapper\">\n                                <img class=\"J-source\" src=\"${src}\">\n                                <div class=\"drag-box J-drag-box\">\n                                    <div class=\"drag-point up-left J-drag-point\"></div>\n                                    <div class=\"drag-point up J-drag-point\"></div>\n                                    <div class=\"drag-point up-right J-drag-point\"></div>\n                                    <div class=\"drag-point right J-drag-point\"></div>\n                                    <div class=\"drag-point right-down J-drag-point\"></div>\n                                    <div class=\"drag-point down J-drag-point\"></div>\n                                    <div class=\"drag-point left-down J-drag-point\"></div>\n                                    <div class=\"drag-point left J-drag-point\"></div>\n                                    <div class=\"mark-txt J-mark-txt\">${this.markText}</div>\n                                </div>\n                            </div>`;\n        if (this.hasLight) {\n            dragBoxHtml = `<div class=\"dragbox-wrapper J-dragbox-wrapper\">\n                                <img class=\"J-source img-dark\" src=\"${src}\">\n                                <img class=\"J-source img-light J-img-light\" src=\"${src}\">\n                                <div class=\"drag-box J-drag-box\">\n                                    <div class=\"drag-point up-left J-drag-point\"></div>\n                                    <div class=\"drag-point up J-drag-point\"></div>\n                                    <div class=\"drag-point up-right J-drag-point\"></div>\n                                    <div class=\"drag-point right J-drag-point\"></div>\n                                    <div class=\"drag-point right-down J-drag-point\"></div>\n                                    <div class=\"drag-point down J-drag-point\"></div>\n                                    <div class=\"drag-point left-down J-drag-point\"></div>\n                                    <div class=\"drag-point left J-drag-point\"></div>\n                                </div>\n                            </div>`;\n        }\n\n        $parent.html(dragBoxHtml);\n        this.$dragBox = $parent.find('.J-drag-box');\n        if (!this.hasLight) {\n            this.$dragBox.css({\n                width: this.$dragBox.find('.J-mark-txt').width(),\n                height: this.$dragBox.find('.J-mark-txt').height()\n            });\n        }\n\n        this.$dragPoint = this.$dragBox.find('.J-drag-point');\n\n\n        this.boxEl = this.$dragBox.get(0);\n        this.containerEl = this.boxEl.parentNode;\n        this.imgLight = $parent.find('.J-img-light:first').get(0);\n\n        this.boxData = {\n            left: this.boxEl.offsetLeft,\n            top: this.boxEl.offsetTop,\n            width: this.boxEl.offsetWidth,\n            height: this.boxEl.offsetHeight,\n            ratio: this.boxEl.offsetWidth / this.boxEl.offsetHeight\n        };\n\n        this._bind();\n\n\n        Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"drag\"])(this.boxEl, this.boxEl, this.boxEl.parentNode, (left, top) => {\n            this._light();\n            this.onDragComplete(left, top);\n        });\n\n\n    }\n    _bind() {\n        let isDraging = false;\n        let contact = \"\"; //表示被按下的触点\n        const DRAGPOINT = ['up-left', 'up', 'up-right', 'right', 'right-down', 'down', 'left-down', 'left'];\n        let dragBoxRatio = this.boxData.width / this.boxData.height;\n        //鼠标按下时\n        this.$dragPoint.on('mousedown', (e) => {\n            e.stopPropagation();\n            isDraging = true;\n            let index = $(e.target).index();\n            contact = DRAGPOINT[index];\n            dragBoxRatio = this.boxData.width / this.boxData.height;\n        })\n\n        $(document).on('mouseup', (e) => {\n            isDraging = false;\n            this.boxData = {\n                left: this.boxEl.offsetLeft,\n                top: this.boxEl.offsetTop,\n                width: this.boxEl.offsetWidth,\n                height: this.boxEl.offsetHeight,\n                ratio: this.boxEl.offsetWidth / this.boxEl.offsetHeight\n            };\n        })\n        $(document).on('mousemove', (e) => {\n            if (isDraging == true) {\n                this._move(e, contact, dragBoxRatio);\n                this._light();\n\n                this.boxData = {\n                    left: this.boxEl.offsetLeft,\n                    top: this.boxEl.offsetTop,\n                    width: this.boxEl.offsetWidth,\n                    height: this.boxEl.offsetHeight,\n                    ratio: this.boxEl.offsetWidth / this.boxEl.offsetHeight\n                };\n\n                this.onDragPoint(this.boxData);\n            }\n        })\n\n    }\n\n    //获取元素相对于屏幕左边及上边的距离，利用offsetLeft\n    _getPosition() {\n        let el = this.boxEl;\n        let left = el.offsetLeft;\n        let top = el.offsetTop;\n        let parent = el.offsetParent;\n        while (parent != null) {\n            left += parent.offsetLeft;\n            top += parent.offsetTop;\n            parent = parent.offsetParent;\n        }\n        return {\n            \"left\": left,\n            \"top\": top\n        };\n    }\n\n    _move(e, contact, dragBoxRatio) {\n\n        let x = e.clientX,\n            y = e.clientY;\n        let oldWidth = this.boxEl.offsetWidth; //选取框变化前的宽度\n        let oldHeight = this.boxEl.offsetHeight; //选取框变化前的高度\n        let position = this._getPosition();\n        let top = position.top;\n        let left = position.left;\n\n\n        let newWidth;\n        let newHeight;\n        let newLeft;\n        let newTop;\n\n        // 约束比例：根据宽度计算高度\n        if (contact.indexOf('left') != -1) {\n            let addWidth = left - x;\n            if (addWidth >= 0 && this.boxEl.offsetLeft <= 0) {\n                return false;\n            }\n\n            newWidth = oldWidth + addWidth;\n            newLeft = this.boxEl.offsetLeft - addWidth;\n        }\n        if (contact.indexOf('right') != -1) {\n            let addWidth = x - left - oldWidth;\n            if (addWidth >= 0 && (this.containerEl.clientWidth - (this.boxEl.offsetLeft + oldWidth + addWidth)) <= 0) {\n                return false;\n            }\n\n            newWidth = oldWidth + addWidth;\n            newLeft = this.boxEl.offsetLeft;\n        }\n        if (contact.indexOf('up') != -1) {\n            let addHeight;\n            if (this.fixRatio) {\n                newHeight = newWidth / dragBoxRatio;\n                addHeight = newHeight - oldHeight;\n            } else {\n                addHeight = top - y;\n                newHeight = oldHeight + addHeight;\n            }\n            newTop = this.boxEl.offsetTop - addHeight;\n\n            if (addHeight >= 0 && this.boxEl.offsetTop <= 0) {\n                return false;\n            }\n        }\n        if (contact.indexOf('down') != -1) {\n            let addHeight;\n            if (this.fixRatio) {\n                newHeight = newWidth / dragBoxRatio;\n                addHeight = newHeight - oldHeight;\n                newTop = this.boxEl.offsetTop;\n            } else {\n                addHeight = y - top - oldHeight;\n                newHeight = oldHeight + addHeight;\n            }\n\n            if (addHeight >= 0 && (this.containerEl.clientHeight - (this.boxEl.offsetTop + oldHeight + addHeight)) <= 0) {\n                return false;\n            }\n\n        }\n\n\n        this.boxEl.style.width = newWidth + 'px';\n        this.boxEl.style.height = newHeight + 'px';\n        this.boxEl.style.left = newLeft + 'px';\n        this.boxEl.style.top = newTop + 'px';\n    }\n\n    _light() {\n        if (this.hasLight) {\n            this._setChoice();\n        }\n    }\n    //设置选取框图片区域明亮显示\n    _setChoice() {\n        var top = this.boxEl.offsetTop;\n        var right = this.boxEl.offsetLeft + this.boxEl.offsetWidth;\n        var bottom = this.boxEl.offsetTop + this.boxEl.offsetHeight;\n        var left = this.boxEl.offsetLeft;\n        this.imgLight.style.clip = \"rect(\" + top + \"px,\" + right + \"px,\" + bottom + \"px,\" + left + \"px)\";\n    }\n\n    update(width, height) {\n        width && (this.width = width);\n        height && (this.height = height);\n        this.$dragBox.css({\n            width: this.width,\n            height: this.height\n        });\n    }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvZHJhZ0JveC5qcz9lZDJkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUdnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7O0FBRUEsa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkRBQTZELElBQUk7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLGNBQWM7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsSUFBSTtBQUMxRSxtRkFBbUYsSUFBSTtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBLFFBQVEsa0RBQUk7QUFDWjtBQUNBO0FBQ0EsU0FBUzs7O0FBR1Q7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUMsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUlDIiwiZmlsZSI6Ii4vc3JjL2pzL2RyYWdCb3guanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIGRyYWcsXG4gICAgXyRcbn0gZnJvbSAnLi91dGlsJztcbmNsYXNzIERyYWdCb3gge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgLy8g6buY6K6k6YWN572u5Y+C5pWwXG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgLy8g5b6F57yW6L6R5Zu+54mH5YWD57SgXG4gICAgICAgICAgICBlbGU6ICcnLFxuICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgICAgbWFya1RleHQ6ICdwcm9kdWN0dGVzdC5lbi5tYWRlLWluLWNoaW5hLmNvbScsXG4gICAgICAgICAgICAvLyDmmK/lkKbmnInmmI7mmpfmlYjmnpzvvIzkuLvopoHmmK/oo4Hliarlm77niYfmlYjmnpxcbiAgICAgICAgICAgIGhhc0xpZ2h0OiBmYWxzZSxcbiAgICAgICAgICAgIGZpeFJhdGlvOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIOaLluWKqOinpueCueWbnuiwg+WHveaVsFxuICAgICAgICAgICAgb25EcmFnUG9pbnQ6IChib3hEYXRhKSA9PiB7fSxcbiAgICAgICAgICAgIC8vIOaLluWKqOahhuWbnuiwg+WHveaVsFxuICAgICAgICAgICAgb25EcmFnQ29tcGxldGU6IChsZWZ0LCB0b3ApID0+IHt9XG4gICAgICAgIH07XG5cbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5lbGUgPSBvcHRpb25zLmVsZTtcbiAgICAgICAgdGhpcy53aWR0aCA9IG9wdGlvbnMud2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQ7XG4gICAgICAgIHRoaXMubWFya1RleHQgPSBvcHRpb25zLm1hcmtUZXh0O1xuICAgICAgICB0aGlzLmhhc0xpZ2h0ID0gb3B0aW9ucy5oYXNMaWdodDtcbiAgICAgICAgdGhpcy5maXhSYXRpbyA9IG9wdGlvbnMuZml4UmF0aW87XG4gICAgICAgIHRoaXMub25EcmFnUG9pbnQgPSBvcHRpb25zLm9uRHJhZ1BvaW50O1xuICAgICAgICB0aGlzLm9uRHJhZ0NvbXBsZXRlID0gb3B0aW9ucy5vbkRyYWdDb21wbGV0ZTtcblxuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy4kZWxlID0gJCh0aGlzLmVsZSk7XG4gICAgICAgIGxldCBzcmMgPSB0aGlzLiRlbGUuYXR0cignc3JjJyk7XG4gICAgICAgIGxldCAkcGFyZW50ID0gdGhpcy4kZWxlLnBhcmVudCgpO1xuXG4gICAgICAgIGxldCBkcmFnQm94SHRtbCA9IGA8ZGl2IGNsYXNzPVwiZHJhZ2JveC13cmFwcGVyIEotZHJhZ2JveC13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJKLXNvdXJjZVwiIHNyYz1cIiR7c3JjfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1ib3ggSi1kcmFnLWJveFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgdXAtbGVmdCBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLXBvaW50IHVwIEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgdXAtcmlnaHQgSi1kcmFnLXBvaW50XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1wb2ludCByaWdodCBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLXBvaW50IHJpZ2h0LWRvd24gSi1kcmFnLXBvaW50XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1wb2ludCBkb3duIEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgbGVmdC1kb3duIEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgbGVmdCBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYXJrLXR4dCBKLW1hcmstdHh0XCI+JHt0aGlzLm1hcmtUZXh0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gO1xuICAgICAgICBpZiAodGhpcy5oYXNMaWdodCkge1xuICAgICAgICAgICAgZHJhZ0JveEh0bWwgPSBgPGRpdiBjbGFzcz1cImRyYWdib3gtd3JhcHBlciBKLWRyYWdib3gtd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiSi1zb3VyY2UgaW1nLWRhcmtcIiBzcmM9XCIke3NyY31cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cIkotc291cmNlIGltZy1saWdodCBKLWltZy1saWdodFwiIHNyYz1cIiR7c3JjfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1ib3ggSi1kcmFnLWJveFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgdXAtbGVmdCBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLXBvaW50IHVwIEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgdXAtcmlnaHQgSi1kcmFnLXBvaW50XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1wb2ludCByaWdodCBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcmFnLXBvaW50IHJpZ2h0LWRvd24gSi1kcmFnLXBvaW50XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZHJhZy1wb2ludCBkb3duIEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgbGVmdC1kb3duIEotZHJhZy1wb2ludFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRyYWctcG9pbnQgbGVmdCBKLWRyYWctcG9pbnRcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDtcbiAgICAgICAgfVxuXG4gICAgICAgICRwYXJlbnQuaHRtbChkcmFnQm94SHRtbCk7XG4gICAgICAgIHRoaXMuJGRyYWdCb3ggPSAkcGFyZW50LmZpbmQoJy5KLWRyYWctYm94Jyk7XG4gICAgICAgIGlmICghdGhpcy5oYXNMaWdodCkge1xuICAgICAgICAgICAgdGhpcy4kZHJhZ0JveC5jc3Moe1xuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLiRkcmFnQm94LmZpbmQoJy5KLW1hcmstdHh0Jykud2lkdGgoKSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuJGRyYWdCb3guZmluZCgnLkotbWFyay10eHQnKS5oZWlnaHQoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRkcmFnUG9pbnQgPSB0aGlzLiRkcmFnQm94LmZpbmQoJy5KLWRyYWctcG9pbnQnKTtcblxuXG4gICAgICAgIHRoaXMuYm94RWwgPSB0aGlzLiRkcmFnQm94LmdldCgwKTtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbCA9IHRoaXMuYm94RWwucGFyZW50Tm9kZTtcbiAgICAgICAgdGhpcy5pbWdMaWdodCA9ICRwYXJlbnQuZmluZCgnLkotaW1nLWxpZ2h0OmZpcnN0JykuZ2V0KDApO1xuXG4gICAgICAgIHRoaXMuYm94RGF0YSA9IHtcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMuYm94RWwub2Zmc2V0TGVmdCxcbiAgICAgICAgICAgIHRvcDogdGhpcy5ib3hFbC5vZmZzZXRUb3AsXG4gICAgICAgICAgICB3aWR0aDogdGhpcy5ib3hFbC5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5ib3hFbC5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICByYXRpbzogdGhpcy5ib3hFbC5vZmZzZXRXaWR0aCAvIHRoaXMuYm94RWwub2Zmc2V0SGVpZ2h0XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5fYmluZCgpO1xuXG5cbiAgICAgICAgZHJhZyh0aGlzLmJveEVsLCB0aGlzLmJveEVsLCB0aGlzLmJveEVsLnBhcmVudE5vZGUsIChsZWZ0LCB0b3ApID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2xpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLm9uRHJhZ0NvbXBsZXRlKGxlZnQsIHRvcCk7XG4gICAgICAgIH0pO1xuXG5cbiAgICB9XG4gICAgX2JpbmQoKSB7XG4gICAgICAgIGxldCBpc0RyYWdpbmcgPSBmYWxzZTtcbiAgICAgICAgbGV0IGNvbnRhY3QgPSBcIlwiOyAvL+ihqOekuuiiq+aMieS4i+eahOinpueCuVxuICAgICAgICBjb25zdCBEUkFHUE9JTlQgPSBbJ3VwLWxlZnQnLCAndXAnLCAndXAtcmlnaHQnLCAncmlnaHQnLCAncmlnaHQtZG93bicsICdkb3duJywgJ2xlZnQtZG93bicsICdsZWZ0J107XG4gICAgICAgIGxldCBkcmFnQm94UmF0aW8gPSB0aGlzLmJveERhdGEud2lkdGggLyB0aGlzLmJveERhdGEuaGVpZ2h0O1xuICAgICAgICAvL+m8oOagh+aMieS4i+aXtlxuICAgICAgICB0aGlzLiRkcmFnUG9pbnQub24oJ21vdXNlZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgaXNEcmFnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBpbmRleCA9ICQoZS50YXJnZXQpLmluZGV4KCk7XG4gICAgICAgICAgICBjb250YWN0ID0gRFJBR1BPSU5UW2luZGV4XTtcbiAgICAgICAgICAgIGRyYWdCb3hSYXRpbyA9IHRoaXMuYm94RGF0YS53aWR0aCAvIHRoaXMuYm94RGF0YS5oZWlnaHQ7XG4gICAgICAgIH0pXG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNldXAnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaXNEcmFnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmJveERhdGEgPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogdGhpcy5ib3hFbC5vZmZzZXRMZWZ0LFxuICAgICAgICAgICAgICAgIHRvcDogdGhpcy5ib3hFbC5vZmZzZXRUb3AsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuYm94RWwub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmJveEVsLm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgICAgICByYXRpbzogdGhpcy5ib3hFbC5vZmZzZXRXaWR0aCAvIHRoaXMuYm94RWwub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2Vtb3ZlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0RyYWdpbmcgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmUoZSwgY29udGFjdCwgZHJhZ0JveFJhdGlvKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9saWdodCgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5ib3hEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLmJveEVsLm9mZnNldExlZnQsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogdGhpcy5ib3hFbC5vZmZzZXRUb3AsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmJveEVsLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuYm94RWwub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICByYXRpbzogdGhpcy5ib3hFbC5vZmZzZXRXaWR0aCAvIHRoaXMuYm94RWwub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMub25EcmFnUG9pbnQodGhpcy5ib3hEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIC8v6I635Y+W5YWD57Sg55u45a+55LqO5bGP5bmV5bem6L655Y+K5LiK6L6555qE6Led56a777yM5Yip55Sob2Zmc2V0TGVmdFxuICAgIF9nZXRQb3NpdGlvbigpIHtcbiAgICAgICAgbGV0IGVsID0gdGhpcy5ib3hFbDtcbiAgICAgICAgbGV0IGxlZnQgPSBlbC5vZmZzZXRMZWZ0O1xuICAgICAgICBsZXQgdG9wID0gZWwub2Zmc2V0VG9wO1xuICAgICAgICBsZXQgcGFyZW50ID0gZWwub2Zmc2V0UGFyZW50O1xuICAgICAgICB3aGlsZSAocGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGxlZnQgKz0gcGFyZW50Lm9mZnNldExlZnQ7XG4gICAgICAgICAgICB0b3AgKz0gcGFyZW50Lm9mZnNldFRvcDtcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5vZmZzZXRQYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwibGVmdFwiOiBsZWZ0LFxuICAgICAgICAgICAgXCJ0b3BcIjogdG9wXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX21vdmUoZSwgY29udGFjdCwgZHJhZ0JveFJhdGlvKSB7XG5cbiAgICAgICAgbGV0IHggPSBlLmNsaWVudFgsXG4gICAgICAgICAgICB5ID0gZS5jbGllbnRZO1xuICAgICAgICBsZXQgb2xkV2lkdGggPSB0aGlzLmJveEVsLm9mZnNldFdpZHRoOyAvL+mAieWPluahhuWPmOWMluWJjeeahOWuveW6plxuICAgICAgICBsZXQgb2xkSGVpZ2h0ID0gdGhpcy5ib3hFbC5vZmZzZXRIZWlnaHQ7IC8v6YCJ5Y+W5qGG5Y+Y5YyW5YmN55qE6auY5bqmXG4gICAgICAgIGxldCBwb3NpdGlvbiA9IHRoaXMuX2dldFBvc2l0aW9uKCk7XG4gICAgICAgIGxldCB0b3AgPSBwb3NpdGlvbi50b3A7XG4gICAgICAgIGxldCBsZWZ0ID0gcG9zaXRpb24ubGVmdDtcblxuXG4gICAgICAgIGxldCBuZXdXaWR0aDtcbiAgICAgICAgbGV0IG5ld0hlaWdodDtcbiAgICAgICAgbGV0IG5ld0xlZnQ7XG4gICAgICAgIGxldCBuZXdUb3A7XG5cbiAgICAgICAgLy8g57qm5p2f5q+U5L6L77ya5qC55o2u5a695bqm6K6h566X6auY5bqmXG4gICAgICAgIGlmIChjb250YWN0LmluZGV4T2YoJ2xlZnQnKSAhPSAtMSkge1xuICAgICAgICAgICAgbGV0IGFkZFdpZHRoID0gbGVmdCAtIHg7XG4gICAgICAgICAgICBpZiAoYWRkV2lkdGggPj0gMCAmJiB0aGlzLmJveEVsLm9mZnNldExlZnQgPD0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmV3V2lkdGggPSBvbGRXaWR0aCArIGFkZFdpZHRoO1xuICAgICAgICAgICAgbmV3TGVmdCA9IHRoaXMuYm94RWwub2Zmc2V0TGVmdCAtIGFkZFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250YWN0LmluZGV4T2YoJ3JpZ2h0JykgIT0gLTEpIHtcbiAgICAgICAgICAgIGxldCBhZGRXaWR0aCA9IHggLSBsZWZ0IC0gb2xkV2lkdGg7XG4gICAgICAgICAgICBpZiAoYWRkV2lkdGggPj0gMCAmJiAodGhpcy5jb250YWluZXJFbC5jbGllbnRXaWR0aCAtICh0aGlzLmJveEVsLm9mZnNldExlZnQgKyBvbGRXaWR0aCArIGFkZFdpZHRoKSkgPD0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmV3V2lkdGggPSBvbGRXaWR0aCArIGFkZFdpZHRoO1xuICAgICAgICAgICAgbmV3TGVmdCA9IHRoaXMuYm94RWwub2Zmc2V0TGVmdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGFjdC5pbmRleE9mKCd1cCcpICE9IC0xKSB7XG4gICAgICAgICAgICBsZXQgYWRkSGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHRoaXMuZml4UmF0aW8pIHtcbiAgICAgICAgICAgICAgICBuZXdIZWlnaHQgPSBuZXdXaWR0aCAvIGRyYWdCb3hSYXRpbztcbiAgICAgICAgICAgICAgICBhZGRIZWlnaHQgPSBuZXdIZWlnaHQgLSBvbGRIZWlnaHQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFkZEhlaWdodCA9IHRvcCAtIHk7XG4gICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gb2xkSGVpZ2h0ICsgYWRkSGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3VG9wID0gdGhpcy5ib3hFbC5vZmZzZXRUb3AgLSBhZGRIZWlnaHQ7XG5cbiAgICAgICAgICAgIGlmIChhZGRIZWlnaHQgPj0gMCAmJiB0aGlzLmJveEVsLm9mZnNldFRvcCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb250YWN0LmluZGV4T2YoJ2Rvd24nKSAhPSAtMSkge1xuICAgICAgICAgICAgbGV0IGFkZEhlaWdodDtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpeFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgbmV3SGVpZ2h0ID0gbmV3V2lkdGggLyBkcmFnQm94UmF0aW87XG4gICAgICAgICAgICAgICAgYWRkSGVpZ2h0ID0gbmV3SGVpZ2h0IC0gb2xkSGVpZ2h0O1xuICAgICAgICAgICAgICAgIG5ld1RvcCA9IHRoaXMuYm94RWwub2Zmc2V0VG9wO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRIZWlnaHQgPSB5IC0gdG9wIC0gb2xkSGVpZ2h0O1xuICAgICAgICAgICAgICAgIG5ld0hlaWdodCA9IG9sZEhlaWdodCArIGFkZEhlaWdodDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFkZEhlaWdodCA+PSAwICYmICh0aGlzLmNvbnRhaW5lckVsLmNsaWVudEhlaWdodCAtICh0aGlzLmJveEVsLm9mZnNldFRvcCArIG9sZEhlaWdodCArIGFkZEhlaWdodCkpIDw9IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG5cbiAgICAgICAgdGhpcy5ib3hFbC5zdHlsZS53aWR0aCA9IG5ld1dpZHRoICsgJ3B4JztcbiAgICAgICAgdGhpcy5ib3hFbC5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQgKyAncHgnO1xuICAgICAgICB0aGlzLmJveEVsLnN0eWxlLmxlZnQgPSBuZXdMZWZ0ICsgJ3B4JztcbiAgICAgICAgdGhpcy5ib3hFbC5zdHlsZS50b3AgPSBuZXdUb3AgKyAncHgnO1xuICAgIH1cblxuICAgIF9saWdodCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzTGlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldENob2ljZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8v6K6+572u6YCJ5Y+W5qGG5Zu+54mH5Yy65Z+f5piO5Lqu5pi+56S6XG4gICAgX3NldENob2ljZSgpIHtcbiAgICAgICAgdmFyIHRvcCA9IHRoaXMuYm94RWwub2Zmc2V0VG9wO1xuICAgICAgICB2YXIgcmlnaHQgPSB0aGlzLmJveEVsLm9mZnNldExlZnQgKyB0aGlzLmJveEVsLm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgYm90dG9tID0gdGhpcy5ib3hFbC5vZmZzZXRUb3AgKyB0aGlzLmJveEVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgdmFyIGxlZnQgPSB0aGlzLmJveEVsLm9mZnNldExlZnQ7XG4gICAgICAgIHRoaXMuaW1nTGlnaHQuc3R5bGUuY2xpcCA9IFwicmVjdChcIiArIHRvcCArIFwicHgsXCIgKyByaWdodCArIFwicHgsXCIgKyBib3R0b20gKyBcInB4LFwiICsgbGVmdCArIFwicHgpXCI7XG4gICAgfVxuXG4gICAgdXBkYXRlKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgd2lkdGggJiYgKHRoaXMud2lkdGggPSB3aWR0aCk7XG4gICAgICAgIGhlaWdodCAmJiAodGhpcy5oZWlnaHQgPSBoZWlnaHQpO1xuICAgICAgICB0aGlzLiRkcmFnQm94LmNzcyh7XG4gICAgICAgICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHRcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQge1xuICAgIERyYWdCb3hcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/dragBox.js\n");

    /***/
  },

  /***/"./src/js/imgHandler.js":
  /*!******************************!*\
    !*** ./src/js/imgHandler.js ***!
    \******************************/
  /*! exports provided: ImgHandler */
  /***/function srcJsImgHandlerJs(module, __webpack_exports__, __webpack_require__) {

    "use strict";

    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImgHandler\", function() { return ImgHandler; });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ \"./src/js/util.js\");\n\n\nclass ImgHandler {\n\n    constructor(options) {\n\n        // 默认配置参数\n        let defaults = {\n            // 源图片元素\n            sourceImg: null,\n\n            rotateNum: 0,\n\n            // 裁剪后图片最大值KB\n            maxSize: 500,\n            cropW: '',\n            cropH: '',\n\n            // 裁剪后的图片类型\n            mime: 'image/jpeg',\n\n            // 水印相关参数，若watermarkImg存在则用图片水印，否则用文字水印。\n            // 是否添加水印\n            hasMark: true,\n            textAlign: 'left',\n            // 水印字体，值同css的font\n            markFont: '16px microsoft yahei',\n            // 水印字样式，可选值：color,gradient,pattern\n            markStyle: '#fff',\n            // 水印字文本\n            markText: 'UED',\n            // 水印字x轴位置\n            markX: 0,\n            // 水印字y轴位置\n            markY: 0\n\n        };\n\n\n        options = Object.assign({}, defaults, options);\n\n        this.sourceImg = options.sourceImg;\n        this.rotateNum = options.rotateNum;\n        this.maxSize = options.maxSize;\n        this.cropW = options.cropW;\n        this.cropH = options.cropH;\n\n        this.mime = options.mime;\n\n        this.hasMark = options.hasMark;\n        this.textAlign = options.textAlign;\n        this.markFont = options.markFont;\n        this.markStyle = options.markStyle;\n        this.markText = options.markText;\n        this.markX = options.markX;\n        this.markY = options.markY;\n\n\n        // 全局变量\n        this.sx = 0;\n        this.sy = 0;\n\n        this.scaleRatio = 0.5;\n        this.quality = 0.2;\n\n        this.results = [];\n\n        this.init();\n\n    }\n\n\n\n\n    init() {\n        let targetImg = this.sourceImg;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        if (targetImg.nodeName.toLowerCase() === 'img') {\n            sourceW0 = targetImg.naturalWidth;\n            sourceH0 = targetImg.naturalHeight;\n            // img装成canvas\n            let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(sourceW0, sourceH0);\n            let ctx = canvas.getContext('2d');\n            ctx.drawImage(targetImg, 0, 0);\n            targetImg = canvas;\n        }\n\n        this.result = targetImg;\n        this.results.push(this.result);\n\n    }\n\n    // 重置\n    reset() {\n        this.rotateNum = 0;\n        this.scaleRatio = 1;\n        this.results = this.results.slice(0, 1);\n    }\n    // 回退\n    rollback() {\n        this.results.pop();\n    }\n    // 旋转\n    rotate() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n\n        let rotateDeg = this.rotateNum * 90;\n\n        let max = Math.max(sourceW0, sourceH0);\n        let tempCvs = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(max, max),\n            tempCtx = tempCvs.getContext('2d');\n\n        tempCtx.translate(max / 2, max / 2);\n        tempCtx.rotate(rotateDeg * Math.PI / 180);\n        tempCtx.translate(-max / 2, -max / 2);\n        tempCtx.drawImage(targetImg, 0, 0);\n\n\n        let w = sourceW0,\n            h = sourceH0,\n            sx = 0,\n            sy = 0;\n        if (this.rotateNum === 1) {\n            w = sourceH0;\n            h = sourceW0;\n            sx = max - w;\n            sy = 0;\n\n        } else if (this.rotateNum === 2) {\n            w = sourceW0;\n            h = sourceH0;\n            sx = max - w;\n            sy = max - h;\n        } else if (this.rotateNum === 3) {\n            w = sourceH0;\n            h = sourceW0;\n            sx = 0;\n            sy = max - h;\n        } else {\n            w = sourceW0;\n            h = sourceH0;\n            sx = 0;\n            sy = 0;\n        }\n\n        let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(w, h),\n            context = canvas.getContext('2d');\n\n        context.drawImage(tempCvs, sx, sy, w, h, 0, 0, w, h);\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n\n    // 水印\n    mark() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(sourceW0, sourceH0);\n        let dContext = canvas.getContext('2d');\n        dContext.drawImage(targetImg, 0, 0);\n        if (this.hasMark) {\n            dContext.textBaseline = \"top\";\n            dContext.textAlign = this.textAlign;\n            dContext.font = this.markFont;\n            dContext.fillStyle = this.markStyle;\n            dContext.fillText(this.markText, this.markX, this.markY);\n\n        }\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n\n    // 裁剪\n    crop() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(this.cropW, this.cropH);\n        let context = canvas.getContext('2d');\n        context.drawImage(targetImg, this.sx, this.sy, this.cropW, this.cropH, 0, 0, this.cropW, this.cropH);\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n    // 缩放\n    scale() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let resultW = this.scaleRatio * sourceW0;\n        let resultH = this.scaleRatio * sourceH0;\n\n        let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(resultW, resultH);\n        let context = canvas.getContext('2d');\n        context.drawImage(targetImg, 0, 0, sourceW0, sourceH0, 0, 0, resultW, resultH);\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n    // 压缩\n    compress() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let canvas = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"getCanvas\"])(sourceW0, sourceH0);\n        let ctx = canvas.getContext(\"2d\");\n\n        if (this.cropW && this.cropH) {\n            ctx.drawImage(targetImg, 0, 0, this.cropW, this.cropH);\n        } else {\n            ctx.drawImage(targetImg, 0, 0);\n        }\n        this.base64Data = canvas.toDataURL(this.mime, this.quality);\n\n        return this.base64Data;\n    }\n\n}\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvaW1nSGFuZGxlci5qcz9lY2VhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUVnQjs7QUFFaEI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQSxrQ0FBa0M7O0FBRWxDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVEQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBLHNCQUFzQix1REFBUztBQUMvQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQix1REFBUztBQUM5Qjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLHVEQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQix1REFBUztBQUM5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEscUJBQXFCLHVEQUFTO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLHVEQUFTO0FBQzlCOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7OztBQUdtQiIsImZpbGUiOiIuL3NyYy9qcy9pbWdIYW5kbGVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICBnZXRDYW52YXMsXG59IGZyb20gJy4vdXRpbCc7XG5cbmNsYXNzIEltZ0hhbmRsZXIge1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuXG4gICAgICAgIC8vIOm7mOiupOmFjee9ruWPguaVsFxuICAgICAgICBsZXQgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAvLyDmupDlm77niYflhYPntKBcbiAgICAgICAgICAgIHNvdXJjZUltZzogbnVsbCxcblxuICAgICAgICAgICAgcm90YXRlTnVtOiAwLFxuXG4gICAgICAgICAgICAvLyDoo4HliarlkI7lm77niYfmnIDlpKflgLxLQlxuICAgICAgICAgICAgbWF4U2l6ZTogNTAwLFxuICAgICAgICAgICAgY3JvcFc6ICcnLFxuICAgICAgICAgICAgY3JvcEg6ICcnLFxuXG4gICAgICAgICAgICAvLyDoo4HliarlkI7nmoTlm77niYfnsbvlnotcbiAgICAgICAgICAgIG1pbWU6ICdpbWFnZS9qcGVnJyxcblxuICAgICAgICAgICAgLy8g5rC05Y2w55u45YWz5Y+C5pWw77yM6Iuld2F0ZXJtYXJrSW1n5a2Y5Zyo5YiZ55So5Zu+54mH5rC05Y2w77yM5ZCm5YiZ55So5paH5a2X5rC05Y2w44CCXG4gICAgICAgICAgICAvLyDmmK/lkKbmt7vliqDmsLTljbBcbiAgICAgICAgICAgIGhhc01hcms6IHRydWUsXG4gICAgICAgICAgICB0ZXh0QWxpZ246ICdsZWZ0JyxcbiAgICAgICAgICAgIC8vIOawtOWNsOWtl+S9k++8jOWAvOWQjGNzc+eahGZvbnRcbiAgICAgICAgICAgIG1hcmtGb250OiAnMTZweCBtaWNyb3NvZnQgeWFoZWknLFxuICAgICAgICAgICAgLy8g5rC05Y2w5a2X5qC35byP77yM5Y+v6YCJ5YC877yaY29sb3IsZ3JhZGllbnQscGF0dGVyblxuICAgICAgICAgICAgbWFya1N0eWxlOiAnI2ZmZicsXG4gICAgICAgICAgICAvLyDmsLTljbDlrZfmlofmnKxcbiAgICAgICAgICAgIG1hcmtUZXh0OiAnVUVEJyxcbiAgICAgICAgICAgIC8vIOawtOWNsOWtl3jovbTkvY3nva5cbiAgICAgICAgICAgIG1hcmtYOiAwLFxuICAgICAgICAgICAgLy8g5rC05Y2w5a2Xeei9tOS9jee9rlxuICAgICAgICAgICAgbWFya1k6IDBcblxuICAgICAgICB9O1xuXG5cbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLnNvdXJjZUltZyA9IG9wdGlvbnMuc291cmNlSW1nO1xuICAgICAgICB0aGlzLnJvdGF0ZU51bSA9IG9wdGlvbnMucm90YXRlTnVtO1xuICAgICAgICB0aGlzLm1heFNpemUgPSBvcHRpb25zLm1heFNpemU7XG4gICAgICAgIHRoaXMuY3JvcFcgPSBvcHRpb25zLmNyb3BXO1xuICAgICAgICB0aGlzLmNyb3BIID0gb3B0aW9ucy5jcm9wSDtcblxuICAgICAgICB0aGlzLm1pbWUgPSBvcHRpb25zLm1pbWU7XG5cbiAgICAgICAgdGhpcy5oYXNNYXJrID0gb3B0aW9ucy5oYXNNYXJrO1xuICAgICAgICB0aGlzLnRleHRBbGlnbiA9IG9wdGlvbnMudGV4dEFsaWduO1xuICAgICAgICB0aGlzLm1hcmtGb250ID0gb3B0aW9ucy5tYXJrRm9udDtcbiAgICAgICAgdGhpcy5tYXJrU3R5bGUgPSBvcHRpb25zLm1hcmtTdHlsZTtcbiAgICAgICAgdGhpcy5tYXJrVGV4dCA9IG9wdGlvbnMubWFya1RleHQ7XG4gICAgICAgIHRoaXMubWFya1ggPSBvcHRpb25zLm1hcmtYO1xuICAgICAgICB0aGlzLm1hcmtZID0gb3B0aW9ucy5tYXJrWTtcblxuXG4gICAgICAgIC8vIOWFqOWxgOWPmOmHj1xuICAgICAgICB0aGlzLnN4ID0gMDtcbiAgICAgICAgdGhpcy5zeSA9IDA7XG5cbiAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gMC41O1xuICAgICAgICB0aGlzLnF1YWxpdHkgPSAwLjI7XG5cbiAgICAgICAgdGhpcy5yZXN1bHRzID0gW107XG5cbiAgICAgICAgdGhpcy5pbml0KCk7XG5cbiAgICB9XG5cblxuXG5cbiAgICBpbml0KCkge1xuICAgICAgICBsZXQgdGFyZ2V0SW1nID0gdGhpcy5zb3VyY2VJbWc7XG4gICAgICAgIGxldCBzb3VyY2VXMCA9IHRhcmdldEltZy53aWR0aDtcbiAgICAgICAgbGV0IHNvdXJjZUgwID0gdGFyZ2V0SW1nLmhlaWdodDtcblxuICAgICAgICBpZiAodGFyZ2V0SW1nLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbWcnKSB7XG4gICAgICAgICAgICBzb3VyY2VXMCA9IHRhcmdldEltZy5uYXR1cmFsV2lkdGg7XG4gICAgICAgICAgICBzb3VyY2VIMCA9IHRhcmdldEltZy5uYXR1cmFsSGVpZ2h0O1xuICAgICAgICAgICAgLy8gaW1n6KOF5oiQY2FudmFzXG4gICAgICAgICAgICBsZXQgY2FudmFzID0gZ2V0Q2FudmFzKHNvdXJjZVcwLCBzb3VyY2VIMCk7XG4gICAgICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRhcmdldEltZywgMCwgMCk7XG4gICAgICAgICAgICB0YXJnZXRJbWcgPSBjYW52YXM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc3VsdCA9IHRhcmdldEltZztcbiAgICAgICAgdGhpcy5yZXN1bHRzLnB1c2godGhpcy5yZXN1bHQpO1xuXG4gICAgfVxuXG4gICAgLy8g6YeN572uXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMucm90YXRlTnVtID0gMDtcbiAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gMTtcbiAgICAgICAgdGhpcy5yZXN1bHRzID0gdGhpcy5yZXN1bHRzLnNsaWNlKDAsIDEpO1xuICAgIH1cbiAgICAvLyDlm57pgIBcbiAgICByb2xsYmFjaygpIHtcbiAgICAgICAgdGhpcy5yZXN1bHRzLnBvcCgpO1xuICAgIH1cbiAgICAvLyDml4vovaxcbiAgICByb3RhdGUoKSB7XG4gICAgICAgIGxldCB0YXJnZXRJbWcgPSB0aGlzLnJlc3VsdDtcbiAgICAgICAgbGV0IHNvdXJjZVcwID0gdGFyZ2V0SW1nLndpZHRoO1xuICAgICAgICBsZXQgc291cmNlSDAgPSB0YXJnZXRJbWcuaGVpZ2h0O1xuXG5cbiAgICAgICAgbGV0IHJvdGF0ZURlZyA9IHRoaXMucm90YXRlTnVtICogOTA7XG5cbiAgICAgICAgbGV0IG1heCA9IE1hdGgubWF4KHNvdXJjZVcwLCBzb3VyY2VIMCk7XG4gICAgICAgIGxldCB0ZW1wQ3ZzID0gZ2V0Q2FudmFzKG1heCwgbWF4KSxcbiAgICAgICAgICAgIHRlbXBDdHggPSB0ZW1wQ3ZzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgdGVtcEN0eC50cmFuc2xhdGUobWF4IC8gMiwgbWF4IC8gMik7XG4gICAgICAgIHRlbXBDdHgucm90YXRlKHJvdGF0ZURlZyAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICB0ZW1wQ3R4LnRyYW5zbGF0ZSgtbWF4IC8gMiwgLW1heCAvIDIpO1xuICAgICAgICB0ZW1wQ3R4LmRyYXdJbWFnZSh0YXJnZXRJbWcsIDAsIDApO1xuXG5cbiAgICAgICAgbGV0IHcgPSBzb3VyY2VXMCxcbiAgICAgICAgICAgIGggPSBzb3VyY2VIMCxcbiAgICAgICAgICAgIHN4ID0gMCxcbiAgICAgICAgICAgIHN5ID0gMDtcbiAgICAgICAgaWYgKHRoaXMucm90YXRlTnVtID09PSAxKSB7XG4gICAgICAgICAgICB3ID0gc291cmNlSDA7XG4gICAgICAgICAgICBoID0gc291cmNlVzA7XG4gICAgICAgICAgICBzeCA9IG1heCAtIHc7XG4gICAgICAgICAgICBzeSA9IDA7XG5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJvdGF0ZU51bSA9PT0gMikge1xuICAgICAgICAgICAgdyA9IHNvdXJjZVcwO1xuICAgICAgICAgICAgaCA9IHNvdXJjZUgwO1xuICAgICAgICAgICAgc3ggPSBtYXggLSB3O1xuICAgICAgICAgICAgc3kgPSBtYXggLSBoO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucm90YXRlTnVtID09PSAzKSB7XG4gICAgICAgICAgICB3ID0gc291cmNlSDA7XG4gICAgICAgICAgICBoID0gc291cmNlVzA7XG4gICAgICAgICAgICBzeCA9IDA7XG4gICAgICAgICAgICBzeSA9IG1heCAtIGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3ID0gc291cmNlVzA7XG4gICAgICAgICAgICBoID0gc291cmNlSDA7XG4gICAgICAgICAgICBzeCA9IDA7XG4gICAgICAgICAgICBzeSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2FudmFzID0gZ2V0Q2FudmFzKHcsIGgpLFxuICAgICAgICAgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHRlbXBDdnMsIHN4LCBzeSwgdywgaCwgMCwgMCwgdywgaCk7XG5cbiAgICAgICAgLy8gdGhpcy5iYXNlNjREYXRhID0gY2FudmFzLnRvRGF0YVVSTCh0aGlzLm1pbWUpO1xuICAgICAgICB0aGlzLnJlc3VsdCA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5yZXN1bHRzLnB1c2goY2FudmFzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8g5rC05Y2wXG4gICAgbWFyaygpIHtcbiAgICAgICAgbGV0IHRhcmdldEltZyA9IHRoaXMucmVzdWx0O1xuICAgICAgICBsZXQgc291cmNlVzAgPSB0YXJnZXRJbWcud2lkdGg7XG4gICAgICAgIGxldCBzb3VyY2VIMCA9IHRhcmdldEltZy5oZWlnaHQ7XG5cbiAgICAgICAgbGV0IGNhbnZhcyA9IGdldENhbnZhcyhzb3VyY2VXMCwgc291cmNlSDApO1xuICAgICAgICBsZXQgZENvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgZENvbnRleHQuZHJhd0ltYWdlKHRhcmdldEltZywgMCwgMCk7XG4gICAgICAgIGlmICh0aGlzLmhhc01hcmspIHtcbiAgICAgICAgICAgIGRDb250ZXh0LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XG4gICAgICAgICAgICBkQ29udGV4dC50ZXh0QWxpZ24gPSB0aGlzLnRleHRBbGlnbjtcbiAgICAgICAgICAgIGRDb250ZXh0LmZvbnQgPSB0aGlzLm1hcmtGb250O1xuICAgICAgICAgICAgZENvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5tYXJrU3R5bGU7XG4gICAgICAgICAgICBkQ29udGV4dC5maWxsVGV4dCh0aGlzLm1hcmtUZXh0LCB0aGlzLm1hcmtYLCB0aGlzLm1hcmtZKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhpcy5iYXNlNjREYXRhID0gY2FudmFzLnRvRGF0YVVSTCh0aGlzLm1pbWUpO1xuICAgICAgICB0aGlzLnJlc3VsdCA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5yZXN1bHRzLnB1c2goY2FudmFzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8g6KOB5YmqXG4gICAgY3JvcCgpIHtcbiAgICAgICAgbGV0IHRhcmdldEltZyA9IHRoaXMucmVzdWx0O1xuICAgICAgICBsZXQgc291cmNlVzAgPSB0YXJnZXRJbWcud2lkdGg7XG4gICAgICAgIGxldCBzb3VyY2VIMCA9IHRhcmdldEltZy5oZWlnaHQ7XG5cbiAgICAgICAgbGV0IGNhbnZhcyA9IGdldENhbnZhcyh0aGlzLmNyb3BXLCB0aGlzLmNyb3BIKTtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodGFyZ2V0SW1nLCB0aGlzLnN4LCB0aGlzLnN5LCB0aGlzLmNyb3BXLCB0aGlzLmNyb3BILCAwLCAwLCB0aGlzLmNyb3BXLCB0aGlzLmNyb3BIKTtcblxuICAgICAgICAvLyB0aGlzLmJhc2U2NERhdGEgPSBjYW52YXMudG9EYXRhVVJMKHRoaXMubWltZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gY2FudmFzO1xuICAgICAgICB0aGlzLnJlc3VsdHMucHVzaChjYW52YXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8g57yp5pS+XG4gICAgc2NhbGUoKSB7XG4gICAgICAgIGxldCB0YXJnZXRJbWcgPSB0aGlzLnJlc3VsdDtcbiAgICAgICAgbGV0IHNvdXJjZVcwID0gdGFyZ2V0SW1nLndpZHRoO1xuICAgICAgICBsZXQgc291cmNlSDAgPSB0YXJnZXRJbWcuaGVpZ2h0O1xuXG4gICAgICAgIGxldCByZXN1bHRXID0gdGhpcy5zY2FsZVJhdGlvICogc291cmNlVzA7XG4gICAgICAgIGxldCByZXN1bHRIID0gdGhpcy5zY2FsZVJhdGlvICogc291cmNlSDA7XG5cbiAgICAgICAgbGV0IGNhbnZhcyA9IGdldENhbnZhcyhyZXN1bHRXLCByZXN1bHRIKTtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodGFyZ2V0SW1nLCAwLCAwLCBzb3VyY2VXMCwgc291cmNlSDAsIDAsIDAsIHJlc3VsdFcsIHJlc3VsdEgpO1xuXG4gICAgICAgIC8vIHRoaXMuYmFzZTY0RGF0YSA9IGNhbnZhcy50b0RhdGFVUkwodGhpcy5taW1lKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSBjYW52YXM7XG4gICAgICAgIHRoaXMucmVzdWx0cy5wdXNoKGNhbnZhcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyDljovnvKlcbiAgICBjb21wcmVzcygpIHtcbiAgICAgICAgbGV0IHRhcmdldEltZyA9IHRoaXMucmVzdWx0O1xuICAgICAgICBsZXQgc291cmNlVzAgPSB0YXJnZXRJbWcud2lkdGg7XG4gICAgICAgIGxldCBzb3VyY2VIMCA9IHRhcmdldEltZy5oZWlnaHQ7XG5cbiAgICAgICAgbGV0IGNhbnZhcyA9IGdldENhbnZhcyhzb3VyY2VXMCwgc291cmNlSDApO1xuICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgICAgICBpZiAodGhpcy5jcm9wVyAmJiB0aGlzLmNyb3BIKSB7XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRhcmdldEltZywgMCwgMCwgdGhpcy5jcm9wVywgdGhpcy5jcm9wSCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRhcmdldEltZywgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYXNlNjREYXRhID0gY2FudmFzLnRvRGF0YVVSTCh0aGlzLm1pbWUsIHRoaXMucXVhbGl0eSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZTY0RGF0YTtcbiAgICB9XG5cbn1cblxuXG5leHBvcnQge0ltZ0hhbmRsZXJ9XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/imgHandler.js\n");

    /***/
  },

  /***/"./src/js/pipeImg.js":
  /*!***************************!*\
    !*** ./src/js/pipeImg.js ***!
    \***************************/
  /*! no exports provided */
  /***/function srcJsPipeImgJs(module, __webpack_exports__, __webpack_require__) {

    "use strict";

    eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ \"./src/js/util.js\");\n/* harmony import */ var _imgHandler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./imgHandler */ \"./src/js/imgHandler.js\");\n/* harmony import */ var _dialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dialog */ \"./src/js/dialog.js\");\n// 依赖jquery.js，template.js\n\n\n\n\nclass PipeImg {\n\n    constructor(options) {\n        // 默认配置参数\n        let defaults = {\n            source: ['./assets/Jellyfish.jpg'],\n            ajaxUrl: '/pic.do?xcase=uploadWs',\n            debug: false,\n            mime: 'image/jpeg',\n            maxSize: 500,    \n            onComplete: (response) => {}\n        };\n\n        options = Object.assign({}, defaults, options);\n        this.source = options.source;\n        this.ajaxUrl = options.ajaxUrl;\n\n        this.debug = options.debug;\n        this.mime = options.mime;\n        this.maxSize = options.maxSize;\n        \n        this.onComplete = options.onComplete;\n\n        this.resultList = [];\n        this.sourceImgList = [];\n\n        this._init();\n\n    }\n\n    _init() {\n        Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"loadImages\"])(this.source, (images) => {\n            this.sourceImgList = images;\n\n            this.imgHandler = new _imgHandler__WEBPACK_IMPORTED_MODULE_1__[\"ImgHandler\"]({\n                sourceImg: images[0]\n            });\n            this.resultList.push(this.imgHandler.result);\n\n            this.dialog = new _dialog__WEBPACK_IMPORTED_MODULE_2__[\"Dialog\"]({\n                imgList: images,\n                onSaveRotate: (options, cb) => {\n                    this._saveRotate(options, cb);\n                },\n                onSaveCrop: (options, cb) => {\n                    this._saveCrop(options, cb);\n                },\n                onSaveScale: (options, cb) => {\n                    this._saveScale(options, cb);\n                },\n                onSaveMark: (options, cb) => {\n                    this._saveMark(options, cb);\n                },\n                onReset: (cb) => {\n                    this._reset(cb);\n                },\n                onSave: (cb) => {\n                    this._save(cb);\n                },\n                onChangeActive: (options, cb) => {\n                    this._changeActive(options, cb);\n                },\n                onSaveMarkAll: (options, cb) => {\n                    this._saveMarkAll(options, cb);\n                }\n            })\n\n        })\n\n    }\n\n    _saveRotate(options, cb) {\n        this.imgHandler.rotateNum = options.rotateNum;\n        this.imgHandler.rotate();\n        this.resultList.push(this.imgHandler.result);\n        cb(this.imgHandler.result);\n    }\n    _saveCrop(options, cb) {\n        this.imgHandler.cropW = options.cropW;\n        this.imgHandler.cropH = options.cropH;\n        this.imgHandler.sx = options.sx;\n        this.imgHandler.sy = options.sy;\n        this.imgHandler.crop();\n        this.resultList.push(this.imgHandler.result);\n        cb(this.imgHandler.result);\n    }\n    _saveScale(options, cb) {\n        this.imgHandler.scaleRatio = options.scaleRatio;\n        this.imgHandler.scale();\n        this.resultList.push(this.imgHandler.result);\n        cb(this.imgHandler.result);\n    }\n    _saveMark(options, cb) {\n        this.imgHandler.markX = options.markX;\n        this.imgHandler.markY = options.markY;\n        this.imgHandler.markText = options.markText;\n        this.imgHandler.markFont = options.markFont;\n        this.imgHandler.markStyle = options.markStyle;\n        this.imgHandler.mark();\n        this.resultList.push(this.imgHandler.result);\n        cb(this.imgHandler.result);\n    }\n    _reset(cb) {\n        this.rotateNum = 0;\n        this.scaleRatio = 1;\n\n        this.resultList = this.resultList.slice(0, 1);\n        this.imgHandler = new _imgHandler__WEBPACK_IMPORTED_MODULE_1__[\"ImgHandler\"]({\n            sourceImg: this.resultList[0]\n        })\n        cb(this.resultList[0]);\n    }\n    _save(cb) {\n        let max = this.maxSize * 1024;\n        let base64Data = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"compress\"])(this.resultList[this.resultList.length - 1], max, false);\n\n        if (this.debug) {\n            // 模拟返回\n            let data = {src: base64Data};\n\n            let img = new Image();\n            img.src = data.src;\n            this.resultList = [img];\n            cb(data);\n            this.onComplete(data);\n        } else {\n            let blob = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"base64Data2Blob\"])(base64Data, this.mime);\n            let formData = Object(_util__WEBPACK_IMPORTED_MODULE_0__[\"blob2FormData\"])(blob);\n            $.ajax({\n                url: this.ajaxUrl,\n                type: \"POST\",\n                data: formData,\n                processData: false, // 不处理数据\n                contentType: false, // 不设置内容类型\n                success: (response) => {\n                    let img = new Image();\n                    img.src = response.src;\n                    this.resultList = [img];\n                    cb(response);\n                    this.onComplete(response);\n                },\n                error: () => {\n                    alert('后台错误');\n                }\n            });            \n        }\n\n    }\n    _saveMarkAll(options, cb) {\n        \n        let xPercent = options.markX / this.resultList[this.resultList.length - 1].width;\n        let yPercent = options.markY / this.resultList[this.resultList.length - 1].height;\n        $(this.sourceImgList).each((index, element) => {\n            let imgHandler = new _imgHandler__WEBPACK_IMPORTED_MODULE_1__[\"ImgHandler\"]({\n                sourceImg: element\n            });\n            imgHandler.markX = element.width * xPercent;\n            imgHandler.markY = element.height * yPercent;\n\n            imgHandler.markText = options.markText;\n            imgHandler.markFont = options.markFont;\n            imgHandler.markStyle = options.markStyle;\n\n            imgHandler.mark();\n            this.resultList.push(imgHandler.result);\n\n            this._save(cb);\n        })\n        \n    }\n    _changeActive(options, cb) {\n        this.imgHandler = new _imgHandler__WEBPACK_IMPORTED_MODULE_1__[\"ImgHandler\"]({\n            sourceImg: options.activeImg\n        })\n        this.resultList = [this.imgHandler.result];\n        cb(this.imgHandler.result);\n    }\n\n\n}\n\n\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = PipeImg;\n} else if (typeof define === \"function\" && __webpack_require__(/*! !webpack amd options */ \"./node_modules/webpack/buildin/amd-options.js\")) {\n    define(function () {\n        return PipeImg;\n    });\n} else {\n    window.PipeImg = PipeImg;\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/harmony-module.js */ \"./node_modules/webpack/buildin/harmony-module.js\")(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvcGlwZUltZy5qcz85MjIwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNZ0I7QUFHTTtBQUNZOztBQUVsQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQ0FBa0M7QUFDbEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLFFBQVEsd0RBQVU7QUFDbEI7O0FBRUEsa0NBQWtDLHNEQUFVO0FBQzVDO0FBQ0EsYUFBYTtBQUNiOztBQUVBLDhCQUE4Qiw4Q0FBTTtBQUNwQztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYixTQUFTOztBQUVUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOEJBQThCLHNEQUFVO0FBQ3hDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNEQUFROztBQUVqQztBQUNBO0FBQ0Esd0JBQXdCOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVCQUF1Qiw2REFBZTtBQUN0QywyQkFBMkIsMkRBQWE7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGFBQWEsRTtBQUNiOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHNEQUFVO0FBQzNDO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQSw4QkFBOEIsc0RBQVU7QUFDeEM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOzs7QUFHQTs7O0FBR0E7QUFDQTtBQUNBLENBQUMsMENBQTBDLGdHQUFVO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNEO0FBQ0EiLCJmaWxlIjoiLi9zcmMvanMvcGlwZUltZy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIOS+nei1lmpxdWVyeS5qc++8jHRlbXBsYXRlLmpzXG5pbXBvcnQge1xuICAgIGNvbXByZXNzLFxuICAgIGJhc2U2NERhdGEyQmxvYixcbiAgICBibG9iMkZvcm1EYXRhLFxuICAgIGxvYWRJbWFnZXNcbn0gZnJvbSAnLi91dGlsJztcbmltcG9ydCB7XG4gICAgSW1nSGFuZGxlclxufSBmcm9tICcuL2ltZ0hhbmRsZXInO1xuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSAnLi9kaWFsb2cnO1xuXG5jbGFzcyBQaXBlSW1nIHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgLy8g6buY6K6k6YWN572u5Y+C5pWwXG4gICAgICAgIGxldCBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIHNvdXJjZTogWycuL2Fzc2V0cy9KZWxseWZpc2guanBnJ10sXG4gICAgICAgICAgICBhamF4VXJsOiAnL3BpYy5kbz94Y2FzZT11cGxvYWRXcycsXG4gICAgICAgICAgICBkZWJ1ZzogZmFsc2UsXG4gICAgICAgICAgICBtaW1lOiAnaW1hZ2UvanBlZycsXG4gICAgICAgICAgICBtYXhTaXplOiA1MDAsICAgIFxuICAgICAgICAgICAgb25Db21wbGV0ZTogKHJlc3BvbnNlKSA9PiB7fVxuICAgICAgICB9O1xuXG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuc291cmNlID0gb3B0aW9ucy5zb3VyY2U7XG4gICAgICAgIHRoaXMuYWpheFVybCA9IG9wdGlvbnMuYWpheFVybDtcblxuICAgICAgICB0aGlzLmRlYnVnID0gb3B0aW9ucy5kZWJ1ZztcbiAgICAgICAgdGhpcy5taW1lID0gb3B0aW9ucy5taW1lO1xuICAgICAgICB0aGlzLm1heFNpemUgPSBvcHRpb25zLm1heFNpemU7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm9uQ29tcGxldGUgPSBvcHRpb25zLm9uQ29tcGxldGU7XG5cbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gW107XG4gICAgICAgIHRoaXMuc291cmNlSW1nTGlzdCA9IFtdO1xuXG4gICAgICAgIHRoaXMuX2luaXQoKTtcblxuICAgIH1cblxuICAgIF9pbml0KCkge1xuICAgICAgICBsb2FkSW1hZ2VzKHRoaXMuc291cmNlLCAoaW1hZ2VzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZUltZ0xpc3QgPSBpbWFnZXM7XG5cbiAgICAgICAgICAgIHRoaXMuaW1nSGFuZGxlciA9IG5ldyBJbWdIYW5kbGVyKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJbWc6IGltYWdlc1swXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdExpc3QucHVzaCh0aGlzLmltZ0hhbmRsZXIucmVzdWx0KTtcblxuICAgICAgICAgICAgdGhpcy5kaWFsb2cgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgICAgICAgICBpbWdMaXN0OiBpbWFnZXMsXG4gICAgICAgICAgICAgICAgb25TYXZlUm90YXRlOiAob3B0aW9ucywgY2IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2F2ZVJvdGF0ZShvcHRpb25zLCBjYik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvblNhdmVDcm9wOiAob3B0aW9ucywgY2IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2F2ZUNyb3Aob3B0aW9ucywgY2IpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25TYXZlU2NhbGU6IChvcHRpb25zLCBjYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zYXZlU2NhbGUob3B0aW9ucywgY2IpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25TYXZlTWFyazogKG9wdGlvbnMsIGNiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NhdmVNYXJrKG9wdGlvbnMsIGNiKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uUmVzZXQ6IChjYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZXNldChjYik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvblNhdmU6IChjYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zYXZlKGNiKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlQWN0aXZlOiAob3B0aW9ucywgY2IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hhbmdlQWN0aXZlKG9wdGlvbnMsIGNiKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uU2F2ZU1hcmtBbGw6IChvcHRpb25zLCBjYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zYXZlTWFya0FsbChvcHRpb25zLCBjYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgX3NhdmVSb3RhdGUob3B0aW9ucywgY2IpIHtcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLnJvdGF0ZU51bSA9IG9wdGlvbnMucm90YXRlTnVtO1xuICAgICAgICB0aGlzLmltZ0hhbmRsZXIucm90YXRlKCk7XG4gICAgICAgIHRoaXMucmVzdWx0TGlzdC5wdXNoKHRoaXMuaW1nSGFuZGxlci5yZXN1bHQpO1xuICAgICAgICBjYih0aGlzLmltZ0hhbmRsZXIucmVzdWx0KTtcbiAgICB9XG4gICAgX3NhdmVDcm9wKG9wdGlvbnMsIGNiKSB7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5jcm9wVyA9IG9wdGlvbnMuY3JvcFc7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5jcm9wSCA9IG9wdGlvbnMuY3JvcEg7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5zeCA9IG9wdGlvbnMuc3g7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5zeSA9IG9wdGlvbnMuc3k7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5jcm9wKCk7XG4gICAgICAgIHRoaXMucmVzdWx0TGlzdC5wdXNoKHRoaXMuaW1nSGFuZGxlci5yZXN1bHQpO1xuICAgICAgICBjYih0aGlzLmltZ0hhbmRsZXIucmVzdWx0KTtcbiAgICB9XG4gICAgX3NhdmVTY2FsZShvcHRpb25zLCBjYikge1xuICAgICAgICB0aGlzLmltZ0hhbmRsZXIuc2NhbGVSYXRpbyA9IG9wdGlvbnMuc2NhbGVSYXRpbztcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLnNjYWxlKCk7XG4gICAgICAgIHRoaXMucmVzdWx0TGlzdC5wdXNoKHRoaXMuaW1nSGFuZGxlci5yZXN1bHQpO1xuICAgICAgICBjYih0aGlzLmltZ0hhbmRsZXIucmVzdWx0KTtcbiAgICB9XG4gICAgX3NhdmVNYXJrKG9wdGlvbnMsIGNiKSB7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5tYXJrWCA9IG9wdGlvbnMubWFya1g7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5tYXJrWSA9IG9wdGlvbnMubWFya1k7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5tYXJrVGV4dCA9IG9wdGlvbnMubWFya1RleHQ7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5tYXJrRm9udCA9IG9wdGlvbnMubWFya0ZvbnQ7XG4gICAgICAgIHRoaXMuaW1nSGFuZGxlci5tYXJrU3R5bGUgPSBvcHRpb25zLm1hcmtTdHlsZTtcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyLm1hcmsoKTtcbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnB1c2godGhpcy5pbWdIYW5kbGVyLnJlc3VsdCk7XG4gICAgICAgIGNiKHRoaXMuaW1nSGFuZGxlci5yZXN1bHQpO1xuICAgIH1cbiAgICBfcmVzZXQoY2IpIHtcbiAgICAgICAgdGhpcy5yb3RhdGVOdW0gPSAwO1xuICAgICAgICB0aGlzLnNjYWxlUmF0aW8gPSAxO1xuXG4gICAgICAgIHRoaXMucmVzdWx0TGlzdCA9IHRoaXMucmVzdWx0TGlzdC5zbGljZSgwLCAxKTtcbiAgICAgICAgdGhpcy5pbWdIYW5kbGVyID0gbmV3IEltZ0hhbmRsZXIoe1xuICAgICAgICAgICAgc291cmNlSW1nOiB0aGlzLnJlc3VsdExpc3RbMF1cbiAgICAgICAgfSlcbiAgICAgICAgY2IodGhpcy5yZXN1bHRMaXN0WzBdKTtcbiAgICB9XG4gICAgX3NhdmUoY2IpIHtcbiAgICAgICAgbGV0IG1heCA9IHRoaXMubWF4U2l6ZSAqIDEwMjQ7XG4gICAgICAgIGxldCBiYXNlNjREYXRhID0gY29tcHJlc3ModGhpcy5yZXN1bHRMaXN0W3RoaXMucmVzdWx0TGlzdC5sZW5ndGggLSAxXSwgbWF4LCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgICAgICAgIC8vIOaooeaLn+i/lOWbnlxuICAgICAgICAgICAgbGV0IGRhdGEgPSB7c3JjOiBiYXNlNjREYXRhfTtcblxuICAgICAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgaW1nLnNyYyA9IGRhdGEuc3JjO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gW2ltZ107XG4gICAgICAgICAgICBjYihkYXRhKTtcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZShkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBibG9iID0gYmFzZTY0RGF0YTJCbG9iKGJhc2U2NERhdGEsIHRoaXMubWltZSk7XG4gICAgICAgICAgICBsZXQgZm9ybURhdGEgPSBibG9iMkZvcm1EYXRhKGJsb2IpO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuYWpheFVybCxcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBkYXRhOiBmb3JtRGF0YSxcbiAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsIC8vIOS4jeWkhOeQhuaVsOaNrlxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSwgLy8g5LiN6K6+572u5YaF5a6557G75Z6LXG4gICAgICAgICAgICAgICAgc3VjY2VzczogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHJlc3BvbnNlLnNyYztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gW2ltZ107XG4gICAgICAgICAgICAgICAgICAgIGNiKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCflkI7lj7DplJnor68nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTsgICAgICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgfVxuICAgIF9zYXZlTWFya0FsbChvcHRpb25zLCBjYikge1xuICAgICAgICBcbiAgICAgICAgbGV0IHhQZXJjZW50ID0gb3B0aW9ucy5tYXJrWCAvIHRoaXMucmVzdWx0TGlzdFt0aGlzLnJlc3VsdExpc3QubGVuZ3RoIC0gMV0ud2lkdGg7XG4gICAgICAgIGxldCB5UGVyY2VudCA9IG9wdGlvbnMubWFya1kgLyB0aGlzLnJlc3VsdExpc3RbdGhpcy5yZXN1bHRMaXN0Lmxlbmd0aCAtIDFdLmhlaWdodDtcbiAgICAgICAgJCh0aGlzLnNvdXJjZUltZ0xpc3QpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBsZXQgaW1nSGFuZGxlciA9IG5ldyBJbWdIYW5kbGVyKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJbWc6IGVsZW1lbnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW1nSGFuZGxlci5tYXJrWCA9IGVsZW1lbnQud2lkdGggKiB4UGVyY2VudDtcbiAgICAgICAgICAgIGltZ0hhbmRsZXIubWFya1kgPSBlbGVtZW50LmhlaWdodCAqIHlQZXJjZW50O1xuXG4gICAgICAgICAgICBpbWdIYW5kbGVyLm1hcmtUZXh0ID0gb3B0aW9ucy5tYXJrVGV4dDtcbiAgICAgICAgICAgIGltZ0hhbmRsZXIubWFya0ZvbnQgPSBvcHRpb25zLm1hcmtGb250O1xuICAgICAgICAgICAgaW1nSGFuZGxlci5tYXJrU3R5bGUgPSBvcHRpb25zLm1hcmtTdHlsZTtcblxuICAgICAgICAgICAgaW1nSGFuZGxlci5tYXJrKCk7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdExpc3QucHVzaChpbWdIYW5kbGVyLnJlc3VsdCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3NhdmUoY2IpO1xuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9XG4gICAgX2NoYW5nZUFjdGl2ZShvcHRpb25zLCBjYikge1xuICAgICAgICB0aGlzLmltZ0hhbmRsZXIgPSBuZXcgSW1nSGFuZGxlcih7XG4gICAgICAgICAgICBzb3VyY2VJbWc6IG9wdGlvbnMuYWN0aXZlSW1nXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMucmVzdWx0TGlzdCA9IFt0aGlzLmltZ0hhbmRsZXIucmVzdWx0XTtcbiAgICAgICAgY2IodGhpcy5pbWdIYW5kbGVyLnJlc3VsdCk7XG4gICAgfVxuXG5cbn1cblxuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gUGlwZUltZztcbn0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gUGlwZUltZztcbiAgICB9KTtcbn0gZWxzZSB7XG4gICAgd2luZG93LlBpcGVJbWcgPSBQaXBlSW1nO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/pipeImg.js\n");

    /***/
  },

  /***/"./src/js/util.js":
  /*!************************!*\
    !*** ./src/js/util.js ***!
    \************************/
  /*! exports provided: drag, loadImage, loadImages, getCanvas, getBase64Size, compress, base64Data2Blob, blob2FormData, chooseFile, uploadFile, getImgPromise, _$, img2cvs */
  /***/function srcJsUtilJs(module, __webpack_exports__, __webpack_require__) {

    "use strict";

    eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"drag\", function() { return drag; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loadImage\", function() { return loadImage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loadImages\", function() { return loadImages; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getCanvas\", function() { return getCanvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getBase64Size\", function() { return getBase64Size; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"compress\", function() { return compress; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"base64Data2Blob\", function() { return base64Data2Blob; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blob2FormData\", function() { return blob2FormData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"chooseFile\", function() { return chooseFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uploadFile\", function() { return uploadFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getImgPromise\", function() { return getImgPromise; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_$\", function() { return _$; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"img2cvs\", function() { return img2cvs; });\n//拖拽\nfunction drag(moveElement, dragBar = document, container, cb) {\n    if (!moveElement) return;\n\n    var draging = false,\n        x0, y0, mLeft0, mTop0, mLeft1, mTop1;\n\n    var mousedownHandler = (e) => {\n        e = e || window.event;\n        x0 = e.clientX;\n        y0 = e.clientY;\n        mLeft0 = moveElement.offsetLeft;\n        mTop0 = moveElement.offsetTop;\n\n        draging = true;\n\n    };\n    var mousemoveHandler = (e) => {\n        e = e || window.event;\n        if (draging) {\n            var x1 = e.clientX,\n                y1 = e.clientY;\n            mLeft1 = x1 - x0 + mLeft0;\n            mTop1 = y1 - y0 + mTop0;\n\n\n            if (container) {\n                // 计算可移动位置的大小， 保证元素不会超过可移动范围\n                // 此处就是父元素的宽度减去子元素宽度\n                var width = container.clientWidth - moveElement.offsetWidth;\n                var height = container.clientHeight - moveElement.offsetHeight;\n                // min方法保证不会超过右边界，max保证不会超过左边界\n                mLeft1 = Math.min(Math.max(0, mLeft1), width);\n                mTop1 = Math.min(Math.max(0, mTop1), height);\n            }\n\n\n            moveElement.style.left = mLeft1;\n            moveElement.style.top = mTop1;\n\n            typeof cb === 'function' && cb(mLeft1, mTop1);\n        }\n    };\n    var mouseupHandler = (e) => {\n        draging = false;\n    }\n\n    if (window.addEventListener) {\n        dragBar.addEventListener('mousedown', mousedownHandler, false);\n        document.addEventListener('mousemove', mousemoveHandler, false);\n        document.addEventListener('mouseup', mouseupHandler, false);\n    }\n}\n\nfunction getImgPromise(src) {\n    return new Promise((resolve, reject) => {\n        let image = new Image();\n        // 跨域报错处理（Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.）\n        image.setAttribute('crossorigin', 'anonymous');\n        image.src = src;\n        image.onload = () => {\n            resolve(image);\n        };\n        image.onerror = () => {\n            reject('Error: image error!');\n        };\n    });\n}\n// 加载图片\nfunction loadImage(src, success, failure) {\n    var image = new Image();\n    // 跨域报错处理（Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.）\n    image.setAttribute('crossorigin', 'anonymous');\n    image.src = src;\n    image.onload = function () {\n        typeof success === 'function' && success(image);\n    };\n    image.onerror = function () {\n        typeof failure === 'function' && failure();\n    };\n}\n\nfunction loadImages(srcList, success, failure) {\n    var images = [];\n    var index = srcList.length;\n    var _loadImage = () => {\n        if (index === 0) {\n            return false;\n        }\n        var image = new Image();\n        // 跨域报错处理（Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.）\n        image.setAttribute('crossorigin', 'anonymous');\n        image.src = srcList[--index];\n        image.onload = function () {\n            images.unshift(image);\n            if (images.length === srcList.length) {\n                typeof success === 'function' && success(images);\n                return false;\n            }\n            _loadImage();\n        };\n        image.onerror = function () {\n            typeof failure === 'function' && failure();\n        };\n    };\n    _loadImage();\n\n}\n// 创建cavas\nfunction getCanvas(width, height) {\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n}\n\n//获取base64图片大小\nfunction getBase64Size(base64Data) {\n    // 'data:image/jpeg;base64,xxxxxx...xxx='\n    var str = base64Data.replace(/^data:image\\/[\\w]*;base64,$/, '');\n    var equalIndex = str.indexOf('=');\n    if (equalIndex > 0) {\n        str = str.substring(0, equalIndex);\n    }\n    var strLength = str.length;\n    return parseInt(strLength - (strLength / 8) * 2);\n}\n// 只对'image/jpeg'格式有效\nfunction compress(img, max, isSimple) {\n    let cvs = img;\n    if (cvs.nodeName.toLowerCase() === 'img') {\n        cvs = img2cvs(cvs);\n    }\n    let quality = 1;\n    let minWH = 800;\n    let scaleRatio = 0.9;\n    let qualityStep = 0.1;\n    // 质量压缩只支持'image/jpeg'，'image/webp'(chrome支持)\n    let qualityType = 'image/jpeg';\n\n    let width = cvs.width;\n    let height = cvs.height;\n    let cvsRatio = width / height;\n    let data = cvs.toDataURL(qualityType, 1.0);\n    let size0 = getBase64Size(data);\n    console.log('start compress: ' + Math.ceil(size0 / 1024));\n    if (isSimple) {\n        while (size0 > max) {\n            quality = Math.floor(max / size0 * 10) / 10;\n            data = cvs.toDataURL(qualityType, quality);\n            size0 = getBase64Size(data);\n        }\n\n    } else {\n        // 优先缩放\n        while (size0 > max && (width > minWH || height > minWH)) {\n            let newWidth, newHeight;\n            if (cvsRatio > 1) {\n                newWidth = width * scaleRatio > minWH ? width * scaleRatio : minWH;\n                newHeight = newWidth / cvsRatio;\n            } else {\n                newHeight = height * scaleRatio > minWH ? height * scaleRatio : minWH;\n                newWidth = newHeight * cvsRatio;\n            }\n\n            let canvas = getCanvas(newWidth, newHeight),\n                ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(cvs, 0, 0, newWidth, newHeight);\n\n            data = canvas.toDataURL(qualityType, 1.0);\n            size0 = getBase64Size(data);\n            width = newWidth;\n            height = newHeight;\n            cvs = canvas;\n        }\n        // 降低质量\n        while (size0 > max) {\n            quality -= qualityStep;\n            data = cvs.toDataURL(qualityType, quality);\n            size0 = getBase64Size(data);\n        }\n    }\n    console.log('end compress: ' + Math.ceil(size0 / 1024));\n    return data;\n}\n\n\nfunction base64Data2Blob(base64Data, mime) {\n    var binStr = atob(base64Data.split(',')[1]),\n        len = binStr.length,\n        arr = new Uint8Array(len);\n    if (!mime) {\n        // mime = base64Data.split(',')[0].split(':')[1].split(';')[0];\n        mime = base64Data.substring(base64Data.indexOf('data:') + 5, base64Data.indexOf(';base64'));\n    }\n\n    for (var i = 0; i < len; i++) {\n        arr[i] = binStr.charCodeAt(i);\n    }\n\n    return new Blob([arr], {\n        type: mime\n    });\n\n}\n\nfunction blob2FormData(blob, fileName) {\n    var formData = new FormData();\n    formData.append('file', blob);\n    if (!fileName) {\n        fileName = new Date().getTime();\n    }\n    formData.append(\"fileName\", fileName);\n\n    return formData;\n}\n\n// canvas转成blob对象，type值为image/jpeg或者image/webp时，可使用encoderOptions（0-1）设置图片展示质量。\nfunction canvas2Blob(canvas, callback, type, quality) {\n    // Polyfill\n    if (!HTMLCanvasElement.prototype.toBlob) {\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n            value: function (callback, type, quality) {\n\n                var binStr = atob(this.toDataURL('image/jpeg', quality).split(',')[1]),\n                    len = binStr.length,\n                    arr = new Uint8Array(len);\n\n                for (var i = 0; i < len; i++) {\n                    arr[i] = binStr.charCodeAt(i);\n                }\n\n                callback(new Blob([arr], {\n                    type: type || 'image/png'\n                }));\n            }\n        });\n    }\n\n    canvas.toBlob(callback, type, quality);\n}\n\nfunction uploadFile(formData, url) {\n\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open('POST', url); //注意跨域问题\n    xmlHttp.send(formData);\n    xmlHttp.onreadystatechange = function () {\n        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\n            console.log(xmlHttp.responseText);\n        } else {\n            console.log(xmlHttp.statusText);\n        }\n    };\n}\n// 选择文件\nfunction chooseFile(btn, cb, validFileCallback) {\n    let $btn = typeof btn === \"string\" ? document.querySelector(btn) : btn;\n    let $file = $btn.querySelector('input[type=file]');\n    if (!$file) {\n        let fileNode = document.createElement('input');\n        fileNode.setAttribute('type', 'file');\n\n        fileNode.style.cssText = 'display: none;';\n        $btn.appendChild(fileNode);\n        $file = $btn.querySelector('input[type=file]');\n    }\n\n    $file.addEventListener('change', function (e) {\n        if (this.files.length > 0) {\n\n            let oFile = this.files[0];\n\n            let validFile = true;\n            if (typeof validFileCallback === 'function' && validFileCallback(oFile) === false) {\n                validFile = false;\n            }\n\n            if (validFile) {\n                let reader = new FileReader();\n                reader.readAsDataURL(oFile);\n\n                reader.onload = function () {\n                    typeof cb === 'function' && cb(this.result);\n                }\n            } else {\n                console.log('onValidateFile function return false')\n            }\n\n        }\n    }, false);\n\n    // 阻止冒泡导致两次触发selectBtn\n    $file.addEventListener('click', (e) => {\n        e.stopPropagation();\n    })\n\n    $file.click();\n\n}\nfunction _$(ele) {\n    return typeof ele === 'string' ? document.querySelector(ele) : ele;\n}\nfunction img2cvs(img) {\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    canvas.width = img.naturalWidth;\n    canvas.height = img.naturalHeight;\n    ctx.drawImage(img, 0, 0);\n    return canvas;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbC5qcz9mNjQ0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixxREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRSwwRkFBMEY7QUFDMUY7O0FBRUEsbUJBQW1CLFNBQVM7QUFDNUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLFNBQVM7QUFDeEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFnQkMiLCJmaWxlIjoiLi9zcmMvanMvdXRpbC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v5ouW5ou9XG5mdW5jdGlvbiBkcmFnKG1vdmVFbGVtZW50LCBkcmFnQmFyID0gZG9jdW1lbnQsIGNvbnRhaW5lciwgY2IpIHtcbiAgICBpZiAoIW1vdmVFbGVtZW50KSByZXR1cm47XG5cbiAgICB2YXIgZHJhZ2luZyA9IGZhbHNlLFxuICAgICAgICB4MCwgeTAsIG1MZWZ0MCwgbVRvcDAsIG1MZWZ0MSwgbVRvcDE7XG5cbiAgICB2YXIgbW91c2Vkb3duSGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcbiAgICAgICAgeDAgPSBlLmNsaWVudFg7XG4gICAgICAgIHkwID0gZS5jbGllbnRZO1xuICAgICAgICBtTGVmdDAgPSBtb3ZlRWxlbWVudC5vZmZzZXRMZWZ0O1xuICAgICAgICBtVG9wMCA9IG1vdmVFbGVtZW50Lm9mZnNldFRvcDtcblxuICAgICAgICBkcmFnaW5nID0gdHJ1ZTtcblxuICAgIH07XG4gICAgdmFyIG1vdXNlbW92ZUhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgIGlmIChkcmFnaW5nKSB7XG4gICAgICAgICAgICB2YXIgeDEgPSBlLmNsaWVudFgsXG4gICAgICAgICAgICAgICAgeTEgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICBtTGVmdDEgPSB4MSAtIHgwICsgbUxlZnQwO1xuICAgICAgICAgICAgbVRvcDEgPSB5MSAtIHkwICsgbVRvcDA7XG5cblxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIC8vIOiuoeeul+WPr+enu+WKqOS9jee9rueahOWkp+Wwj++8jCDkv53or4HlhYPntKDkuI3kvJrotoXov4flj6/np7vliqjojIPlm7RcbiAgICAgICAgICAgICAgICAvLyDmraTlpITlsLHmmK/niLblhYPntKDnmoTlrr3luqblh4/ljrvlrZDlhYPntKDlrr3luqZcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGggLSBtb3ZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gY29udGFpbmVyLmNsaWVudEhlaWdodCAtIG1vdmVFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAvLyBtaW7mlrnms5Xkv53or4HkuI3kvJrotoXov4flj7PovrnnlYzvvIxtYXjkv53or4HkuI3kvJrotoXov4flt6bovrnnlYxcbiAgICAgICAgICAgICAgICBtTGVmdDEgPSBNYXRoLm1pbihNYXRoLm1heCgwLCBtTGVmdDEpLCB3aWR0aCk7XG4gICAgICAgICAgICAgICAgbVRvcDEgPSBNYXRoLm1pbihNYXRoLm1heCgwLCBtVG9wMSksIGhlaWdodCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgbW92ZUVsZW1lbnQuc3R5bGUubGVmdCA9IG1MZWZ0MTtcbiAgICAgICAgICAgIG1vdmVFbGVtZW50LnN0eWxlLnRvcCA9IG1Ub3AxO1xuXG4gICAgICAgICAgICB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgJiYgY2IobUxlZnQxLCBtVG9wMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBtb3VzZXVwSGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgIGRyYWdpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgZHJhZ0Jhci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBtb3VzZWRvd25IYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdXNlbW92ZUhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNldXBIYW5kbGVyLCBmYWxzZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRJbWdQcm9taXNlKHNyYykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAvLyDot6jln5/miqXplJnlpITnkIbvvIhGYWlsZWQgdG8gZXhlY3V0ZSAndG9EYXRhVVJMJyBvbiAnSFRNTENhbnZhc0VsZW1lbnQnOiBUYWludGVkIGNhbnZhc2VzIG1heSBub3QgYmUgZXhwb3J0ZWQu77yJXG4gICAgICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnY3Jvc3NvcmlnaW4nLCAnYW5vbnltb3VzJyk7XG4gICAgICAgIGltYWdlLnNyYyA9IHNyYztcbiAgICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZShpbWFnZSk7XG4gICAgICAgIH07XG4gICAgICAgIGltYWdlLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QoJ0Vycm9yOiBpbWFnZSBlcnJvciEnKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbn1cbi8vIOWKoOi9veWbvueJh1xuZnVuY3Rpb24gbG9hZEltYWdlKHNyYywgc3VjY2VzcywgZmFpbHVyZSkge1xuICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIC8vIOi3qOWfn+aKpemUmeWkhOeQhu+8iEZhaWxlZCB0byBleGVjdXRlICd0b0RhdGFVUkwnIG9uICdIVE1MQ2FudmFzRWxlbWVudCc6IFRhaW50ZWQgY2FudmFzZXMgbWF5IG5vdCBiZSBleHBvcnRlZC7vvIlcbiAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ2Nyb3Nzb3JpZ2luJywgJ2Fub255bW91cycpO1xuICAgIGltYWdlLnNyYyA9IHNyYztcbiAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHR5cGVvZiBzdWNjZXNzID09PSAnZnVuY3Rpb24nICYmIHN1Y2Nlc3MoaW1hZ2UpO1xuICAgIH07XG4gICAgaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHlwZW9mIGZhaWx1cmUgPT09ICdmdW5jdGlvbicgJiYgZmFpbHVyZSgpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGxvYWRJbWFnZXMoc3JjTGlzdCwgc3VjY2VzcywgZmFpbHVyZSkge1xuICAgIHZhciBpbWFnZXMgPSBbXTtcbiAgICB2YXIgaW5kZXggPSBzcmNMaXN0Lmxlbmd0aDtcbiAgICB2YXIgX2xvYWRJbWFnZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIC8vIOi3qOWfn+aKpemUmeWkhOeQhu+8iEZhaWxlZCB0byBleGVjdXRlICd0b0RhdGFVUkwnIG9uICdIVE1MQ2FudmFzRWxlbWVudCc6IFRhaW50ZWQgY2FudmFzZXMgbWF5IG5vdCBiZSBleHBvcnRlZC7vvIlcbiAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdjcm9zc29yaWdpbicsICdhbm9ueW1vdXMnKTtcbiAgICAgICAgaW1hZ2Uuc3JjID0gc3JjTGlzdFstLWluZGV4XTtcbiAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaW1hZ2VzLnVuc2hpZnQoaW1hZ2UpO1xuICAgICAgICAgICAgaWYgKGltYWdlcy5sZW5ndGggPT09IHNyY0xpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdHlwZW9mIHN1Y2Nlc3MgPT09ICdmdW5jdGlvbicgJiYgc3VjY2VzcyhpbWFnZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9sb2FkSW1hZ2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHR5cGVvZiBmYWlsdXJlID09PSAnZnVuY3Rpb24nICYmIGZhaWx1cmUoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIF9sb2FkSW1hZ2UoKTtcblxufVxuLy8g5Yib5bu6Y2F2YXNcbmZ1bmN0aW9uIGdldENhbnZhcyh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgcmV0dXJuIGNhbnZhcztcbn1cblxuLy/ojrflj5ZiYXNlNjTlm77niYflpKflsI9cbmZ1bmN0aW9uIGdldEJhc2U2NFNpemUoYmFzZTY0RGF0YSkge1xuICAgIC8vICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LHh4eHh4eC4uLnh4eD0nXG4gICAgdmFyIHN0ciA9IGJhc2U2NERhdGEucmVwbGFjZSgvXmRhdGE6aW1hZ2VcXC9bXFx3XSo7YmFzZTY0LCQvLCAnJyk7XG4gICAgdmFyIGVxdWFsSW5kZXggPSBzdHIuaW5kZXhPZignPScpO1xuICAgIGlmIChlcXVhbEluZGV4ID4gMCkge1xuICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIGVxdWFsSW5kZXgpO1xuICAgIH1cbiAgICB2YXIgc3RyTGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgICByZXR1cm4gcGFyc2VJbnQoc3RyTGVuZ3RoIC0gKHN0ckxlbmd0aCAvIDgpICogMik7XG59XG4vLyDlj6rlr7knaW1hZ2UvanBlZyfmoLzlvI/mnInmlYhcbmZ1bmN0aW9uIGNvbXByZXNzKGltZywgbWF4LCBpc1NpbXBsZSkge1xuICAgIGxldCBjdnMgPSBpbWc7XG4gICAgaWYgKGN2cy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW1nJykge1xuICAgICAgICBjdnMgPSBpbWcyY3ZzKGN2cyk7XG4gICAgfVxuICAgIGxldCBxdWFsaXR5ID0gMTtcbiAgICBsZXQgbWluV0ggPSA4MDA7XG4gICAgbGV0IHNjYWxlUmF0aW8gPSAwLjk7XG4gICAgbGV0IHF1YWxpdHlTdGVwID0gMC4xO1xuICAgIC8vIOi0qOmHj+WOi+e8qeWPquaUr+aMgSdpbWFnZS9qcGVnJ++8jCdpbWFnZS93ZWJwJyhjaHJvbWXmlK/mjIEpXG4gICAgbGV0IHF1YWxpdHlUeXBlID0gJ2ltYWdlL2pwZWcnO1xuXG4gICAgbGV0IHdpZHRoID0gY3ZzLndpZHRoO1xuICAgIGxldCBoZWlnaHQgPSBjdnMuaGVpZ2h0O1xuICAgIGxldCBjdnNSYXRpbyA9IHdpZHRoIC8gaGVpZ2h0O1xuICAgIGxldCBkYXRhID0gY3ZzLnRvRGF0YVVSTChxdWFsaXR5VHlwZSwgMS4wKTtcbiAgICBsZXQgc2l6ZTAgPSBnZXRCYXNlNjRTaXplKGRhdGEpO1xuICAgIGNvbnNvbGUubG9nKCdzdGFydCBjb21wcmVzczogJyArIE1hdGguY2VpbChzaXplMCAvIDEwMjQpKTtcbiAgICBpZiAoaXNTaW1wbGUpIHtcbiAgICAgICAgd2hpbGUgKHNpemUwID4gbWF4KSB7XG4gICAgICAgICAgICBxdWFsaXR5ID0gTWF0aC5mbG9vcihtYXggLyBzaXplMCAqIDEwKSAvIDEwO1xuICAgICAgICAgICAgZGF0YSA9IGN2cy50b0RhdGFVUkwocXVhbGl0eVR5cGUsIHF1YWxpdHkpO1xuICAgICAgICAgICAgc2l6ZTAgPSBnZXRCYXNlNjRTaXplKGRhdGEpO1xuICAgICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyDkvJjlhYjnvKnmlL5cbiAgICAgICAgd2hpbGUgKHNpemUwID4gbWF4ICYmICh3aWR0aCA+IG1pbldIIHx8IGhlaWdodCA+IG1pbldIKSkge1xuICAgICAgICAgICAgbGV0IG5ld1dpZHRoLCBuZXdIZWlnaHQ7XG4gICAgICAgICAgICBpZiAoY3ZzUmF0aW8gPiAxKSB7XG4gICAgICAgICAgICAgICAgbmV3V2lkdGggPSB3aWR0aCAqIHNjYWxlUmF0aW8gPiBtaW5XSCA/IHdpZHRoICogc2NhbGVSYXRpbyA6IG1pbldIO1xuICAgICAgICAgICAgICAgIG5ld0hlaWdodCA9IG5ld1dpZHRoIC8gY3ZzUmF0aW87XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0hlaWdodCA9IGhlaWdodCAqIHNjYWxlUmF0aW8gPiBtaW5XSCA/IGhlaWdodCAqIHNjYWxlUmF0aW8gOiBtaW5XSDtcbiAgICAgICAgICAgICAgICBuZXdXaWR0aCA9IG5ld0hlaWdodCAqIGN2c1JhdGlvO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgY2FudmFzID0gZ2V0Q2FudmFzKG5ld1dpZHRoLCBuZXdIZWlnaHQpLFxuICAgICAgICAgICAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGN2cywgMCwgMCwgbmV3V2lkdGgsIG5ld0hlaWdodCk7XG5cbiAgICAgICAgICAgIGRhdGEgPSBjYW52YXMudG9EYXRhVVJMKHF1YWxpdHlUeXBlLCAxLjApO1xuICAgICAgICAgICAgc2l6ZTAgPSBnZXRCYXNlNjRTaXplKGRhdGEpO1xuICAgICAgICAgICAgd2lkdGggPSBuZXdXaWR0aDtcbiAgICAgICAgICAgIGhlaWdodCA9IG5ld0hlaWdodDtcbiAgICAgICAgICAgIGN2cyA9IGNhbnZhcztcbiAgICAgICAgfVxuICAgICAgICAvLyDpmY3kvY7otKjph49cbiAgICAgICAgd2hpbGUgKHNpemUwID4gbWF4KSB7XG4gICAgICAgICAgICBxdWFsaXR5IC09IHF1YWxpdHlTdGVwO1xuICAgICAgICAgICAgZGF0YSA9IGN2cy50b0RhdGFVUkwocXVhbGl0eVR5cGUsIHF1YWxpdHkpO1xuICAgICAgICAgICAgc2l6ZTAgPSBnZXRCYXNlNjRTaXplKGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdlbmQgY29tcHJlc3M6ICcgKyBNYXRoLmNlaWwoc2l6ZTAgLyAxMDI0KSk7XG4gICAgcmV0dXJuIGRhdGE7XG59XG5cblxuZnVuY3Rpb24gYmFzZTY0RGF0YTJCbG9iKGJhc2U2NERhdGEsIG1pbWUpIHtcbiAgICB2YXIgYmluU3RyID0gYXRvYihiYXNlNjREYXRhLnNwbGl0KCcsJylbMV0pLFxuICAgICAgICBsZW4gPSBiaW5TdHIubGVuZ3RoLFxuICAgICAgICBhcnIgPSBuZXcgVWludDhBcnJheShsZW4pO1xuICAgIGlmICghbWltZSkge1xuICAgICAgICAvLyBtaW1lID0gYmFzZTY0RGF0YS5zcGxpdCgnLCcpWzBdLnNwbGl0KCc6JylbMV0uc3BsaXQoJzsnKVswXTtcbiAgICAgICAgbWltZSA9IGJhc2U2NERhdGEuc3Vic3RyaW5nKGJhc2U2NERhdGEuaW5kZXhPZignZGF0YTonKSArIDUsIGJhc2U2NERhdGEuaW5kZXhPZignO2Jhc2U2NCcpKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGFycltpXSA9IGJpblN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgQmxvYihbYXJyXSwge1xuICAgICAgICB0eXBlOiBtaW1lXG4gICAgfSk7XG5cbn1cblxuZnVuY3Rpb24gYmxvYjJGb3JtRGF0YShibG9iLCBmaWxlTmFtZSkge1xuICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGJsb2IpO1xuICAgIGlmICghZmlsZU5hbWUpIHtcbiAgICAgICAgZmlsZU5hbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9XG4gICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZU5hbWVcIiwgZmlsZU5hbWUpO1xuXG4gICAgcmV0dXJuIGZvcm1EYXRhO1xufVxuXG4vLyBjYW52YXPovazmiJBibG9i5a+56LGh77yMdHlwZeWAvOS4umltYWdlL2pwZWfmiJbogIVpbWFnZS93ZWJw5pe277yM5Y+v5L2/55SoZW5jb2Rlck9wdGlvbnPvvIgwLTHvvInorr7nva7lm77niYflsZXnpLrotKjph4/jgIJcbmZ1bmN0aW9uIGNhbnZhczJCbG9iKGNhbnZhcywgY2FsbGJhY2ssIHR5cGUsIHF1YWxpdHkpIHtcbiAgICAvLyBQb2x5ZmlsbFxuICAgIGlmICghSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLnRvQmxvYikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLCAndG9CbG9iJywge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChjYWxsYmFjaywgdHlwZSwgcXVhbGl0eSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGJpblN0ciA9IGF0b2IodGhpcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCBxdWFsaXR5KS5zcGxpdCgnLCcpWzFdKSxcbiAgICAgICAgICAgICAgICAgICAgbGVuID0gYmluU3RyLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgYXJyID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyW2ldID0gYmluU3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEJsb2IoW2Fycl0sIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnaW1hZ2UvcG5nJ1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2FudmFzLnRvQmxvYihjYWxsYmFjaywgdHlwZSwgcXVhbGl0eSk7XG59XG5cbmZ1bmN0aW9uIHVwbG9hZEZpbGUoZm9ybURhdGEsIHVybCkge1xuXG4gICAgdmFyIHhtbEh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCB1cmwpOyAvL+azqOaEj+i3qOWfn+mXrumimFxuICAgIHhtbEh0dHAuc2VuZChmb3JtRGF0YSk7XG4gICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh4bWxIdHRwLnJlYWR5U3RhdGUgPT0gNCAmJiB4bWxIdHRwLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHhtbEh0dHAucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHhtbEh0dHAuc3RhdHVzVGV4dCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuLy8g6YCJ5oup5paH5Lu2XG5mdW5jdGlvbiBjaG9vc2VGaWxlKGJ0biwgY2IsIHZhbGlkRmlsZUNhbGxiYWNrKSB7XG4gICAgbGV0ICRidG4gPSB0eXBlb2YgYnRuID09PSBcInN0cmluZ1wiID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidG4pIDogYnRuO1xuICAgIGxldCAkZmlsZSA9ICRidG4ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1maWxlXScpO1xuICAgIGlmICghJGZpbGUpIHtcbiAgICAgICAgbGV0IGZpbGVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgZmlsZU5vZGUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2ZpbGUnKTtcblxuICAgICAgICBmaWxlTm9kZS5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IG5vbmU7JztcbiAgICAgICAgJGJ0bi5hcHBlbmRDaGlsZChmaWxlTm9kZSk7XG4gICAgICAgICRmaWxlID0gJGJ0bi5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPWZpbGVdJyk7XG4gICAgfVxuXG4gICAgJGZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlsZXMubGVuZ3RoID4gMCkge1xuXG4gICAgICAgICAgICBsZXQgb0ZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuXG4gICAgICAgICAgICBsZXQgdmFsaWRGaWxlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRGaWxlQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicgJiYgdmFsaWRGaWxlQ2FsbGJhY2sob0ZpbGUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHZhbGlkRmlsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsaWRGaWxlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwob0ZpbGUpO1xuXG4gICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGNiID09PSAnZnVuY3Rpb24nICYmIGNiKHRoaXMucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvblZhbGlkYXRlRmlsZSBmdW5jdGlvbiByZXR1cm4gZmFsc2UnKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cbiAgICAvLyDpmLvmraLlhpLms6Hlr7zoh7TkuKTmrKHop6blj5FzZWxlY3RCdG5cbiAgICAkZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSlcblxuICAgICRmaWxlLmNsaWNrKCk7XG5cbn1cbmZ1bmN0aW9uIF8kKGVsZSkge1xuICAgIHJldHVybiB0eXBlb2YgZWxlID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlKSA6IGVsZTtcbn1cbmZ1bmN0aW9uIGltZzJjdnMoaW1nKSB7XG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjYW52YXMud2lkdGggPSBpbWcubmF0dXJhbFdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcubmF0dXJhbEhlaWdodDtcbiAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XG4gICAgcmV0dXJuIGNhbnZhcztcbn1cblxuZXhwb3J0IHtcbiAgICBkcmFnLFxuICAgIGxvYWRJbWFnZSxcbiAgICBsb2FkSW1hZ2VzLFxuICAgIGdldENhbnZhcyxcbiAgICBnZXRCYXNlNjRTaXplLFxuICAgIGNvbXByZXNzLFxuICAgIGJhc2U2NERhdGEyQmxvYixcbiAgICBibG9iMkZvcm1EYXRhLFxuICAgIGNob29zZUZpbGUsXG4gICAgdXBsb2FkRmlsZSxcbiAgICBnZXRJbWdQcm9taXNlLFxuICAgIF8kLFxuICAgIGltZzJjdnNcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/util.js\n");

    /***/
  },

  /***/0:
  /*!*********************************!*\
    !*** multi ./src/js/pipeImg.js ***!
    \*********************************/
  /*! no static exports found */
  /***/function _(module, exports, __webpack_require__) {

    module.exports = __webpack_require__( /*! H:\workspace\03pipeImg\src\js\pipeImg.js */"./src/js/pipeImg.js");

    /***/
  }

  /******/ });