{"version":3,"file":"pipeImg.js","sources":["webpack:///webpack/bootstrap","webpack:///./src/css/pipeImg.scss","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/css/pipeImg.scss?e5eb","webpack:///src/js/dialog.js","webpack:///./src/js/dialog.tpl","webpack:///src/js/dragBox.js","webpack:///src/js/imgHandler.js","webpack:///src/js/pipeImg.js","webpack:///src/js/util.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/pipeImg.js\");\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"@charset \\\"UTF-8\\\";\\n/*\\r\\n * aid brush 颜色最浅 笔刷越大颜色越深\\r\\n * [mini, tiny, small, medium, large, big, huge, massive]\\r\\n */\\n/*\\r\\n * extend color\\r\\n * Roman Numbers\\r\\n * i: 1, ii: 2, iii: 3, iv: 4, v: 5, vi: 6, vii: 7, viii: 8, ix: 9, x: 10\\r\\n */\\n/*\\r\\n*@module: CSS-reset\\r\\n*@Author: CaoJiarui 2016.06.14\\r\\n*@Update: \\r\\n*/\\nhtml {\\n  color: #222;\\n  background: #fff;\\n  font-size: 12px;\\n  text-size-adjust: 100%;\\n  -webkit-text-size-adjust: 100%; }\\n\\nbody, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, code, form, fieldset, legend, input, textarea, blockquote, th, td, hr, button, article, aside, details, figcaption, figure, footer, header, group, menu, nav, section {\\n  margin: 0;\\n  padding: 0; }\\n\\n/* for html5 tag */\\narticle, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {\\n  display: block; }\\n\\naudio, canvas, video {\\n  display: inline-block;\\n  *display: inline;\\n  *zoom: 1; }\\n\\nbody, button, input, select, textarea {\\n  font-family: \\\"Roboto\\\", Arial, \\\"Microsoft YaHei\\\", sans-serif;\\n  font-size: inherit;\\n  line-height: 1.5; }\\n\\ninput, select, textarea {\\n  vertical-align: middle;\\n  color: inherit; }\\n\\nbutton, input {\\n  *overflow: visible;\\n  line-height: normal; }\\n\\n::-webkit-input-placeholder {\\n  /* WebKit browsers */\\n  color: #888 !important; }\\n\\n:-moz-placeholder {\\n  /* Mozilla Firefox 4 to 18 */\\n  color: #888 !important; }\\n\\n::-moz-placeholder {\\n  /* Mozilla Firefox 19+ */\\n  color: #888 !important; }\\n\\n:-ms-input-placeholder {\\n  /* Internet Explorer 10+ */\\n  color: #888 !important; }\\n\\nbutton {\\n  cursor: pointer; }\\n\\nbutton::-moz-focus-inner, input::-moz-focus-inner {\\n  padding: 0;\\n  border: 0; }\\n\\ntable {\\n  border-collapse: collapse;\\n  border-spacing: 0; }\\n\\nth {\\n  text-align: inherit; }\\n\\nfieldset, img {\\n  border: 0; }\\n\\niframe {\\n  display: block; }\\n\\nblockquote {\\n  margin: 1em 4em 1em 2em;\\n  padding: 0.6em 1em;\\n  background: #f1f1f1; }\\n\\nblockquote blockquote {\\n  padding: 0 0 0 1em;\\n  margin-left: 2em;\\n  border-left: 0.4em solid #ddd; }\\n\\nacronym, abbr {\\n  border-bottom: 1px dotted;\\n  font-variant: normal; }\\n\\nabbr {\\n  cursor: help; }\\n\\ndel {\\n  text-decoration: line-through; }\\n\\naddress, caption, cite, code, den, em, th, var {\\n  font-style: normal;\\n  font-weight: 500; }\\n\\nul, ol {\\n  list-style: none; }\\n\\ncaption, th {\\n  text-align: left; }\\n\\nq:before, q:after {\\n  content: ''; }\\n\\nsub, sup {\\n  font-size: 75%;\\n  line-height: 0;\\n  position: relative;\\n  vertical-align: baseline; }\\n\\nsup {\\n  top: -0.5em; }\\n\\nsub {\\n  bottom: -0.25em; }\\n\\n/* link color */\\na {\\n  color: #1470CC;\\n  text-decoration: none; }\\n\\na:hover {\\n  color: #E64545;\\n  text-decoration: none; }\\n\\nins, a {\\n  text-decoration: none; }\\n\\nsmall {\\n  font-size: 11px;\\n  color: #888; }\\n\\n:focus {\\n  outline: none; }\\n\\n/* standard color */\\nh1, h2, h3, h4, h5, h6 {\\n  font-size: 100%;\\n  font-weight: bold;\\n  margin: 0; }\\n\\n@font-face {\\n  font-family: 'Mic-icon';\\n  src: url(\\\"/assets/font/micon.eot?v=20180525\\\");\\n  src: url(\\\"/assets/font/micon.eot?#iefix&v=20180525\\\") format(\\\"embedded-opentype\\\"), url(\\\"/assets/font/micon.woff?v=20180525\\\") format(\\\"woff\\\"), url(\\\"/assets/font/micon.ttf?v=20180525\\\") format(\\\"truetype\\\");\\n  font-weight: normal;\\n  font-style: normal; }\\n\\n.ob-icon {\\n  font-family: 'Mic-icon';\\n  font-weight: normal;\\n  font-style: normal;\\n  text-decoration: inherit;\\n  -webkit-font-smoothing: antialiased;\\n  display: inline-block;\\n  *display: inline;\\n  *zoom: 1;\\n  font-size: 16px;\\n  line-height: 1;\\n  vertical-align: middle;\\n  text-decoration: none !important; }\\n\\n.ob-icon.icon-refresh:before {\\n  content: '\\\\E046'; }\\n\\n.ob-icon.icon-crop:before {\\n  content: '\\\\E108'; }\\n\\n.ob-icon.icon-scaling:before {\\n  content: '\\\\E055'; }\\n\\n.ob-icon.icon-add-l:before {\\n  content: '\\\\E005'; }\\n\\n.ob-icon.icon-batch:before {\\n  content: '\\\\E052'; }\\n\\n.ob-icon.icon-delete:before {\\n  content: '\\\\E00C'; }\\n\\n.ob-icon.icon-rotate-r:before {\\n  content: '\\\\E053'; }\\n\\n.ob-icon.icon-rotate-l:before {\\n  content: '\\\\E054'; }\\n\\n.ob-icon.icon-lock:before {\\n  content: '\\\\E048'; }\\n\\n* {\\n  user-select: none; }\\n\\n.dragbox-wrapper {\\n  position: relative; }\\n  .dragbox-wrapper .img-dark {\\n    opacity: 0.3; }\\n  .dragbox-wrapper .img-light {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    clip: rect(0, 100%, 100%, 0); }\\n  .dragbox-wrapper .mark-txt {\\n    position: relative;\\n    left: 0;\\n    top: 0;\\n    font-size: 18px;\\n    color: #000;\\n    display: inline-block;\\n    line-height: 1.5;\\n    white-space: nowrap;\\n    padding: 0 5px; }\\n  .dragbox-wrapper .drag-box {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    z-index: 2;\\n    /*第三层需用绝对定位浮在上面*/\\n    width: 100%;\\n    height: 100%;\\n    border: 1px solid #fff;\\n    box-sizing: border-box;\\n    cursor: move; }\\n    .dragbox-wrapper .drag-box .drag-point {\\n      position: absolute;\\n      width: 8px;\\n      height: 8px;\\n      background: #fff;\\n      z-index: 2; }\\n    .dragbox-wrapper .drag-box .up-left {\\n      margin-top: -4px;\\n      margin-left: -4px;\\n      cursor: nw-resize; }\\n    .dragbox-wrapper .drag-box .up {\\n      left: 50%;\\n      /*父元素盒子main宽度的一半，注意要有绝对定位*/\\n      margin-left: -4px;\\n      top: -4px;\\n      cursor: n-resize; }\\n    .dragbox-wrapper .drag-box .up-right {\\n      top: -4px;\\n      right: -4px;\\n      cursor: ne-resize; }\\n    .dragbox-wrapper .drag-box .right {\\n      top: 50%;\\n      margin-top: -4px;\\n      right: -4px;\\n      cursor: e-resize; }\\n    .dragbox-wrapper .drag-box .right-down {\\n      right: -4px;\\n      bottom: -4px;\\n      cursor: se-resize; }\\n    .dragbox-wrapper .drag-box .down {\\n      bottom: -4px;\\n      left: 50%;\\n      margin-left: -4px;\\n      cursor: s-resize; }\\n    .dragbox-wrapper .drag-box .left-down {\\n      left: -4px;\\n      bottom: -4px;\\n      cursor: sw-resize; }\\n    .dragbox-wrapper .drag-box .left {\\n      left: -4px;\\n      top: 50%;\\n      margin-top: -4px;\\n      cursor: w-resize; }\\n    .dragbox-wrapper .drag-box .up, .dragbox-wrapper .drag-box .down, .dragbox-wrapper .drag-box .left, .dragbox-wrapper .drag-box .right {\\n      display: none; }\\n\\n.pipe-dialog {\\n  width: 100%;\\n  height: 100%;\\n  position: fixed;\\n  z-index: 2025;\\n  top: 0px;\\n  left: 0px;\\n  overflow: hidden; }\\n  .pipe-dialog .pipe-mask {\\n    height: 100%;\\n    background: black none repeat scroll 0% 0%;\\n    opacity: 0.4; }\\n\\n.pipeImg-wrapper {\\n  background-color: #212234;\\n  position: absolute;\\n  top: 50%;\\n  margin-top: -290px;\\n  left: 50%;\\n  margin-left: -370px; }\\n  .pipeImg-wrapper .ob-icon {\\n    font-size: 12px;\\n    margin-right: 4px; }\\n  .pipeImg-wrapper .menu {\\n    font-size: 0; }\\n    .pipeImg-wrapper .menu .item {\\n      position: relative;\\n      display: inline-block;\\n      border-right: 1px solid #48495d;\\n      box-sizing: border-box; }\\n      .pipeImg-wrapper .menu .item:hover, .pipeImg-wrapper .menu .item.active {\\n        border-bottom: 1px solid #8ac3d4; }\\n      .pipeImg-wrapper .menu .item:hover .item-sub {\\n        display: block; }\\n      .pipeImg-wrapper .menu .item .item-sub {\\n        display: none;\\n        position: absolute;\\n        left: 0;\\n        top: 41px;\\n        width: 150px;\\n        z-index: 3;\\n        border-right: none;\\n        background-color: #393a4c; }\\n  .pipeImg-wrapper .btn {\\n    display: block;\\n    padding: 0 20px;\\n    line-height: 40px;\\n    color: #999ba7;\\n    font-size: 12px; }\\n    .pipeImg-wrapper .btn:hover {\\n      color: #fff; }\\n    .pipeImg-wrapper .btn.btn-close {\\n      position: absolute;\\n      right: 0;\\n      top: 0;\\n      border-left: 1px solid #48495d; }\\n  .pipeImg-wrapper .buttons {\\n    position: absolute;\\n    right: 10px;\\n    top: 7px;\\n    font-size: 0; }\\n    .pipeImg-wrapper .buttons .button {\\n      display: inline-block;\\n      padding: 0 15px;\\n      line-height: 26px;\\n      color: #e1e5ee;\\n      font-size: 12px;\\n      background-color: #4b5668;\\n      border-radius: 4px; }\\n      .pipeImg-wrapper .buttons .button:hover {\\n        color: #fff; }\\n      .pipeImg-wrapper .buttons .button.button-main {\\n        background-color: #41b64b;\\n        margin-right: 10px; }\\n      .pipeImg-wrapper .buttons .button.button-confirm {\\n        background-color: #d86562;\\n        margin-right: 10px; }\\n  .pipeImg-wrapper .pipe-header {\\n    position: relative;\\n    background-color: #393a4c; }\\n  .pipeImg-wrapper .pipe-content {\\n    overflow: hidden; }\\n    .pipeImg-wrapper .pipe-content .panel {\\n      display: none; }\\n      .pipeImg-wrapper .pipe-content .panel.active {\\n        display: block; }\\n      .pipeImg-wrapper .pipe-content .panel.panel-mark-all {\\n        position: relative; }\\n        .pipeImg-wrapper .pipe-content .panel.panel-mark-all .img-box {\\n          width: 600px;\\n          padding-right: 120px; }\\n        .pipeImg-wrapper .pipe-content .panel.panel-mark-all .imgs-thumbnail {\\n          position: absolute;\\n          right: 20px;\\n          top: 0; }\\n          .pipeImg-wrapper .pipe-content .panel.panel-mark-all .imgs-thumbnail .img-thumbnail {\\n            display: block;\\n            margin-bottom: 10px;\\n            max-width: 86px;\\n            height: 62px;\\n            opacity: 0.5; }\\n            .pipeImg-wrapper .pipe-content .panel.panel-mark-all .imgs-thumbnail .img-thumbnail.active {\\n              opacity: 1; }\\n            .pipeImg-wrapper .pipe-content .panel.panel-mark-all .imgs-thumbnail .img-thumbnail img {\\n              max-width: 100%;\\n              max-height: 100%; }\\n    .pipeImg-wrapper .pipe-content .img-box {\\n      position: relative;\\n      width: 720px;\\n      height: 420px;\\n      margin: 10px;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center; }\\n      .pipeImg-wrapper .pipe-content .img-box .scale-img-wrapper {\\n        position: absolute;\\n        left: 50%;\\n        top: 50%; }\\n    .pipeImg-wrapper .pipe-content .content-footer {\\n      *zoom: 1;\\n      display: flex;\\n      position: relative;\\n      padding: 10px;\\n      background-color: #212234; }\\n      .pipeImg-wrapper .pipe-content .content-footer:before, .pipeImg-wrapper .pipe-content .content-footer:after {\\n        content: \\\"\\\";\\n        display: table; }\\n      .pipeImg-wrapper .pipe-content .content-footer:after {\\n        clear: both; }\\n      .pipeImg-wrapper .pipe-content .content-footer .size {\\n        display: block;\\n        color: #999ba7;\\n        font-size: 12px;\\n        padding-right: 25px;\\n        line-height: 21px; }\\n      .pipeImg-wrapper .pipe-content .content-footer .btn-rotate {\\n        display: block;\\n        line-height: 21px;\\n        padding: 0 25px;\\n        border-left: 1px solid #48495d; }\\n      .pipeImg-wrapper .pipe-content .content-footer .txt, .pipeImg-wrapper .pipe-content .content-footer .txt-label {\\n        color: #999ba7; }\\n      .pipeImg-wrapper .pipe-content .content-footer .txt {\\n        padding: 0 6px; }\\n      .pipeImg-wrapper .pipe-content .content-footer .txt-label {\\n        display: inline-block;\\n        padding-right: 8px; }\\n      .pipeImg-wrapper .pipe-content .content-footer .item {\\n        display: flex; }\\n      .pipeImg-wrapper .pipe-content .content-footer .color {\\n        display: flex;\\n        width: 20px;\\n        height: 20px;\\n        vertical-align: middle;\\n        background-color: #fff;\\n        box-sizing: border-box;\\n        cursor: pointer;\\n        margin-left: 4px; }\\n        .pipeImg-wrapper .pipe-content .content-footer .color:first-child {\\n          margin-left: 0; }\\n        .pipeImg-wrapper .pipe-content .content-footer .color.color-black {\\n          background-color: #000; }\\n      .pipeImg-wrapper .pipe-content .content-footer input[type=\\\"radio\\\"]:checked + .color {\\n        border: 2px solid #4f8b4d; }\\n      .pipeImg-wrapper .pipe-content .content-footer .position {\\n        display: flex;\\n        width: 20px;\\n        height: 16px;\\n        vertical-align: middle;\\n        box-sizing: border-box;\\n        border: 2px solid #9a9bad;\\n        margin-left: 4px; }\\n        .pipeImg-wrapper .pipe-content .content-footer .position:first-child {\\n          margin-left: 0; }\\n        .pipeImg-wrapper .pipe-content .content-footer .position .line {\\n          display: inline-block;\\n          width: 8px;\\n          border-top: 2px solid #9a9bad; }\\n        .pipeImg-wrapper .pipe-content .content-footer .position.center {\\n          justify-content: center;\\n          align-items: center; }\\n        .pipeImg-wrapper .pipe-content .content-footer .position.left-top {\\n          justify-content: flex-start;\\n          align-items: flex-start; }\\n        .pipeImg-wrapper .pipe-content .content-footer .position.right-top {\\n          justify-content: flex-end;\\n          align-items: flex-start; }\\n        .pipeImg-wrapper .pipe-content .content-footer .position.left-bottom {\\n          justify-content: flex-start;\\n          align-items: flex-end; }\\n        .pipeImg-wrapper .pipe-content .content-footer .position.right-bottom {\\n          justify-content: flex-end;\\n          align-items: flex-end; }\\n      .pipeImg-wrapper .pipe-content .content-footer input[type=\\\"radio\\\"]:checked + .position {\\n        border: 2px solid #4f8b4d; }\\n        .pipeImg-wrapper .pipe-content .content-footer input[type=\\\"radio\\\"]:checked + .position .line {\\n          border-top: 2px solid #4f8b4d; }\\n      .pipeImg-wrapper .pipe-content .content-footer .item {\\n        float: left;\\n        padding: 0 14px;\\n        border-left: 1px solid #48495d; }\\n        .pipeImg-wrapper .pipe-content .content-footer .item:first-child {\\n          padding: 0 14px 0 0;\\n          border-left: none; }\\n      .pipeImg-wrapper .pipe-content .content-footer .scale-range {\\n        margin-top: 8px;\\n        margin-left: 10;\\n        width: 120px; }\\n      .pipeImg-wrapper .pipe-content .content-footer .opacity-range {\\n        margin-top: 8px;\\n        width: 75px; }\\n      .pipeImg-wrapper .pipe-content .content-footer input[type=\\\"range\\\"] {\\n        background-color: #2f4260;\\n        border-radius: 6px;\\n        -webkit-appearance: none;\\n        height: 5px;\\n        border: 1px solid #000; }\\n      .pipeImg-wrapper .pipe-content .content-footer input[type=\\\"range\\\"]::-webkit-slider-thumb {\\n        -webkit-appearance: none;\\n        cursor: default;\\n        height: 12px;\\n        width: 12px;\\n        transform: translateY(0px);\\n        background: none repeat scroll 0 0 #406989;\\n        border-radius: 10px;\\n        box-shadow: 0 -1px 1px black inset; }\\n      .pipeImg-wrapper .pipe-content .content-footer select {\\n        background-color: #507194;\\n        color: #999ba7;\\n        border: 1px solid #000;\\n        border-radius: 3px;\\n        outline: none;\\n        height: 20px;\\n        line-height: 20px;\\n        min-width: 100px;\\n        background-image: none !important;\\n        filter: none !important; }\\n        .pipeImg-wrapper .pipe-content .content-footer select:hover {\\n          background-color: #092646; }\\n      .pipeImg-wrapper .pipe-content .content-footer input[type=\\\"text\\\"] {\\n        width: 46px;\\n        border: 1px solid #333446;\\n        padding: 2px;\\n        background-color: #141527;\\n        color: #999ba7; }\\n      .pipeImg-wrapper .pipe-content .content-footer .fix {\\n        margin: 0 6px;\\n        display: flex;\\n        width: 20px;\\n        height: 20px;\\n        vertical-align: middle;\\n        color: #999ba7;\\n        justify-content: center;\\n        align-items: center; }\\n        .pipeImg-wrapper .pipe-content .content-footer .fix .ob-icon {\\n          margin: 0; }\\n      .pipeImg-wrapper .pipe-content .content-footer input[type=\\\"checkbox\\\"]:checked + .fix {\\n        background-color: #141527; }\\n  .pipeImg-wrapper .pipe-footer {\\n    position: relative;\\n    background-color: #393a4c;\\n    font-size: 0;\\n    padding: 20px 10px; }\\n    .pipeImg-wrapper .pipe-footer .img-thumbnail {\\n      position: relative;\\n      display: inline-block;\\n      margin-right: 10px;\\n      max-width: 60px;\\n      height: 45px;\\n      opacity: 0.5;\\n      text-align: center; }\\n      .pipeImg-wrapper .pipe-footer .img-thumbnail.active {\\n        opacity: 1; }\\n      .pipeImg-wrapper .pipe-footer .img-thumbnail.new .circle {\\n        visibility: visible; }\\n      .pipeImg-wrapper .pipe-footer .img-thumbnail .circle {\\n        visibility: hidden;\\n        position: absolute;\\n        left: -4px;\\n        top: -4px;\\n        display: block;\\n        width: 8px;\\n        height: 8px;\\n        background-color: #48b152;\\n        border-radius: 50%; }\\n      .pipeImg-wrapper .pipe-footer .img-thumbnail img {\\n        max-width: 100%;\\n        max-height: 100%; }\\n    .pipeImg-wrapper .pipe-footer.mark-all-footer {\\n      height: 45px;\\n      padding: 0; }\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./pipeImg.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./pipeImg.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./pipeImg.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import {\n    drag\n} from './util';\nimport {\n    DragBox\n} from './dragBox';\nimport tpl from './dialog.tpl';\n\nclass Dialog {\n\n    constructor(options) {\n\n        // 默认配置参数\n        let defaults = {\n            imgList: [],\n            template: tpl,\n            markTextList: ['producttest.en.made-in-china.com', 'Focus Service Co - Product Sourcing'],\n            \n            closeBtnTxt: '关闭',\n            saveBtnTxt: '保存',\n            resetBtnTxt: '重置',\n            confirmBtnTxt: '确定',\n            cancelBtnTxt: '取消',\n            rotateMenuTxt: '旋转',\n            turnLeftTxt: '逆时针旋转',\n            turnRightTxt: '顺时针旋转',\n            cropMenuTxt: '裁剪',                \n            scaleMenuTxt: '缩放',\n            markMenuTxt: '添加水印',\n            colorTxt: '颜色',\n            positionTxt: '位置',\n            opacityTxt: '透明度',\n            showRoomTxt: '展示厅',\n            companyNameTxt: '公司名称',\n            markAllMenuTxt: '批量添加水印',\n\n            onSaveRotate: (args, cb) => {},\n            onSaveCrop: (args, cb) => {},\n            onSaveScale: (args, cb) => {},\n            onSaveMark: (args, cb) => {},\n            onReset: (cb) => {},\n            onSave: (cb) => {},\n            onChangeActive: (options, cb) => {},\n            onSaveMarkAll: (cb) => {}\n            \n        };\n\n\n        options = Object.assign({}, defaults, options);\n\n        this.imgList = options.imgList;\n        this.template = options.template;\n        this.markTextList = options.markTextList;\n\n        this.closeBtnTxt = options.closeBtnTxt;\n        this.saveBtnTxt = options.saveBtnTxt;\n        this.resetBtnTxt = options.resetBtnTxt;\n        this.confirmBtnTxt = options.confirmBtnTxt;\n        this.cancelBtnTxt = options.cancelBtnTxt;\n        this.rotateMenuTxt = options.rotateMenuTxt;\n        this.turnLeftTxt = options.turnLeftTxt;\n        this.turnRightTxt = options.turnRightTxt;\n        this.cropMenuTxt = options.cropMenuTxt;\n        this.scaleMenuTxt = options.scaleMenuTxt;\n        this.markMenuTxt = options.markMenuTxt;\n        this.colorTxt = options.colorTxt;\n        this.positionTxt = options.positionTxt;\n        this.opacityTxt = options.opacityTxt;\n        this.showRoomTxt = options.showRoomTxt;\n        this.companyNameTxt = options.companyNameTxt;\n        this.markAllMenuTxt = options.markAllMenuTxt;\n\n        this.onSaveRotate = options.onSaveRotate;\n        this.onSaveCrop = options.onSaveCrop;\n        this.onSaveScale = options.onSaveScale;\n        this.onSaveMark = options.onSaveMark;\n        this.onReset = options.onReset;\n        this.onSave = options.onSave;\n        this.onChangeActive = options.onChangeActive;\n        this.onSaveMarkAll = options.onSaveMarkAll;\n\n        this._init();\n\n    }\n\n    _init() {\n        let templateHtml = template(this.template, {\n            imgList: this.imgList,\n\n            closeBtnTxt: this.closeBtnTxt,\n            saveBtnTxt: this.saveBtnTxt,\n            resetBtnTxt: this.resetBtnTxt,\n            confirmBtnTxt: this.confirmBtnTxt,\n            cancelBtnTxt: this.cancelBtnTxt,\n            rotateMenuTxt: this.rotateMenuTxt,\n            turnLeftTxt: this.turnLeftTxt,\n            turnRightTxt: this.turnRightTxt,\n            cropMenuTxt: this.cropMenuTxt,                \n            scaleMenuTxt: this.scaleMenuTxt,\n            markMenuTxt: this.markMenuTxt,\n            colorTxt: this.colorTxt,\n            positionTxt: this.positionTxt,\n            opacityTxt: this.opacityTxt,\n            showRoomTxt: this.showRoomTxt,\n            companyNameTxt: this.companyNameTxt,\n            markAllMenuTxt: this.markAllMenuTxt\n        });\n\n        let html = '<div class=\"pipe-dialog J-pipe-dialog\" onselectstart=\"return false\" ondragstart=\"return false\"><div class=\"pipe-mask J-pipe-mask\"></div>'+ templateHtml +'</div>';\n        $('body').append(html);\n        \n        this.$el = $('.J-pipe-dialog');\n        this.$pipeWrapper = this.$el.find('.J-pipe-wrapper');\n\n        // 通用按钮\n        this.$btnClose = this.$el.find('.J-button-close');\n        this.$btnSave = this.$el.find('.J-button-save');\n        this.$btnReset = this.$el.find('.J-button-reset');\n        this.$btnConfirm = this.$el.find('.J-button-confirm');\n        this.$btnCancel = this.$el.find('.J-button-cancel');\n        this.$btnSaveAll = this.$el.find('.J-button-confirm-all');\n        this.$imgsThumbnail = this.$el.find('.J-imgs-thumbnail');\n        // 菜单导航\n        // this.$menuRotate = this.$el.find('.J-menu-rotate');\n        // this.$menuCrop = this.$el.find('.J-menu-crop');\n        // this.$menuScale = this.$el.find('.J-menu-scale');\n        // this.$menuMark = this.$el.find('.J-menu-mark');\n        // this.$menuMarkAll = this.$el.find('.J-menu-mark-all');\n        // 模块按钮\n        // 旋转\n        this.$btnRotateLeft = this.$el.find('.J-btn-rotate-left');\n        this.$btnRotateRight = this.$el.find('.J-btn-rotate-right');\n        // 裁剪\n        this.$inputCropWidth = this.$el.find('.J-input-crop-width');\n        this.$inputCropHeight = this.$el.find('.J-input-crop-height');\n        this.$radioCropFix = this.$el.find('.J-radio-crop-fix');\n        // 缩放\n        this.$inputScaleWidth = this.$el.find('.J-input-scale-width');\n        this.$inputScaleHeight = this.$el.find('.J-input-scale-height');\n        this.$rangeScaleRatio = this.$el.find('.J-range-scale-ratio');\n        // 添加水印\n        this.$radioMarkColor = this.$el.find('.J-radio-mark-color');\n        this.$radioMarkPosition = this.$el.find('.J-radio-mark-position');\n        this.$rangeMarkOpacity = this.$el.find('.J-range-mark-opacity');\n        this.$selectMarkTxt = this.$el.find('.J-select-mark-txt');\n        // 批量添加水印\n        this.$radioMarkAllColor = this.$el.find('.J-radio-markAll-color');\n        this.$radioMarkAllPosition = this.$el.find('.J-radio-markAll-position');\n        this.$rangeMarkAllOpacity = this.$el.find('.J-range-markAll-opacity');\n        this.$selectMarkAllTxt = this.$el.find('.J-select-markAll-txt');\n\n        // 全局变量\n        this.isChange = false;\n        this.rotateNum = 0;\n        this.scaleRatio = 1;\n\n        this.imgBoxHeight = this.$el.find('.J-img-box').height();\n        this.imgBoxWidth = this.$el.find('.J-img-box').width();\n        this.imgBoxRatio = this.imgBoxWidth / this.imgBoxHeight;\n\n        this.activeImg = this.imgList[0];\n\n        \n\n\n        // 初始化裁剪框\n        this.cropBox = new DragBox({\n            ele: '.J-crop-box .J-source',\n            hasLight: true,\n            onDragPoint: (data) => {\n                this._showSize(data.width * this.activeData.ratio, data.height * this.activeData.ratio);\n                this.isChange = true;\n            }\n        });\n        // 初始化缩放\n        let $scalePanel = this.$el.find('.J-scale-panel');\n        let $scaleImgWrapper = $scalePanel.find('.J-scale-img-wrapper');\n        let imgEl = $scalePanel.find('.J-source').get(0);\n        drag(imgEl, imgEl, $scaleImgWrapper.get(0));\n        // 初始化水印框\n        this.markBox = new DragBox({\n            ele: '.J-mark-box .J-source',\n            fixRatio: false,\n            markText: 'producttest.en.made-in-china.com',\n            onDragComplete: (left, top) => {\n                this.markX = left * this.activeData.ratio;\n                this.markY = top * this.activeData.ratio;\n\n                this.$el.find('.J-mark-panel').find('.J-position').prop('checked', false);\n\n                this.isChange = true;\n            },\n            onDragPoint: (boxData) => {\n                this.$el.find('.J-mark-panel').find('.J-mark-txt').css({\n                    'font-size': parseInt(this.markBox.$dragBox.css('height')) / 1.5\n                })\n                this._updateMark();\n            } \n        });\n        // 初始化批量水印框\n        this.markAllBox = new DragBox({\n            ele: '.J-mark-box-all .J-source',\n            markText: 'producttest.en.made-in-china.com',\n            onDragComplete: (left, top) => {\n                this.markXAll = left * this.activeData.ratio;\n                this.markYAll = top * this.activeData.ratio;\n\n                this.$el.find('.J-mark-all-panel').find('.J-position').prop('checked', false);\n\n                this.isChange = true;\n            },\n            onDragPoint: (boxData) => {\n                this.$el.find('.J-mark-all-panel').find('.J-mark-txt').css({\n                    'font-size': parseInt(this.markAllBox.$dragBox.css('height')) / 1.5\n                })\n                this._updateMarkAll();\n            } \n        });\n\n        this._refresh();\n        this._bind();\n    }\n    _bind() {\n        // 切换编辑图片\n        this.$el.find('.J-footer-normal').on('click', '.J-img-thumbnail', (e) => {\n\n            let $thumbnail = $(e.target).parent();\n            $thumbnail.addClass('active').siblings().removeClass('active');\n\n            this.$el.find('.J-panel').not('.J-mark-all-panel').find('.J-source').attr('src', $thumbnail.find('img').attr('src'));\n            let targetImg = this.$el.find('.J-source:first').get(0);\n\n            // let targetImg = $thumbnail.find('img').get(0);\n\n            this.activeImg = targetImg;\n            this._refresh();\n            this._initPanel();\n\n            let options = {\n                activeImg: targetImg\n            };\n            this.onChangeActive(options, (img) => {\n\n            });\n        })\n        // 批量水印切换编辑图片\n        this.$el.find('.J-mark-all-panel').on('click', '.J-img-thumbnail', (e) => {\n\n            let $thumbnail = $(e.target).parent();\n            $thumbnail.addClass('active').siblings().removeClass('active');\n\n            this.$el.find('.J-mark-all-panel').find('.J-source').attr('src', $thumbnail.find('img').attr('src'));\n            let targetImg = this.$el.find('.J-mark-all-panel').find('.J-source:first').get(0);\n\n            // let targetImg = $thumbnail.find('img').get(0);\n            this.activeImg = targetImg;\n            this._refresh();\n            this._initMarkAll();\n\n            let options = {\n                activeImg: targetImg\n            };\n            this.onChangeActive(options, (img) => {\n\n            });\n        })\n\n        // 菜单切换\n        this.$el.find('.J-menu-btn').on('click', (e) => {\n            let $item = $(e.target).parent();\n            let index = $item.index();\n            let oldActiveIndex = $item.parent().find('.active:first').index();\n            $item.addClass('active').siblings().removeClass('active');\n            this.$el.find('.J-panel').eq(index).addClass('active').siblings().removeClass('active');\n\n            // 若有编辑操作，离开旋转，裁剪，缩放面板进行保存\n            if (this.isChange) {\n                switch (oldActiveIndex) {\n                    case 0:\n                        this._saveRotate();\n                        break;\n                    case 1:\n                        this._saveCrop();\n                        break;\n                    case 2:\n                        this._saveScale();\n                        break;\n                    default:\n                        break;\n                }\n            }\n\n            // 进入裁剪\n            if (index === 1) {\n                this._initCrop();\n            }\n            // 进入缩放\n            if (index === 2) {\n                this._initScale();\n            }\n            // // 进入水印\n            if (index === 3) {\n                this._initMark();\n            }\n\n        })\n        this.$el.find('.J-item').on('click', '.J-menu-btn', (e) => {\n            if (!$(e.target).parent().hasClass('J-item-mark-all')) {\n                this.$el.find('.J-footer-normal').show();\n                this.$el.find('.J-footer-special').hide();\n                this.$el.find('.J-item-mark').show();\n                this.$el.find('.J-item-mark-all').hide();              \n            }\n        })\n        this.$el.find('.J-item').on('click', '.J-menu-btn-sub', (e) => {\n            if ($(e.target).parent().parent().hasClass('J-item-mark')) {\n                let $markPanel = this.$el.find('.J-mark-all-panel');\n                let $activeImg = $markPanel.find('.J-img-thumbnail.active img');\n                this.$el.find('.J-item-mark-all').addClass('active').siblings().removeClass('active');\n                this.$el.find('.J-mark-all-panel').addClass('active').siblings().removeClass('active');\n                this.$el.find('.J-item-mark').hide();\n                this.$el.find('.J-item-mark-all').show();\n                \n                this.$el.find('.J-footer-normal').hide();\n                this.$el.find('.J-footer-special').show();\n\n                $markPanel.find('.J-source').attr('src', $activeImg.attr('src'));\n                this.rotateNum = 0;\n                this.scaleRatio = 1;\n                this.activeImg = $activeImg.get(0);\n                this._refresh();\n                this._initMarkAll();\n\n                this.isChange = false;\n\n            } else {         \n                this.$el.find('.J-item-mark').addClass('active').siblings().removeClass('active');\n                this.$el.find('.J-mark-panel').addClass('active').siblings().removeClass('active');\n                this.$el.find('.J-item-mark').show();\n                this.$el.find('.J-item-mark-all').hide();\n                this._initPanel();\n                this.$el.find('.J-footer-normal').show();\n                this.$el.find('.J-footer-special').hide();               \n\n            }\n        })\n\n        // 旋转++++++++++++++++\n        // 逆时针旋转\n        this.$btnRotateLeft.on('click', () => {\n            this._getRotateNum(-1);\n            this._updateRotate();\n        })\n        // 顺时针旋转\n        this.$btnRotateRight.on('click', () => {\n            this._getRotateNum(1);\n            this._updateRotate();\n        })\n        // 裁剪++++++++++++\n        this.$inputCropWidth.on('input', (e) => {\n            this.cropBox.width = $(e.target).val() / this.activeData.ratio;\n            if (this.cropBox.fixRatio) {\n                this.cropBox.height = this.cropBox.width / this.cropBox.boxData.ratio;\n            }\n            this._updateCrop();\n        })\n        this.$inputCropHeight.on('input', (e) => {\n            this.cropBox.height = $(e.target).val() / this.activeData.ratio;\n            if (this.cropBox.fixRatio) {\n                this.cropBox.width = this.cropBox.height * this.cropBox.boxData.ratio;\n            }\n            this._updateCrop();\n        })\n        this.$radioCropFix.on('change', (e) => {\n            this.cropBox.fixRatio = !this.cropBox.fixRatio;\n        })\n\n        // 缩放++++++++++++++\n        this.$inputScaleWidth.on('input', (e) => {\n            let $this = $(e.target);\n            this.scaleRatio = parseInt($this.val()) / this.activeData.w0;\n            this._updateScale();\n        })\n        this.$inputScaleHeight.on('input', (e) => {\n            let $this = $(e.target);\n            this.scaleRatio = parseInt($this.val()) / this.activeData.h0;\n            this._updateScale();\n        })\n        this.$rangeScaleRatio.on('input', (e) => {\n            let $this = $(e.target);\n            let max = parseInt($this.attr('max'));\n            this.scaleRatio = parseInt($this.val()) / max;\n            this._updateScale();\n        })\n        // 水印++++++++++++++\n        this.$radioMarkColor.on('input', () => {\n            this._updateMark();\n        })\n        this.$rangeMarkOpacity.on('input', () => {\n            this._updateMark();\n        })\n        this.$selectMarkTxt.on('change', () => {\n            this._updateMark();\n        })\n        this.$radioMarkPosition.on('change', () => {\n            this._updateMark();\n        })\n\n        // 批量水印++++++++++++++\n        this.$radioMarkAllColor.on('input', () => {\n            this._updateMarkAll();\n        })\n        this.$rangeMarkAllOpacity.on('input', () => {\n            this._updateMarkAll();\n        })\n        this.$selectMarkAllTxt.on('change', () => {\n            this._updateMarkAll();\n        })\n        this.$radioMarkAllPosition.on('change', () => {\n            this._updateMarkAll();\n        })\n\n\n        // 水印确定\n        this.$btnConfirm.on('click', () => {\n            this._saveMark();\n        })\n        // 水印取消\n        this.$btnCancel.on('click', () => {\n            this._cancelMark();\n        })\n        // 批量水印确定\n        this.$btnSaveAll.on('click', () => {\n            this._saveMarkAll();\n        })\n        // 重置\n        this.$btnReset.on('click', () => {\n            this._reset();\n        })\n        // 保存\n        this.$btnSave.on('click', (e) => {\n            if (this.isChange) {\n                let panelIndex = $(e.target).parents('.J-panel').index();\n                switch (panelIndex) {\n                    case 0:\n                        this._saveRotate();\n                        break;\n                    case 1:\n                        this._saveCrop();\n                        break;\n                    case 2:\n                        this._saveScale();\n                    default:\n                        break;\n                }           \n            }\n            this._save();\n        })\n        // 关闭\n        this.$btnClose.on('click', (e) => {\n            if (this.isChange) {\n                let result = confirm('Leave without saving?');\n                if (result) {\n                    this.destory();\n                }\n            } else {\n                this.destory();\n            }\n            \n        })\n        // 禁用鼠标右击菜单\n        this.$el.on('contextmenu', (e) => {\n            // return false;\n        })\n\n    }\n    _initPanel() {\n\n        this._initCrop();\n        this._initScale();\n        this._initMark();\n        this._goHome();\n    }\n    _goHome() {\n        this.$el.find('.J-menu-btn').parent(':first').addClass('active').siblings().removeClass('active');\n        this.$el.find('.J-panel:first').addClass('active').siblings().removeClass('active');\n    }\n\n    _initRotate() {\n        this.rotateNum = 0;\n    }\n    _updateRotate() {\n        this.$el.find('.J-source').css({\n            'transform': `rotate(${this.rotateNum * 90}deg)`\n        });\n\n        if (this.rotateNum === 1 || this.rotateNum === 3) {\n            // 旋转类90度后\n            if (1 / this.activeData.imgRatio < this.imgBoxRatio) {\n                this.$el.find('.J-source').css({\n                    'width': this.imgBoxHeight,\n                    'height': 'auto'\n                });\n            } else {\n                this.$el.find('.J-source').css({\n                    'width': 'auto',\n                    'height': this.imgBoxWidth\n                });\n            }\n\n        } else {\n            if (this.activeData.imgRatio < this.imgBoxRatio) {\n                this.$el.find('.J-source').css({\n                    'width': 'auto',\n                    'height': this.imgBoxHeight\n                });\n            } else {\n                this.$el.find('.J-source').css({\n                    'width': this.imgBoxWidth,\n                    'height': 'auto'\n                });\n            }\n        }\n\n        this.isChange = true;\n    }\n    _saveRotate() {\n        let options = {\n            rotateNum: this.rotateNum\n        };\n        this.onSaveRotate(options, (img) => {\n            this.rotateNum = 0;\n            this.activeImg = img;\n            this._refresh();\n\n            this.isChange = false;\n        });\n    }\n    _initCrop() {\n        let $cropPanel = this.$el.find('.J-crop-panel');\n\n        this.cropBox.isFixed = $cropPanel.find('.J-fix-ratio').prop('checked');\n        this.cropBox.width = $cropPanel.find('.J-num-width').val() / this.activeData.ratio;\n        this.cropBox.height = $cropPanel.find('.J-num-height').val() / this.activeData.ratio;\n    }\n    _updateCrop() {\n        this.cropBox.update();\n        this.isChange = true;\n    }\n    _saveCrop() {\n        let options = {\n            sx: this.cropBox.boxData.left * this.activeData.ratio,\n            sy: this.cropBox.boxData.top * this.activeData.ratio,\n            cropW: this.cropBox.boxData.width * this.activeData.ratio,\n            cropH: this.cropBox.boxData.height * this.activeData.ratio\n        };\n        this.onSaveCrop(options, (img) => {\n            this.sx = 0;\n            this.sy = 0;\n            this.cropW = img.width;\n            this.cropH = img.height;     \n\n            this.activeImg = img;\n            this._refresh();\n\n            this.isChange = false;\n        })\n    }\n    _initScale() {\n        let $scalePanel = this.$el.find('.J-scale-panel');\n        let $scaleImgBox = $scalePanel.find('.J-img-box');\n        let $scaleRange = $scalePanel.find('.J-scale-range');\n        let $scaleImgWrapper = $scalePanel.find('.J-scale-img-wrapper');\n\n        let $img = $scaleImgBox.find('.J-source');\n\n        let width = this.activeData.w0 + (this.activeData.w0 - this.imgBoxWidth);\n        let height = this.activeData.h0 + (this.activeData.h0 - this.imgBoxHeight);\n        $scaleImgWrapper.css({\n            'width': width,\n            'height': height,\n            'margin-left': -width / 2,\n            'margin-top': -height / 2\n        });\n        // 去除预览图的缩放显示\n        $img.css({\n            'position': 'absolute',\n            'left': (width - this.activeData.w0) / 2,\n            'top': (height - this.activeData.h0) / 2,\n            'width': this.activeData.w0,\n            'height': this.activeData.h0,\n            'max-width': 'none',\n            'max-height': 'none',\n            'cursor': 'move'\n        })\n        // 初始化滑块值\n        $scaleRange.val($scaleRange.attr('max'));\n\n        this.scaleRatio = 1;\n    }\n    _updateScale() {\n        let scaleRatio = this.scaleRatio;\n\n        let $scalePanel = this.$el.find('.J-scale-panel');\n        let $scaleRange = $scalePanel.find('.J-scale-range');\n        let $scaleNumWidth = $scalePanel.find('.J-num-width');\n        let $scaleNumHeight = $scalePanel.find('.J-num-height');\n        let max = parseInt($scaleRange.attr('max'));\n\n        if ($scaleNumWidth.val() != this.activeData.w0 * scaleRatio) {\n            $scaleNumWidth.val(this.activeData.w0 * scaleRatio);\n        }\n        if ($scaleNumHeight.val() != this.activeData.h0 * scaleRatio) {\n            $scaleNumHeight.val(this.activeData.h0 * scaleRatio);\n        }\n        if ($scaleRange.val() != max * scaleRatio) {\n            $scaleRange.val(max * scaleRatio);\n        }\n\n        $('.J-source').css({\n            'transform': `scale(${this.scaleRatio})`\n        });\n\n        this.isChange = true;\n    }\n    _saveScale() {\n        let options = {\n            scaleRatio: this.scaleRatio,\n        };\n        this.onSaveScale(options, (img) => {\n            this.scaleRatio = 1;\n            this.activeImg = img;\n            this._refresh();\n\n            this.isChange = false;\n        })\n\n    }\n    _setMarkPosition(type) {\n        const POSITION = ['center', 'upLeft', 'upRight', 'downLeft', 'downRight'];\n\n        let $markPanel, $dragBox, markX, markY;\n        if (type === 'all') {\n            $markPanel = this.$el.find('.J-mark-all-panel');\n            $dragBox = this.markAllBox.$dragBox;\n            markX = this.markXAll;\n            markY = this.markYAll;\n        } else {\n            $markPanel = this.$el.find('.J-mark-panel');         \n            $dragBox = this.markBox.$dragBox;   \n            markX = this.markX;\n            markY = this.markY;\n        }\n\n        let positionVal = $markPanel.find('.J-position:checked').val();\n        \n        let dragBoxWrapperWidth = this.activeData.w1;\n        let dragBoxWrapperHeight = this.activeData.h1;\n        let dragBoxWidth = $dragBox.find('.J-mark-txt').outerWidth();\n        let dragBoxHeight = $dragBox.find('.J-mark-txt').outerHeight();\n\n        switch (POSITION[positionVal]) {\n            case 'center':\n                markX = (dragBoxWrapperWidth - dragBoxWidth) / 2 * this.activeData.ratio;\n                markY = (dragBoxWrapperHeight - dragBoxHeight) / 2 * this.activeData.ratio;\n                break;\n            case 'upLeft':\n                markX = 0;\n                markY = 0;\n                break;\n            case 'upRight':\n                markX = (dragBoxWrapperWidth - dragBoxWidth) * this.activeData.ratio;\n                markY = 0;\n                break;\n            case 'downLeft':\n                markX = 0;\n                markY = (dragBoxWrapperHeight - dragBoxHeight) * this.activeData.ratio;\n                break;\n            case 'downRight':\n                markX = (dragBoxWrapperWidth - dragBoxWidth) * this.activeData.ratio;\n                markY = (dragBoxWrapperHeight - dragBoxHeight) * this.activeData.ratio;\n                break;\n            default:\n                break;\n        }\n\n        $dragBox.css({\n            'left': markX / this.activeData.ratio,\n            'top': markY / this.activeData.ratio,\n            'width': dragBoxWidth,\n            'height': dragBoxHeight\n        })\n\n        if (type === 'all') {\n            this.markXAll = markX;\n            this.markYAll = markY;         \n        } else {\n            this.markX = markX;\n            this.markY = markY;\n        }\n    }\n    _setMarkStyle(type) {\n        let $markPanel;\n        if (type === 'all') {\n            $markPanel = this.$el.find('.J-mark-all-panel');\n        } else {\n            $markPanel = this.$el.find('.J-mark-panel');            \n        }\n        let $markTxt = $markPanel.find('.J-mark-txt');\n        let colorVal = $markPanel.find('.J-color:checked').val();\n        let opacityVal = $markPanel.find('.J-opacity').val();\n        let txtVal = $markPanel.find('.J-markTxt:selected').val();   \n\n        let color = `rgba(255, 255, 255, ${opacityVal})`;\n        if (colorVal === '1') {\n            color = `rgba(0, 0, 0, ${opacityVal})`;\n        }\n        let text = this.markTextList[txtVal];\n\n        $markTxt.text(text).css({\n            'color': color\n        });\n        if (type === 'all') {\n            this.markStyleAll = color;\n            this.markTextAll = text;            \n        } else {\n            this.markStyle = color;\n            this.markText = text;\n        }\n        \n    }\n    _initMark() {\n        let $markPanel = this.$el.find('.J-mark-panel');\n        let $markTxt = $markPanel.find('.J-mark-txt');\n\n        let font = parseInt($markTxt.css('font-size')) + 'px microsoft yahei';\n        this.markFont = font;\n\n        $markPanel.find('.J-color:last').prop('checked', true);\n        $markPanel.find('.J-position:first').prop('checked', true);\n        $markPanel.find('.J-opacity').val($markPanel.find('.J-opacity').attr('defaultValue'));\n        $markPanel.find('.J-markTxt:first').prop('selected', true);\n\n        this._setMarkStyle();\n        this._setMarkPosition();\n    }\n    _updateMark() {\n        this._setMarkStyle();\n        this._setMarkPosition();\n\n        this.isChange = true;\n    }\n    _saveMark() {\n        let options = {\n            markX: this.markX,\n            markY: this.markY,\n            markText: this.markText,\n            markFont: this.markFont,\n            markStyle: this.markStyle\n        };\n        \n        this.onSaveMark(options, (img) => {\n            this.activeImg = img;\n            this._refresh();\n            this._goHome();\n\n            this.isChange = false;\n        })  \n    }\n    _cancelMark() {\n        this._goHome();\n    }\n    _initMarkAll() {\n        let $markPanel = this.$el.find('.J-mark-all-panel');\n        let $markTxt = $markPanel.find('.J-mark-txt');\n\n        let font = parseInt($markTxt.css('font-size')) + 'px microsoft yahei';\n        this.markFontAll = font;\n\n        $markPanel.find('.J-color:last').prop('checked', true);\n        $markPanel.find('.J-position:first').prop('checked', true);\n        $markPanel.find('.J-opacity').val($markPanel.find('.J-opacity').attr('defaultValue'));\n        $markPanel.find('.J-select-markAll-txt:first').prop('selected', true);\n\n        this._setMarkStyle('all');\n        this._setMarkPosition('all');\n    }\n    _updateMarkAll() {\n        this._setMarkStyle('all');\n        this._setMarkPosition('all');\n\n        this.isChange = true;\n    }\n    _showSize(w0, h0) {\n        w0 = Math.round(w0);\n        h0 = Math.round(h0);\n        // 显示活动图片原始宽高\n        let $numWidth = this.$el.find('.J-num-width');\n        let $numHeight = this.$el.find('.J-num-height');\n        $numWidth.each((index, element) => {\n            if ($(element).get(0).nodeName.toLowerCase() === 'input') {\n                $numWidth.val(w0);\n            } else {\n                $numWidth.html(w0);\n            }\n        })\n        $numHeight.each((index, element) => {\n            if ($(element).get(0).nodeName.toLowerCase() === 'input') {\n                $numHeight.val(h0);\n            } else {\n                $numHeight.html(h0);\n            }\n        })\n    }\n    _refresh() {\n\n        this._updateActiveData();\n        let src = '';\n        if (this.activeData.img.nodeName.toLowerCase() === 'img') {\n            src = this.activeData.img.src;\n        } else {\n            src = this.activeData.img.toDataURL(this.mime, 1.0);\n        }\n\n        if (this.$el.find('.J-img-box').find('.J-source').length > 0) {\n            this.$el.find('.J-img-box').find('.J-source').attr('src', src);\n        } else {\n            this.$el.find('.J-img-box').append(`<img class=\"J-source\" src=\"${src}\">`);\n        }\n\n        this.$el.find('.J-source').removeAttr('style');\n        this.cropBox && (this.cropBox.boxEl.style = '');\n\n        this.$el.find('.J-img-box').find('.J-source').css({\n            width: this.activeData.w1,\n            height: this.activeData.h1\n        })\n\n        this._showSize(this.activeData.w0, this.activeData.h0);\n\n    }\n    // 更新正在编辑图片的数据\n    _updateActiveData() {\n        let targetImg = this.activeImg;\n        let w0 = targetImg.width;\n        let h0 = targetImg.height;\n        if (targetImg.nodeName.toLowerCase() === 'img') {\n            w0 = targetImg.naturalWidth;\n            h0 = targetImg.naturalHeight;\n        }\n\n        let imgRatio = w0 / h0;\n        let h1;\n        let w1;\n        let ratio;\n        if (imgRatio < this.imgBoxRatio) {\n            h1 = this.imgBoxHeight;\n            // w1 = 'auto';\n            w1 = h1 * imgRatio;\n            ratio = h0 / h1;\n        } else {\n            w1 = this.imgBoxWidth;\n            // h1 = 'auto';\n            h1 = w1 / imgRatio;\n            ratio = w0 / w1;\n        }\n\n        this.activeData = {\n            w0: w0,\n            h0: h0,\n            w1: w1,\n            h1: h1,\n            ratio: ratio,\n            imgRatio: imgRatio,\n            img: targetImg\n        }\n    }\n    _getRotateNum(direction) {\n        this.rotateNum += direction;\n        if (this.rotateNum > 3) {\n            this.rotateNum = 0;\n        }\n        if (this.rotateNum < 0) {\n            this.rotateNum = 3;\n        }\n    }\n\n    _reset() {\n        this.onReset((img) => {\n            this.rotateNum = 0;\n            this.scaleRatio = 1;\n            this.activeImg = img;\n            this._refresh();\n\n            this.isChange = false;\n        });  \n    }\n    _save() {\n        this.onSave((data) => {\n\n            let $activeThumb = this.$el.find('.J-footer-normal').find('.J-img-thumbnail.active');\n            $activeThumb.addClass('new').find('img').attr('src', data.src);\n\n            let index = $activeThumb.index();\n            this.$el.find('.J-mark-all-panel').find('.J-img-thumbnail').eq(index).find('img').attr('src', data.src);\n\n            this.isChange = false;\n            this.imgList = this.$el.find('.J-footer-normal').find('.J-img-thumbnail img');\n\n        });  \n    }\n    _saveMarkAll() {\n        let options = {\n            markX: this.markXAll,\n            markY: this.markYAll,\n            markText: this.markTextAll,\n            markFont: this.markFontAll,\n            markStyle: this.markStyleAll\n        };\n        this.onSaveMarkAll(options, (data) => {\n\n            this.destory();\n            this.isChange = false;\n\n        })          \n    }\n \n    destory() {\n        this.$el.remove();\n    }\n    showDialog() {\n        this.$el.show();\n    }\n    hideDialog() {\n        this.$el.hide();\n    }\n\n}\n\nexport {Dialog}\n","module.exports = \"<div class=\\\"pipeImg-wrapper J-pipe-wrapper\\\">\\r\\n    <div class=\\\"pipe-header\\\">\\r\\n        <ul class=\\\"menu\\\">\\r\\n            <li class=\\\"item J-item active\\\"><a class=\\\"btn J-menu-btn\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-refresh\\\"></i>{{=rotateMenuTxt}}</a></li>\\r\\n            <li class=\\\"item J-item\\\"><a class=\\\"btn J-menu-btn\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-crop\\\"></i>{{=cropMenuTxt}}</a></li>\\r\\n            <li class=\\\"item J-item\\\"><a class=\\\"btn J-menu-btn\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-scaling\\\"></i>{{=scaleMenuTxt}}</a></li>\\r\\n            <li class=\\\"item J-item J-item-mark\\\">\\r\\n                <a class=\\\"btn J-menu-btn\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-add-l\\\"></i>{{=markMenuTxt}}</a>\\r\\n                <div class=\\\"item item-sub\\\">\\r\\n                    <a class=\\\"btn J-menu-btn-sub\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-batch\\\"></i>{{=markAllMenuTxt}}</a>\\r\\n                </div>\\r\\n            </li>\\r\\n            <li class=\\\"item J-item J-item-mark-all\\\" style=\\\"display:none;\\\">\\r\\n                <a class=\\\"btn J-menu-btn\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-batch\\\"></i>{{=markAllMenuTxt}}</a>\\r\\n                <div class=\\\"item item-sub\\\">\\r\\n                    <a class=\\\"btn J-menu-btn-sub\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-add-l\\\"></i>{{=markMenuTxt}}</a>\\r\\n                </div>\\r\\n            </li>\\r\\n        </ul>\\r\\n        <a class=\\\"btn btn-close J-button-close\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-delete\\\"></i>{{=closeBtnTxt}}</a>\\r\\n    </div>\\r\\n    <div class=\\\"pipe-content\\\">\\r\\n        <!-- 旋转面板 -->\\r\\n        <div class=\\\"panel active J-panel J-rotate-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box\\\">\\r\\n                <img class=\\\"J-source\\\" src=\\\"{{-imgList[0].src}}\\\">\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <div class=\\\"size\\\">\\r\\n                    <span class=\\\"J-num-width\\\"></span>*<span class=\\\"J-num-height\\\"></span>px\\r\\n                </div>\\r\\n                <a class=\\\"btn btn-rotate J-btn-rotate-left\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-rotate-l\\\"></i>{{=turnLeftTxt}}</a>\\r\\n                <a class=\\\"btn btn-rotate J-btn-rotate-right\\\" href=\\\"javascript:void(0)\\\"><i class=\\\"ob-icon icon-rotate-r\\\"></i>{{=turnRightTxt}}</a>\\r\\n\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-main J-button-save\\\" href=\\\"javascript:void(0)\\\">{{=saveBtnTxt}}</a>\\r\\n                    <a class=\\\"button button-reset J-button-reset\\\" href=\\\"javascript:void(0)\\\">{{=resetBtnTxt}}</a>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <!-- 裁剪面板 -->\\r\\n        <div class=\\\"panel J-panel J-crop-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box J-crop-box\\\">\\r\\n                <img class=\\\"J-source\\\" src=\\\"{{-imgList[0].src}}\\\">\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <input class=\\\"num-width J-num-width J-input-crop-width\\\" type=\\\"text\\\">\\r\\n                <input class=\\\"J-fix-ratio J-radio-crop-fix\\\" id=\\\"fixRatio\\\" type=\\\"checkbox\\\" name=\\\"fixRatio\\\" hidden>\\r\\n                <label class=\\\"fix\\\" for=\\\"fixRatio\\\"><i class=\\\"ob-icon icon-lock\\\"></i></label>\\r\\n                <input class=\\\"num-height J-num-height J-input-crop-height\\\" type=\\\"text\\\">\\r\\n                <span class=\\\"txt\\\">px</span>\\r\\n\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-main J-button-save\\\" href=\\\"javascript:void(0)\\\">{{=saveBtnTxt}}</a>\\r\\n                    <a class=\\\"button button-reset J-button-reset\\\" href=\\\"javascript:void(0)\\\">{{=resetBtnTxt}}</a>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <!-- 缩放面板 -->\\r\\n        <div class=\\\"panel J-panel J-scale-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box\\\">\\r\\n                <div class=\\\"scale-img-wrapper J-scale-img-wrapper\\\">\\r\\n                    <img class=\\\"J-source\\\" src=\\\"{{-imgList[0].src}}\\\">\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <input class=\\\"num-width J-num-width J-input-scale-width\\\" type=\\\"text\\\">\\r\\n                <span class=\\\"txt\\\">X</span>\\r\\n                <input class=\\\"num-height J-num-height J-input-scale-width\\\" type=\\\"text\\\">\\r\\n                <span class=\\\"txt\\\">px</span>\\r\\n                <input class=\\\"scale-range J-scale-range J-range-scale-ratio\\\" type=\\\"range\\\" name=\\\"scaleRatio\\\" min=\\\"5\\\" max=\\\"100\\\" step=\\\"1\\\" defaultValue=\\\"100\\\">\\r\\n\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-main J-button-save\\\" href=\\\"javascript:void(0)\\\">{{=saveBtnTxt}}</a>\\r\\n                    <a class=\\\"button button-reset J-button-reset\\\" href=\\\"javascript:void(0)\\\">{{=resetBtnTxt}}</a>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <!-- 添加水印面板 -->\\r\\n        <div class=\\\"panel J-panel J-mark-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box J-mark-box\\\">\\r\\n                <img class=\\\"J-source\\\" src=\\\"{{-imgList[0].src}}\\\">\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=colorTxt}}:</div> \\r\\n                    <input class=\\\"J-color J-radio-mark-color\\\" id=\\\"colorWhite\\\" type=\\\"radio\\\" name=\\\"color\\\" value=\\\"0\\\" autocomplete=\\\"off\\\" hidden>        \\r\\n                    <label class=\\\"color\\\" for=\\\"colorWhite\\\"></label>\\r\\n                    <input class=\\\"J-color J-radio-mark-color\\\" id=\\\"colorBlack\\\" type=\\\"radio\\\" name=\\\"color\\\" value=\\\"1\\\" checked autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"color color-black\\\" for=\\\"colorBlack\\\"></label>\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=positionTxt}}:</div>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionCenter\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"0\\\" autocomplete=\\\"off\\\" checked hidden>\\r\\n                    <label class=\\\"position center\\\" for=\\\"positionCenter\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionLeftTop\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"1\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position left-top\\\" for=\\\"positionLeftTop\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionRightTop\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"2\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position right-top\\\" for=\\\"positionRightTop\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionLeftBottom\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"3\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position left-bottom\\\" for=\\\"positionLeftBottom\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionRightBottom\\\" type=\\\"radio\\\" name=\\\"position\\\" value=\\\"4\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position right-bottom\\\" for=\\\"positionRightBottom\\\"><span class=\\\"line\\\"></span></label>\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=opacityTxt}}:</div>\\r\\n                    <input class=\\\"opacity-range J-opacity J-range-mark-opacity\\\" name=\\\"opacity\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"1\\\" step=\\\"0.1\\\" defaultValue=\\\"0.8\\\">\\r\\n                </div>\\r\\n\\r\\n                <select class=\\\"J-markTxt J-select-mark-txt\\\" name=\\\"markTxt\\\">\\r\\n                    <option value=\\\"0\\\" selected=\\\"selected\\\">{{=showRoomTxt}}</option>\\r\\n                    <option value=\\\"1\\\">{{=companyNameTxt}}</option>\\r\\n                </select>\\r\\n\\r\\n                <div class=\\\"buttons\\\">\\r\\n                    <a class=\\\"button button-confirm J-button-confirm\\\" href=\\\"javascript:void(0)\\\">{{=confirmBtnTxt}}</a>\\r\\n                    <a class=\\\"button button-cancel J-button-cancel\\\" href=\\\"javascript:void(0)\\\">{{=cancelBtnTxt}}</a>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n        <!-- 批量添加水印 -->\\r\\n        <div class=\\\"panel panel-mark-all J-panel J-mark-all-panel\\\">\\r\\n            <div class=\\\"img-box J-img-box J-mark-box-all\\\">\\r\\n                <img class=\\\"J-source\\\" src=\\\"{{-imgList[0].src}}\\\">\\r\\n            </div>\\r\\n            <div class=\\\"imgs-thumbnail\\\">\\r\\n                {{ for(var i=0;i<imgList.length;i++) { }} \\r\\n                <a class=\\\"img-thumbnail {{=i === 0 ? 'active' : ''}} J-img-thumbnail\\\" href=\\\"javascript:void(0)\\\">\\r\\n                    <img src=\\\"{{-imgList[i].src}}\\\">\\r\\n                    <span class=\\\"circle\\\"></span>\\r\\n                </a>\\r\\n                {{ } }}\\r\\n            </div>\\r\\n            <div class=\\\"content-footer\\\">\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=colorTxt}}:</div> \\r\\n                    <input class=\\\"J-color J-radio-mark-color\\\" id=\\\"colorWhiteAll\\\" type=\\\"radio\\\" name=\\\"colorAll\\\" value=\\\"0\\\" autocomplete=\\\"off\\\" hidden>        \\r\\n                    <label class=\\\"color\\\" for=\\\"colorWhiteAll\\\"></label>\\r\\n                    <input class=\\\"J-color J-radio-mark-color\\\" id=\\\"colorBlackAll\\\" type=\\\"radio\\\" name=\\\"colorAll\\\" value=\\\"1\\\" checked autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"color color-black\\\" for=\\\"colorBlackAll\\\"></label>\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=positionTxt}}:</div>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionCenterAll\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"0\\\" autocomplete=\\\"off\\\" checked hidden>\\r\\n                    <label class=\\\"position center\\\" for=\\\"positionCenterAll\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionLeftTopAll\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"1\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position left-top\\\" for=\\\"positionLeftTopAll\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionRightTopAll\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"2\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position right-top\\\" for=\\\"positionRightTopAll\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionLeftBottomAll\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"3\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position left-bottom\\\" for=\\\"positionLeftBottomAll\\\"><span class=\\\"line\\\"></span></label>\\r\\n                    <input class=\\\"J-position J-radio-mark-position\\\" id=\\\"positionRightBottomAll\\\" type=\\\"radio\\\" name=\\\"positionAll\\\" value=\\\"4\\\" autocomplete=\\\"off\\\" hidden>\\r\\n                    <label class=\\\"position right-bottom\\\" for=\\\"positionRightBottomAll\\\"><span class=\\\"line\\\"></span></label>\\r\\n                </div>\\r\\n                <div class=\\\"item\\\">\\r\\n                    <div class=\\\"txt-label\\\">{{=opacityTxt}}:</div>\\r\\n                    <input class=\\\"opacity-range J-opacity J-range-markAll-opacity\\\" name=\\\"opacityAll\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"1\\\" step=\\\"0.1\\\" defaultValue=\\\"0.8\\\">\\r\\n                </div>\\r\\n\\r\\n                <select class=\\\"J-markTxt J-select-markAll-txt\\\" name=\\\"markTxtAll\\\">\\r\\n                    <option value=\\\"0\\\" selected=\\\"selected\\\">{{=showRoomTxt}}</option>\\r\\n                    <option value=\\\"1\\\">{{=companyNameTxt}}</option>\\r\\n                </select>\\r\\n                \\r\\n            </div>\\r\\n\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"pipe-footer J-imgs-thumbnail J-footer-normal\\\">\\r\\n        {{ for(var i=0;i<imgList.length;i++) { }} <a class=\\\"img-thumbnail {{=i === 0 ? 'active' : ''}} J-img-thumbnail\\\"\\r\\n            href=\\\"javascript:void(0)\\\">\\r\\n            <img src=\\\"{{-imgList[i].src}}\\\">\\r\\n            <span class=\\\"circle\\\"></span>\\r\\n            </a>\\r\\n            {{ } }}\\r\\n    </div>\\r\\n    <div class=\\\"pipe-footer mark-all-footer J-footer-special\\\" style=\\\"display:none;\\\">\\r\\n        <div class=\\\"buttons\\\">\\r\\n            <a class=\\\"button button-confirm J-button-confirm-all\\\" href=\\\"javascript:void(0)\\\">{{=saveBtnTxt}}</a>\\r\\n            <a class=\\\"button button-cancel J-button-cancel\\\" href=\\\"javascript:void(0)\\\">{{=cancelBtnTxt}}</a>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n</div>\"","import {\n    drag,\n    _$\n} from './util';\nclass DragBox {\n    constructor(options) {\n        // 默认配置参数\n        const defaults = {\n            // 待编辑图片元素\n            ele: '',\n            width: '100%',\n            height: '100%',\n            markText: 'producttest.en.made-in-china.com',\n            // 是否有明暗效果，主要是裁剪图片效果\n            hasLight: false,\n            fixRatio: false,\n            // 拖动触点回调函数\n            onDragPoint: (boxData) => {},\n            // 拖动框回调函数\n            onDragComplete: (left, top) => {}\n        };\n\n        options = Object.assign({}, defaults, options);\n        this.ele = options.ele;\n        this.width = options.width;\n        this.height = options.height;\n        this.markText = options.markText;\n        this.hasLight = options.hasLight;\n        this.fixRatio = options.fixRatio;\n        this.onDragPoint = options.onDragPoint;\n        this.onDragComplete = options.onDragComplete;\n\n        this.init();\n    }\n    init() {\n        this.$ele = $(this.ele);\n        let src = this.$ele.attr('src');\n        let $parent = this.$ele.parent();\n\n        let dragBoxHtml = `<div class=\"dragbox-wrapper J-dragbox-wrapper\">\n                                <img class=\"J-source\" src=\"${src}\">\n                                <div class=\"drag-box J-drag-box\">\n                                    <div class=\"drag-point up-left J-drag-point\"></div>\n                                    <div class=\"drag-point up J-drag-point\"></div>\n                                    <div class=\"drag-point up-right J-drag-point\"></div>\n                                    <div class=\"drag-point right J-drag-point\"></div>\n                                    <div class=\"drag-point right-down J-drag-point\"></div>\n                                    <div class=\"drag-point down J-drag-point\"></div>\n                                    <div class=\"drag-point left-down J-drag-point\"></div>\n                                    <div class=\"drag-point left J-drag-point\"></div>\n                                    <div class=\"mark-txt J-mark-txt\">${this.markText}</div>\n                                </div>\n                            </div>`;\n        if (this.hasLight) {\n            dragBoxHtml = `<div class=\"dragbox-wrapper J-dragbox-wrapper\">\n                                <img class=\"J-source img-dark\" src=\"${src}\">\n                                <img class=\"J-source img-light J-img-light\" src=\"${src}\">\n                                <div class=\"drag-box J-drag-box\">\n                                    <div class=\"drag-point up-left J-drag-point\"></div>\n                                    <div class=\"drag-point up J-drag-point\"></div>\n                                    <div class=\"drag-point up-right J-drag-point\"></div>\n                                    <div class=\"drag-point right J-drag-point\"></div>\n                                    <div class=\"drag-point right-down J-drag-point\"></div>\n                                    <div class=\"drag-point down J-drag-point\"></div>\n                                    <div class=\"drag-point left-down J-drag-point\"></div>\n                                    <div class=\"drag-point left J-drag-point\"></div>\n                                </div>\n                            </div>`;\n        }\n\n        $parent.html(dragBoxHtml);\n        this.$dragBox = $parent.find('.J-drag-box');\n        if (!this.hasLight) {\n            this.$dragBox.css({\n                width: this.$dragBox.find('.J-mark-txt').width(),\n                height: this.$dragBox.find('.J-mark-txt').height()\n            });\n        }\n\n        this.$dragPoint = this.$dragBox.find('.J-drag-point');\n\n\n        this.boxEl = this.$dragBox.get(0);\n        this.containerEl = this.boxEl.parentNode;\n        this.imgLight = $parent.find('.J-img-light:first').get(0);\n\n        this.boxData = {\n            left: this.boxEl.offsetLeft,\n            top: this.boxEl.offsetTop,\n            width: this.boxEl.offsetWidth,\n            height: this.boxEl.offsetHeight,\n            ratio: this.boxEl.offsetWidth / this.boxEl.offsetHeight\n        };\n\n        this._bind();\n\n\n        drag(this.boxEl, this.boxEl, this.boxEl.parentNode, (left, top) => {\n            this._light();\n            this.onDragComplete(left, top);\n        });\n\n\n    }\n    _bind() {\n        let isDraging = false;\n        let contact = \"\"; //表示被按下的触点\n        const DRAGPOINT = ['up-left', 'up', 'up-right', 'right', 'right-down', 'down', 'left-down', 'left'];\n        let dragBoxRatio = this.boxData.width / this.boxData.height;\n        //鼠标按下时\n        this.$dragPoint.on('mousedown', (e) => {\n            e.stopPropagation();\n            isDraging = true;\n            let index = $(e.target).index();\n            contact = DRAGPOINT[index];\n            dragBoxRatio = this.boxData.width / this.boxData.height;\n        })\n\n        $(document).on('mouseup', (e) => {\n            isDraging = false;\n            this.boxData = {\n                left: this.boxEl.offsetLeft,\n                top: this.boxEl.offsetTop,\n                width: this.boxEl.offsetWidth,\n                height: this.boxEl.offsetHeight,\n                ratio: this.boxEl.offsetWidth / this.boxEl.offsetHeight\n            };\n        })\n        $(document).on('mousemove', (e) => {\n            if (isDraging == true) {\n                this._move(e, contact, dragBoxRatio);\n                this._light();\n\n                this.boxData = {\n                    left: this.boxEl.offsetLeft,\n                    top: this.boxEl.offsetTop,\n                    width: this.boxEl.offsetWidth,\n                    height: this.boxEl.offsetHeight,\n                    ratio: this.boxEl.offsetWidth / this.boxEl.offsetHeight\n                };\n\n                this.onDragPoint(this.boxData);\n            }\n        })\n\n    }\n\n    //获取元素相对于屏幕左边及上边的距离，利用offsetLeft\n    _getPosition() {\n        let el = this.boxEl;\n        let left = el.offsetLeft;\n        let top = el.offsetTop;\n        let parent = el.offsetParent;\n        while (parent != null) {\n            left += parent.offsetLeft;\n            top += parent.offsetTop;\n            parent = parent.offsetParent;\n        }\n        return {\n            \"left\": left,\n            \"top\": top\n        };\n    }\n\n    _move(e, contact, dragBoxRatio) {\n\n        let x = e.clientX,\n            y = e.clientY;\n        let oldWidth = this.boxEl.offsetWidth; //选取框变化前的宽度\n        let oldHeight = this.boxEl.offsetHeight; //选取框变化前的高度\n        let position = this._getPosition();\n        let top = position.top;\n        let left = position.left;\n\n\n        let newWidth;\n        let newHeight;\n        let newLeft;\n        let newTop;\n\n        // 约束比例：根据宽度计算高度\n        if (contact.indexOf('left') != -1) {\n            let addWidth = left - x;\n            if (addWidth >= 0 && this.boxEl.offsetLeft <= 0) {\n                return false;\n            }\n\n            newWidth = oldWidth + addWidth;\n            newLeft = this.boxEl.offsetLeft - addWidth;\n        }\n        if (contact.indexOf('right') != -1) {\n            let addWidth = x - left - oldWidth;\n            if (addWidth >= 0 && (this.containerEl.clientWidth - (this.boxEl.offsetLeft + oldWidth + addWidth)) <= 0) {\n                return false;\n            }\n\n            newWidth = oldWidth + addWidth;\n            newLeft = this.boxEl.offsetLeft;\n        }\n        if (contact.indexOf('up') != -1) {\n            let addHeight;\n            if (this.fixRatio) {\n                newHeight = newWidth / dragBoxRatio;\n                addHeight = newHeight - oldHeight;\n            } else {\n                addHeight = top - y;\n                newHeight = oldHeight + addHeight;\n            }\n            newTop = this.boxEl.offsetTop - addHeight;\n\n            if (addHeight >= 0 && this.boxEl.offsetTop <= 0) {\n                return false;\n            }\n        }\n        if (contact.indexOf('down') != -1) {\n            let addHeight;\n            if (this.fixRatio) {\n                newHeight = newWidth / dragBoxRatio;\n                addHeight = newHeight - oldHeight;\n                newTop = this.boxEl.offsetTop;\n            } else {\n                addHeight = y - top - oldHeight;\n                newHeight = oldHeight + addHeight;\n            }\n\n            if (addHeight >= 0 && (this.containerEl.clientHeight - (this.boxEl.offsetTop + oldHeight + addHeight)) <= 0) {\n                return false;\n            }\n\n        }\n\n\n        this.boxEl.style.width = newWidth + 'px';\n        this.boxEl.style.height = newHeight + 'px';\n        this.boxEl.style.left = newLeft + 'px';\n        this.boxEl.style.top = newTop + 'px';\n    }\n\n    _light() {\n        if (this.hasLight) {\n            this._setChoice();\n        }\n    }\n    //设置选取框图片区域明亮显示\n    _setChoice() {\n        var top = this.boxEl.offsetTop;\n        var right = this.boxEl.offsetLeft + this.boxEl.offsetWidth;\n        var bottom = this.boxEl.offsetTop + this.boxEl.offsetHeight;\n        var left = this.boxEl.offsetLeft;\n        this.imgLight.style.clip = \"rect(\" + top + \"px,\" + right + \"px,\" + bottom + \"px,\" + left + \"px)\";\n    }\n\n    update(width, height) {\n        width && (this.width = width);\n        height && (this.height = height);\n        this.$dragBox.css({\n            width: this.width,\n            height: this.height\n        });\n    }\n}\n\nexport {\n    DragBox\n}\n","import {\n    getCanvas,\n} from './util';\n\nclass ImgHandler {\n\n    constructor(options) {\n\n        // 默认配置参数\n        let defaults = {\n            // 源图片元素\n            sourceImg: null,\n\n            rotateNum: 0,\n\n            // 裁剪后图片最大值KB\n            maxSize: 500,\n            cropW: '',\n            cropH: '',\n\n            // 裁剪后的图片类型\n            mime: 'image/jpeg',\n\n            // 水印相关参数，若watermarkImg存在则用图片水印，否则用文字水印。\n            // 是否添加水印\n            hasMark: true,\n            textAlign: 'left',\n            // 水印字体，值同css的font\n            markFont: '16px microsoft yahei',\n            // 水印字样式，可选值：color,gradient,pattern\n            markStyle: '#fff',\n            // 水印字文本\n            markText: 'UED',\n            // 水印字x轴位置\n            markX: 0,\n            // 水印字y轴位置\n            markY: 0\n\n        };\n\n\n        options = Object.assign({}, defaults, options);\n\n        this.sourceImg = options.sourceImg;\n        this.rotateNum = options.rotateNum;\n        this.maxSize = options.maxSize;\n        this.cropW = options.cropW;\n        this.cropH = options.cropH;\n\n        this.mime = options.mime;\n\n        this.hasMark = options.hasMark;\n        this.textAlign = options.textAlign;\n        this.markFont = options.markFont;\n        this.markStyle = options.markStyle;\n        this.markText = options.markText;\n        this.markX = options.markX;\n        this.markY = options.markY;\n\n\n        // 全局变量\n        this.sx = 0;\n        this.sy = 0;\n\n        this.scaleRatio = 0.5;\n        this.quality = 0.2;\n\n        this.results = [];\n\n        this.init();\n\n    }\n\n\n\n\n    init() {\n        let targetImg = this.sourceImg;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        if (targetImg.nodeName.toLowerCase() === 'img') {\n            sourceW0 = targetImg.naturalWidth;\n            sourceH0 = targetImg.naturalHeight;\n            // img装成canvas\n            let canvas = getCanvas(sourceW0, sourceH0);\n            let ctx = canvas.getContext('2d');\n            ctx.drawImage(targetImg, 0, 0);\n            targetImg = canvas;\n        }\n\n        this.result = targetImg;\n        this.results.push(this.result);\n\n    }\n\n    // 重置\n    reset() {\n        this.rotateNum = 0;\n        this.scaleRatio = 1;\n        this.results = this.results.slice(0, 1);\n    }\n    // 回退\n    rollback() {\n        this.results.pop();\n    }\n    // 旋转\n    rotate() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n\n        let rotateDeg = this.rotateNum * 90;\n\n        let max = Math.max(sourceW0, sourceH0);\n        let tempCvs = getCanvas(max, max),\n            tempCtx = tempCvs.getContext('2d');\n\n        tempCtx.translate(max / 2, max / 2);\n        tempCtx.rotate(rotateDeg * Math.PI / 180);\n        tempCtx.translate(-max / 2, -max / 2);\n        tempCtx.drawImage(targetImg, 0, 0);\n\n\n        let w = sourceW0,\n            h = sourceH0,\n            sx = 0,\n            sy = 0;\n        if (this.rotateNum === 1) {\n            w = sourceH0;\n            h = sourceW0;\n            sx = max - w;\n            sy = 0;\n\n        } else if (this.rotateNum === 2) {\n            w = sourceW0;\n            h = sourceH0;\n            sx = max - w;\n            sy = max - h;\n        } else if (this.rotateNum === 3) {\n            w = sourceH0;\n            h = sourceW0;\n            sx = 0;\n            sy = max - h;\n        } else {\n            w = sourceW0;\n            h = sourceH0;\n            sx = 0;\n            sy = 0;\n        }\n\n        let canvas = getCanvas(w, h),\n            context = canvas.getContext('2d');\n\n        context.drawImage(tempCvs, sx, sy, w, h, 0, 0, w, h);\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n\n    // 水印\n    mark() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let canvas = getCanvas(sourceW0, sourceH0);\n        let dContext = canvas.getContext('2d');\n        dContext.drawImage(targetImg, 0, 0);\n        if (this.hasMark) {\n            dContext.textBaseline = \"top\";\n            dContext.textAlign = this.textAlign;\n            dContext.font = this.markFont;\n            dContext.fillStyle = this.markStyle;\n            dContext.fillText(this.markText, this.markX, this.markY);\n\n        }\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n\n    // 裁剪\n    crop() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let canvas = getCanvas(this.cropW, this.cropH);\n        let context = canvas.getContext('2d');\n        context.drawImage(targetImg, this.sx, this.sy, this.cropW, this.cropH, 0, 0, this.cropW, this.cropH);\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n    // 缩放\n    scale() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let resultW = this.scaleRatio * sourceW0;\n        let resultH = this.scaleRatio * sourceH0;\n\n        let canvas = getCanvas(resultW, resultH);\n        let context = canvas.getContext('2d');\n        context.drawImage(targetImg, 0, 0, sourceW0, sourceH0, 0, 0, resultW, resultH);\n\n        // this.base64Data = canvas.toDataURL(this.mime);\n        this.result = canvas;\n        this.results.push(canvas);\n        return this;\n    }\n    // 压缩\n    compress() {\n        let targetImg = this.result;\n        let sourceW0 = targetImg.width;\n        let sourceH0 = targetImg.height;\n\n        let canvas = getCanvas(sourceW0, sourceH0);\n        let ctx = canvas.getContext(\"2d\");\n\n        if (this.cropW && this.cropH) {\n            ctx.drawImage(targetImg, 0, 0, this.cropW, this.cropH);\n        } else {\n            ctx.drawImage(targetImg, 0, 0);\n        }\n        this.base64Data = canvas.toDataURL(this.mime, this.quality);\n\n        return this.base64Data;\n    }\n\n}\n\n\nexport {ImgHandler}\n","// 依赖jquery.js，template.js\nimport {\n    compress,\n    base64Data2Blob,\n    blob2FormData,\n    loadImages\n} from './util';\nimport {\n    ImgHandler\n} from './imgHandler';\nimport { Dialog } from './dialog';\n\nimport '../css/pipeImg.scss';\n\nclass PipeImg {\n\n    constructor(options) {\n        // 默认配置参数\n        let defaults = {\n            source: ['./assets/Jellyfish.jpg'],\n            ajaxUrl: '/pic.do?xcase=uploadWs',\n            debug: false,\n            mime: 'image/jpeg',\n            maxSize: 500,    \n            onComplete: (response) => {}\n        };\n\n        options = Object.assign({}, defaults, options);\n        this.source = options.source;\n        this.ajaxUrl = options.ajaxUrl;\n\n        this.debug = options.debug;\n        this.mime = options.mime;\n        this.maxSize = options.maxSize;\n        \n        this.onComplete = options.onComplete;\n\n        this.resultList = [];\n        this.sourceImgList = [];\n\n        this._init();\n\n    }\n\n    _init() {\n        loadImages(this.source, (images) => {\n            this.sourceImgList = images;\n\n            this.imgHandler = new ImgHandler({\n                sourceImg: images[0]\n            });\n            this.resultList.push(this.imgHandler.result);\n\n            this.dialog = new Dialog({\n                imgList: images,\n                onSaveRotate: (options, cb) => {\n                    this._saveRotate(options, cb);\n                },\n                onSaveCrop: (options, cb) => {\n                    this._saveCrop(options, cb);\n                },\n                onSaveScale: (options, cb) => {\n                    this._saveScale(options, cb);\n                },\n                onSaveMark: (options, cb) => {\n                    this._saveMark(options, cb);\n                },\n                onReset: (cb) => {\n                    this._reset(cb);\n                },\n                onSave: (cb) => {\n                    this._save(cb);\n                },\n                onChangeActive: (options, cb) => {\n                    this._changeActive(options, cb);\n                },\n                onSaveMarkAll: (options, cb) => {\n                    this._saveMarkAll(options, cb);\n                }\n            })\n\n        })\n\n    }\n\n    _saveRotate(options, cb) {\n        this.imgHandler.rotateNum = options.rotateNum;\n        this.imgHandler.rotate();\n        this.resultList.push(this.imgHandler.result);\n        cb(this.imgHandler.result);\n    }\n    _saveCrop(options, cb) {\n        this.imgHandler.cropW = options.cropW;\n        this.imgHandler.cropH = options.cropH;\n        this.imgHandler.sx = options.sx;\n        this.imgHandler.sy = options.sy;\n        this.imgHandler.crop();\n        this.resultList.push(this.imgHandler.result);\n        cb(this.imgHandler.result);\n    }\n    _saveScale(options, cb) {\n        this.imgHandler.scaleRatio = options.scaleRatio;\n        this.imgHandler.scale();\n        this.resultList.push(this.imgHandler.result);\n        cb(this.imgHandler.result);\n    }\n    _saveMark(options, cb) {\n        this.imgHandler.markX = options.markX;\n        this.imgHandler.markY = options.markY;\n        this.imgHandler.markText = options.markText;\n        this.imgHandler.markFont = options.markFont;\n        this.imgHandler.markStyle = options.markStyle;\n        this.imgHandler.mark();\n        this.resultList.push(this.imgHandler.result);\n        cb(this.imgHandler.result);\n    }\n    _reset(cb) {\n        this.rotateNum = 0;\n        this.scaleRatio = 1;\n\n        this.resultList = this.resultList.slice(0, 1);\n        this.imgHandler = new ImgHandler({\n            sourceImg: this.resultList[0]\n        })\n        cb(this.resultList[0]);\n    }\n    _save(cb) {\n        let max = this.maxSize * 1024;\n        let base64Data = compress(this.resultList[this.resultList.length - 1], max, false);\n\n        if (this.debug) {\n            // 模拟返回\n            let data = {src: base64Data};\n\n            let img = new Image();\n            img.src = data.src;\n            this.resultList = [img];\n            cb(data);\n            this.onComplete(data);\n        } else {\n            let blob = base64Data2Blob(base64Data, this.mime);\n            let formData = blob2FormData(blob);\n            $.ajax({\n                url: this.ajaxUrl,\n                type: \"POST\",\n                data: formData,\n                processData: false, // 不处理数据\n                contentType: false, // 不设置内容类型\n                success: (response) => {\n                    let img = new Image();\n                    img.src = response.src;\n                    this.resultList = [img];\n                    cb(response);\n                    this.onComplete(response);\n                },\n                error: () => {\n                    alert('后台错误');\n                }\n            });            \n        }\n\n    }\n    _saveMarkAll(options, cb) {\n        \n        let xPercent = options.markX / this.resultList[this.resultList.length - 1].width;\n        let yPercent = options.markY / this.resultList[this.resultList.length - 1].height;\n        $(this.sourceImgList).each((index, element) => {\n            let imgHandler = new ImgHandler({\n                sourceImg: element\n            });\n            imgHandler.markX = element.width * xPercent;\n            imgHandler.markY = element.height * yPercent;\n\n            imgHandler.markText = options.markText;\n            imgHandler.markFont = options.markFont;\n            imgHandler.markStyle = options.markStyle;\n\n            imgHandler.mark();\n            this.resultList.push(imgHandler.result);\n\n            this._save(cb);\n        })\n        \n    }\n    _changeActive(options, cb) {\n        this.imgHandler = new ImgHandler({\n            sourceImg: options.activeImg\n        })\n        this.resultList = [this.imgHandler.result];\n        cb(this.imgHandler.result);\n    }\n\n\n}\n\n\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = PipeImg;\n} else if (typeof define === \"function\" && define.amd) {\n    define(function () {\n        return PipeImg;\n    });\n} else {\n    window.PipeImg = PipeImg;\n}\n","//拖拽\nfunction drag(moveElement, dragBar = document, container, cb) {\n    if (!moveElement) return;\n\n    var draging = false,\n        x0, y0, mLeft0, mTop0, mLeft1, mTop1;\n\n    var mousedownHandler = (e) => {\n        e = e || window.event;\n        x0 = e.clientX;\n        y0 = e.clientY;\n        mLeft0 = moveElement.offsetLeft;\n        mTop0 = moveElement.offsetTop;\n\n        draging = true;\n\n    };\n    var mousemoveHandler = (e) => {\n        e = e || window.event;\n        if (draging) {\n            var x1 = e.clientX,\n                y1 = e.clientY;\n            mLeft1 = x1 - x0 + mLeft0;\n            mTop1 = y1 - y0 + mTop0;\n\n\n            if (container) {\n                // 计算可移动位置的大小， 保证元素不会超过可移动范围\n                // 此处就是父元素的宽度减去子元素宽度\n                var width = container.clientWidth - moveElement.offsetWidth;\n                var height = container.clientHeight - moveElement.offsetHeight;\n                // min方法保证不会超过右边界，max保证不会超过左边界\n                mLeft1 = Math.min(Math.max(0, mLeft1), width);\n                mTop1 = Math.min(Math.max(0, mTop1), height);\n            }\n\n\n            moveElement.style.left = mLeft1;\n            moveElement.style.top = mTop1;\n\n            typeof cb === 'function' && cb(mLeft1, mTop1);\n        }\n    };\n    var mouseupHandler = (e) => {\n        draging = false;\n    }\n\n    if (window.addEventListener) {\n        dragBar.addEventListener('mousedown', mousedownHandler, false);\n        document.addEventListener('mousemove', mousemoveHandler, false);\n        document.addEventListener('mouseup', mouseupHandler, false);\n    }\n}\n\nfunction getImgPromise(src) {\n    return new Promise((resolve, reject) => {\n        let image = new Image();\n        // 跨域报错处理（Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.）\n        image.setAttribute('crossorigin', 'anonymous');\n        image.src = src;\n        image.onload = () => {\n            resolve(image);\n        };\n        image.onerror = () => {\n            reject('Error: image error!');\n        };\n    });\n}\n// 加载图片\nfunction loadImage(src, success, failure) {\n    var image = new Image();\n    // 跨域报错处理（Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.）\n    image.setAttribute('crossorigin', 'anonymous');\n    image.src = src;\n    image.onload = function () {\n        typeof success === 'function' && success(image);\n    };\n    image.onerror = function () {\n        typeof failure === 'function' && failure();\n    };\n}\n\nfunction loadImages(srcList, success, failure) {\n    var images = [];\n    var index = srcList.length;\n    var _loadImage = () => {\n        if (index === 0) {\n            return false;\n        }\n        var image = new Image();\n        // 跨域报错处理（Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.）\n        image.setAttribute('crossorigin', 'anonymous');\n        image.src = srcList[--index];\n        image.onload = function () {\n            images.unshift(image);\n            if (images.length === srcList.length) {\n                typeof success === 'function' && success(images);\n                return false;\n            }\n            _loadImage();\n        };\n        image.onerror = function () {\n            typeof failure === 'function' && failure();\n        };\n    };\n    _loadImage();\n\n}\n// 创建cavas\nfunction getCanvas(width, height) {\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n}\n\n//获取base64图片大小\nfunction getBase64Size(base64Data) {\n    // 'data:image/jpeg;base64,xxxxxx...xxx='\n    var str = base64Data.replace(/^data:image\\/[\\w]*;base64,$/, '');\n    var equalIndex = str.indexOf('=');\n    if (equalIndex > 0) {\n        str = str.substring(0, equalIndex);\n    }\n    var strLength = str.length;\n    return parseInt(strLength - (strLength / 8) * 2);\n}\n// 只对'image/jpeg'格式有效\nfunction compress(img, max, isSimple) {\n    let cvs = img;\n    if (cvs.nodeName.toLowerCase() === 'img') {\n        cvs = img2cvs(cvs);\n    }\n    let quality = 1;\n    let minWH = 800;\n    let scaleRatio = 0.9;\n    let qualityStep = 0.1;\n    // 质量压缩只支持'image/jpeg'，'image/webp'(chrome支持)\n    let qualityType = 'image/jpeg';\n\n    let width = cvs.width;\n    let height = cvs.height;\n    let cvsRatio = width / height;\n    let data = cvs.toDataURL(qualityType, 1.0);\n    let size0 = getBase64Size(data);\n    console.log('start compress: ' + Math.ceil(size0 / 1024));\n    if (isSimple) {\n        while (size0 > max) {\n            quality = Math.floor(max / size0 * 10) / 10;\n            data = cvs.toDataURL(qualityType, quality);\n            size0 = getBase64Size(data);\n        }\n\n    } else {\n        // 优先缩放\n        while (size0 > max && (width > minWH || height > minWH)) {\n            let newWidth, newHeight;\n            if (cvsRatio > 1) {\n                newWidth = width * scaleRatio > minWH ? width * scaleRatio : minWH;\n                newHeight = newWidth / cvsRatio;\n            } else {\n                newHeight = height * scaleRatio > minWH ? height * scaleRatio : minWH;\n                newWidth = newHeight * cvsRatio;\n            }\n\n            let canvas = getCanvas(newWidth, newHeight),\n                ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(cvs, 0, 0, newWidth, newHeight);\n\n            data = canvas.toDataURL(qualityType, 1.0);\n            size0 = getBase64Size(data);\n            width = newWidth;\n            height = newHeight;\n            cvs = canvas;\n        }\n        // 降低质量\n        while (size0 > max) {\n            quality -= qualityStep;\n            data = cvs.toDataURL(qualityType, quality);\n            size0 = getBase64Size(data);\n        }\n    }\n    console.log('end compress: ' + Math.ceil(size0 / 1024));\n    return data;\n}\n\n\nfunction base64Data2Blob(base64Data, mime) {\n    var binStr = atob(base64Data.split(',')[1]),\n        len = binStr.length,\n        arr = new Uint8Array(len);\n    if (!mime) {\n        // mime = base64Data.split(',')[0].split(':')[1].split(';')[0];\n        mime = base64Data.substring(base64Data.indexOf('data:') + 5, base64Data.indexOf(';base64'));\n    }\n\n    for (var i = 0; i < len; i++) {\n        arr[i] = binStr.charCodeAt(i);\n    }\n\n    return new Blob([arr], {\n        type: mime\n    });\n\n}\n\nfunction blob2FormData(blob, fileName) {\n    var formData = new FormData();\n    formData.append('file', blob);\n    if (!fileName) {\n        fileName = new Date().getTime();\n    }\n    formData.append(\"fileName\", fileName);\n\n    return formData;\n}\n\n// canvas转成blob对象，type值为image/jpeg或者image/webp时，可使用encoderOptions（0-1）设置图片展示质量。\nfunction canvas2Blob(canvas, callback, type, quality) {\n    // Polyfill\n    if (!HTMLCanvasElement.prototype.toBlob) {\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n            value: function (callback, type, quality) {\n\n                var binStr = atob(this.toDataURL('image/jpeg', quality).split(',')[1]),\n                    len = binStr.length,\n                    arr = new Uint8Array(len);\n\n                for (var i = 0; i < len; i++) {\n                    arr[i] = binStr.charCodeAt(i);\n                }\n\n                callback(new Blob([arr], {\n                    type: type || 'image/png'\n                }));\n            }\n        });\n    }\n\n    canvas.toBlob(callback, type, quality);\n}\n\nfunction uploadFile(formData, url) {\n\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open('POST', url); //注意跨域问题\n    xmlHttp.send(formData);\n    xmlHttp.onreadystatechange = function () {\n        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\n            console.log(xmlHttp.responseText);\n        } else {\n            console.log(xmlHttp.statusText);\n        }\n    };\n}\n// 选择文件\nfunction chooseFile(btn, cb, validFileCallback) {\n    let $btn = typeof btn === \"string\" ? document.querySelector(btn) : btn;\n    let $file = $btn.querySelector('input[type=file]');\n    if (!$file) {\n        let fileNode = document.createElement('input');\n        fileNode.setAttribute('type', 'file');\n\n        fileNode.style.cssText = 'display: none;';\n        $btn.appendChild(fileNode);\n        $file = $btn.querySelector('input[type=file]');\n    }\n\n    $file.addEventListener('change', function (e) {\n        if (this.files.length > 0) {\n\n            let oFile = this.files[0];\n\n            let validFile = true;\n            if (typeof validFileCallback === 'function' && validFileCallback(oFile) === false) {\n                validFile = false;\n            }\n\n            if (validFile) {\n                let reader = new FileReader();\n                reader.readAsDataURL(oFile);\n\n                reader.onload = function () {\n                    typeof cb === 'function' && cb(this.result);\n                }\n            } else {\n                console.log('onValidateFile function return false')\n            }\n\n        }\n    }, false);\n\n    // 阻止冒泡导致两次触发selectBtn\n    $file.addEventListener('click', (e) => {\n        e.stopPropagation();\n    })\n\n    $file.click();\n\n}\nfunction _$(ele) {\n    return typeof ele === 'string' ? document.querySelector(ele) : ele;\n}\nfunction img2cvs(img) {\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    canvas.width = img.naturalWidth;\n    canvas.height = img.naturalHeight;\n    ctx.drawImage(img, 0, 0);\n    return canvas;\n}\n\nexport {\n    drag,\n    loadImage,\n    loadImages,\n    getCanvas,\n    getBase64Size,\n    compress,\n    base64Data2Blob,\n    blob2FormData,\n    chooseFile,\n    uploadFile,\n    getImgPromise,\n    _$,\n    img2cvs\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACnBA;AACA;AAEA;AACA;AAEA;AACA;;;;;;;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/BA;AACA;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;AACA;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAjBA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAhBA;AACA;AAkBA;AACA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;AACA;AAwBA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AACA;AAIA;AAEA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AAEA;AACA;;;AAEA;AACA;AACA;;;AACA;AACA;AACA;;;AACA;AACA;AACA;;;;;;AAIA;;;;;;;;;;;AC36BA;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;;;AAGA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AACA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAcA;AACA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AACA;AAEA;AACA;AACA;AACA;AAGA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;;;AAEA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;;;;;;AAIA;;;;;;;;;;;;;;;;;;;;;ACvQA;AACA;;;AAGA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;AACA;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAKA;;;;;;;;;;;;;;AClPA;AACA;AACA;AADA;AACA;AAKA;AACA;AAEA;AACA;AACA;AACA;;;AACA;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;AA4BA;AAEA;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAiBA;AAEA;;;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;AC1MA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAdA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}